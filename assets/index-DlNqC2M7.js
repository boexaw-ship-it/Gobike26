function UT(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wy={exports:{}},kh={},xy={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),WT=Symbol.for("react.portal"),HT=Symbol.for("react.fragment"),$T=Symbol.for("react.strict_mode"),qT=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),GT=Symbol.for("react.context"),KT=Symbol.for("react.forward_ref"),QT=Symbol.for("react.suspense"),YT=Symbol.for("react.memo"),XT=Symbol.for("react.lazy"),Fg=Symbol.iterator;function JT(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var Ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ty=Object.assign,Iy={};function qo(t,e,n){this.props=t,this.context=e,this.refs=Iy,this.updater=n||Ey}qo.prototype.isReactComponent={};qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Py(){}Py.prototype=qo.prototype;function Cp(t,e,n){this.props=t,this.context=e,this.refs=Iy,this.updater=n||Ey}var kp=Cp.prototype=new Py;kp.constructor=Cp;Ty(kp,qo.prototype);kp.isPureReactComponent=!0;var zg=Array.isArray,Sy=Object.prototype.hasOwnProperty,Ap={current:null},Cy={key:!0,ref:!0,__self:!0,__source:!0};function ky(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Sy.call(e,i)&&!Cy.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),g=0;g<h;g++)d[g]=arguments[g+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Ql,type:t,key:o,ref:l,props:s,_owner:Ap.current}}function eI(t,e){return{$$typeof:Ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ql}function tI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ug=/\/+/g;function yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tI(""+t.key):e.toString(36)}function wc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ql:case WT:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+yd(l,0):i,zg(s)?(n="",t!=null&&(n=t.replace(Ug,"$&/")+"/"),wc(s,e,n,"",function(g){return g})):s!=null&&(bp(s)&&(s=eI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Ug,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",zg(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+yd(o,h);l+=wc(o,e,n,d,s)}else if(d=JT(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+yd(o,h++),l+=wc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Xu(t,e,n){if(t==null)return t;var i=[],s=0;return wc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function nI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},xc={transition:null},iI={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:xc,ReactCurrentOwner:Ap};function Ay(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!bp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=qo;Ee.Fragment=HT;Ee.Profiler=qT;Ee.PureComponent=Cp;Ee.StrictMode=$T;Ee.Suspense=QT;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iI;Ee.act=Ay;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ty({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Ap.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Sy.call(e,d)&&!Cy.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var g=0;g<d;g++)h[g]=arguments[g+2];i.children=h}return{$$typeof:Ql,type:t.type,key:s,ref:o,props:i,_owner:l}};Ee.createContext=function(t){return t={$$typeof:GT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZT,_context:t},t.Consumer=t};Ee.createElement=ky;Ee.createFactory=function(t){var e=ky.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:KT,render:t}};Ee.isValidElement=bp;Ee.lazy=function(t){return{$$typeof:XT,_payload:{_status:-1,_result:t},_init:nI}};Ee.memo=function(t,e){return{$$typeof:YT,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=xc.transition;xc.transition={};try{t()}finally{xc.transition=e}};Ee.unstable_act=Ay;Ee.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Ee.useContext=function(t){return Wt.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Ee.useId=function(){return Wt.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Ee.useRef=function(t){return Wt.current.useRef(t)};Ee.useState=function(t){return Wt.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Wt.current.useTransition()};Ee.version="18.3.1";xy.exports=Ee;var $=xy.exports;const wl=yy($),rI=UT({__proto__:null,default:wl},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=$,oI=Symbol.for("react.element"),aI=Symbol.for("react.fragment"),lI=Object.prototype.hasOwnProperty,uI=sI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cI={key:!0,ref:!0,__self:!0,__source:!0};function by(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)lI.call(e,i)&&!cI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:oI,type:t,key:o,ref:l,props:s,_owner:uI.current}}kh.Fragment=aI;kh.jsx=by;kh.jsxs=by;wy.exports=kh;var p=wy.exports,af={},Ny={exports:{}},ln={},Ry={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ue){var X=q.length;q.push(ue);e:for(;0<X;){var he=X-1>>>1,ve=q[he];if(0<s(ve,ue))q[he]=ue,q[X]=ve,X=he;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ue=q[0],X=q.pop();if(X!==ue){q[0]=X;e:for(var he=0,ve=q.length,Te=ve>>>1;he<Te;){var Ne=2*(he+1)-1,ye=q[Ne],pe=Ne+1,ct=q[pe];if(0>s(ye,X))pe<ve&&0>s(ct,ye)?(q[he]=ct,q[pe]=X,he=pe):(q[he]=ye,q[Ne]=X,he=Ne);else if(pe<ve&&0>s(ct,X))q[he]=ct,q[pe]=X,he=pe;else break e}}return ue}function s(q,ue){var X=q.sortIndex-ue.sortIndex;return X!==0?X:q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],g=[],y=1,x=null,I=3,O=!1,M=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(q){for(var ue=n(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=q)i(g),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(g)}}function H(q){if(j=!1,R(q),!M)if(n(d)!==null)M=!0,ut(Y);else{var ue=n(g);ue!==null&&jt(H,ue.startTime-q)}}function Y(q,ue){M=!1,j&&(j=!1,A(E),E=-1),O=!0;var X=I;try{for(R(ue),x=n(d);x!==null&&(!(x.expirationTime>ue)||q&&!D());){var he=x.callback;if(typeof he=="function"){x.callback=null,I=x.priorityLevel;var ve=he(x.expirationTime<=ue);ue=t.unstable_now(),typeof ve=="function"?x.callback=ve:x===n(d)&&i(d),R(ue)}else i(d);x=n(d)}if(x!==null)var Te=!0;else{var Ne=n(g);Ne!==null&&jt(H,Ne.startTime-ue),Te=!1}return Te}finally{x=null,I=X,O=!1}}var J=!1,C=null,E=-1,S=5,b=-1;function D(){return!(t.unstable_now()-b<S)}function V(){if(C!==null){var q=t.unstable_now();b=q;var ue=!0;try{ue=C(!0,q)}finally{ue?N():(J=!1,C=null)}}else J=!1}var N;if(typeof P=="function")N=function(){P(V)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,si=Ye.port2;Ye.port1.onmessage=V,N=function(){si.postMessage(null)}}else N=function(){U(V,0)};function ut(q){C=q,J||(J=!0,N())}function jt(q,ue){E=U(function(){q(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){M||O||(M=!0,ut(Y))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var X=I;I=ue;try{return q()}finally{I=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ue){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=I;I=q;try{return ue()}finally{I=X}},t.unstable_scheduleCallback=function(q,ue,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,q={id:y++,callback:ue,priorityLevel:q,startTime:X,expirationTime:ve,sortIndex:-1},X>he?(q.sortIndex=X,e(g,q),n(d)===null&&q===n(g)&&(j?(A(E),E=-1):j=!0,jt(H,X-he))):(q.sortIndex=ve,e(d,q),M||O||(M=!0,ut(Y))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var ue=I;return function(){var X=I;I=ue;try{return q.apply(this,arguments)}finally{I=X}}}})(Ly);Ry.exports=Ly;var hI=Ry.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI=$,an=hI;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oy=new Set,xl={};function gs(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(xl[t]=e,t=0;t<e.length;t++)Oy.add(e[t])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lf=Object.prototype.hasOwnProperty,fI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bg={},Wg={};function pI(t){return lf.call(Wg,t)?!0:lf.call(Bg,t)?!1:fI.test(t)?Wg[t]=!0:(Bg[t]=!0,!1)}function mI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gI(t,e,n,i){if(e===null||typeof e>"u"||mI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Np=/[\-:]([a-z])/g;function Rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Np,Rp);Ct[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Np,Rp);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Np,Rp);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lp(t,e,n,i){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gI(e,n,s,i)&&(n=null),i||s===null?pI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=dI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),ro=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Op=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),Dy=Symbol.for("react.provider"),My=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),hf=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),jy=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=Hg&&t[Hg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,wd;function Ya(t){if(wd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wd=e&&e[1]||""}return`
`+wd+t}var xd=!1;function Ed(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var s=g.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ya(t):""}function _I(t){switch(t.tag){case 5:return Ya(t.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 2:case 15:return t=Ed(t.type,!1),t;case 11:return t=Ed(t.type.render,!1),t;case 1:return t=Ed(t.type,!0),t;default:return""}}function df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case ro:return"Portal";case uf:return"Profiler";case Op:return"StrictMode";case cf:return"Suspense";case hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case My:return(t.displayName||"Context")+".Consumer";case Dy:return(t._context.displayName||"Context")+".Provider";case Dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mp:return e=t.displayName||null,e!==null?e:df(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return df(t(e))}catch{}}return null}function vI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(e);case 8:return e===Op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yI(t){var e=Vy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=yI(t))}function Fy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Vy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ff(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $g(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zy(t,e){e=e.checked,e!=null&&Lp(t,"checked",e,!1)}function pf(t,e){zy(t,e);var n=Tr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&mf(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mf(t,e,n){(e!=="number"||zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xa=Array.isArray;function vo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Xa(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function Uy(t,e){var n=Tr(e.value),i=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Gg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function By(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?By(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,Wy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wI=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){wI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function Hy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function $y(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Hy(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var xI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vf(t,e){if(e){if(xI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=null;function jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xf=null,yo=null,wo=null;function Kg(t){if(t=Jl(t)){if(typeof xf!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Lh(e),xf(t.stateNode,t.type,e))}}function qy(t){yo?wo?wo.push(t):wo=[t]:yo=t}function Zy(){if(yo){var t=yo,e=wo;if(wo=yo=null,Kg(t),e)for(t=0;t<e.length;t++)Kg(e[t])}}function Gy(t,e){return t(e)}function Ky(){}var Td=!1;function Qy(t,e,n){if(Td)return t(e,n);Td=!0;try{return Gy(t,e,n)}finally{Td=!1,(yo!==null||wo!==null)&&(Ky(),Zy())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var i=Lh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Ef=!1;if(ki)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Ef=!1}function EI(t,e,n,i,s,o,l,h,d){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(y){this.onError(y)}}var al=!1,Uc=null,Bc=!1,Tf=null,TI={onError:function(t){al=!0,Uc=t}};function II(t,e,n,i,s,o,l,h,d){al=!1,Uc=null,EI.apply(TI,arguments)}function PI(t,e,n,i,s,o,l,h,d){if(II.apply(this,arguments),al){if(al){var g=Uc;al=!1,Uc=null}else throw Error(Q(198));Bc||(Bc=!0,Tf=g)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(_s(t)!==t)throw Error(Q(188))}function SI(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Qg(s),t;if(o===i)return Qg(s),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Xy(t){return t=SI(t),t!==null?Jy(t):null}function Jy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jy(t);if(e!==null)return e;t=t.sibling}return null}var e0=an.unstable_scheduleCallback,Yg=an.unstable_cancelCallback,CI=an.unstable_shouldYield,kI=an.unstable_requestPaint,nt=an.unstable_now,AI=an.unstable_getCurrentPriorityLevel,Vp=an.unstable_ImmediatePriority,t0=an.unstable_UserBlockingPriority,Wc=an.unstable_NormalPriority,bI=an.unstable_LowPriority,n0=an.unstable_IdlePriority,Ah=null,Qn=null;function NI(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Ah,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:OI,RI=Math.log,LI=Math.LN2;function OI(t){return t>>>=0,t===0?32:31-(RI(t)/LI|0)|0}var nc=64,ic=4194304;function Ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Ja(h):(o&=l,o!==0&&(i=Ja(o)))}else l=n&~s,l!==0?i=Ja(l):o!==0&&(i=Ja(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mn(e),s=1<<n,i|=t[n],e&=~s;return i}function DI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Mn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=DI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function If(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function i0(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function Id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Fp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Le=0;function r0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s0,zp,o0,a0,l0,Pf=!1,rc=[],cr=null,hr=null,dr=null,Il=new Map,Pl=new Map,er=[],VI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xg(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(e.pointerId)}}function Wa(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Jl(e),e!==null&&zp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FI(t,e,n,i,s){switch(e){case"focusin":return cr=Wa(cr,t,e,n,i,s),!0;case"dragenter":return hr=Wa(hr,t,e,n,i,s),!0;case"mouseover":return dr=Wa(dr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Il.set(o,Wa(Il.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Pl.set(o,Wa(Pl.get(o)||null,t,e,n,i,s)),!0}return!1}function u0(t){var e=Qr(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=Yy(n),e!==null){t.blockedOn=e,l0(t.priority,function(){o0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);wf=i,n.target.dispatchEvent(i),wf=null}else return e=Jl(n),e!==null&&zp(e),t.blockedOn=n,!1;e.shift()}return!0}function Jg(t,e,n){Ec(t)&&n.delete(e)}function zI(){Pf=!1,cr!==null&&Ec(cr)&&(cr=null),hr!==null&&Ec(hr)&&(hr=null),dr!==null&&Ec(dr)&&(dr=null),Il.forEach(Jg),Pl.forEach(Jg)}function Ha(t,e){t.blockedOn===e&&(t.blockedOn=null,Pf||(Pf=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,zI)))}function Sl(t){function e(s){return Ha(s,t)}if(0<rc.length){Ha(rc[0],t);for(var n=1;n<rc.length;n++){var i=rc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(cr!==null&&Ha(cr,t),hr!==null&&Ha(hr,t),dr!==null&&Ha(dr,t),Il.forEach(e),Pl.forEach(e),n=0;n<er.length;n++)i=er[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)u0(n),n.blockedOn===null&&er.shift()}var xo=Mi.ReactCurrentBatchConfig,$c=!0;function UI(t,e,n,i){var s=Le,o=xo.transition;xo.transition=null;try{Le=1,Up(t,e,n,i)}finally{Le=s,xo.transition=o}}function BI(t,e,n,i){var s=Le,o=xo.transition;xo.transition=null;try{Le=4,Up(t,e,n,i)}finally{Le=s,xo.transition=o}}function Up(t,e,n,i){if($c){var s=Sf(t,e,n,i);if(s===null)Od(t,e,i,qc,n),Xg(t,i);else if(FI(s,t,e,n,i))i.stopPropagation();else if(Xg(t,i),e&4&&-1<VI.indexOf(t)){for(;s!==null;){var o=Jl(s);if(o!==null&&s0(o),o=Sf(t,e,n,i),o===null&&Od(t,e,i,qc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Od(t,e,i,null,n)}}var qc=null;function Sf(t,e,n,i){if(qc=null,t=jp(i),t=Qr(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qc=t,null}function c0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AI()){case Vp:return 1;case t0:return 4;case Wc:case bI:return 16;case n0:return 536870912;default:return 16}default:return 16}}var or=null,Bp=null,Tc=null;function h0(){if(Tc)return Tc;var t,e=Bp,n=e.length,i,s="value"in or?or.value:or.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Tc=s.slice(t,1<i?1-i:void 0)}function Ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function e_(){return!1}function un(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sc:e_,this.isPropagationStopped=e_,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wp=un(Zo),Xl=Ke({},Zo,{view:0,detail:0}),WI=un(Xl),Pd,Sd,$a,bh=Ke({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Pd=t.screenX-$a.screenX,Sd=t.screenY-$a.screenY):Sd=Pd=0,$a=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Sd}}),t_=un(bh),HI=Ke({},bh,{dataTransfer:0}),$I=un(HI),qI=Ke({},Xl,{relatedTarget:0}),Cd=un(qI),ZI=Ke({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),GI=un(ZI),KI=Ke({},Zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=un(KI),YI=Ke({},Zo,{data:0}),n_=un(YI),XI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eP[t])?!!e[t]:!1}function Hp(){return tP}var nP=Ke({},Xl,{key:function(t){if(t.key){var e=XI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hp,charCode:function(t){return t.type==="keypress"?Ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iP=un(nP),rP=Ke({},bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i_=un(rP),sP=Ke({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hp}),oP=un(sP),aP=Ke({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),lP=un(aP),uP=Ke({},bh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cP=un(uP),hP=[9,13,27,32],$p=ki&&"CompositionEvent"in window,ll=null;ki&&"documentMode"in document&&(ll=document.documentMode);var dP=ki&&"TextEvent"in window&&!ll,d0=ki&&(!$p||ll&&8<ll&&11>=ll),r_=" ",s_=!1;function f0(t,e){switch(t){case"keyup":return hP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function fP(t,e){switch(t){case"compositionend":return p0(e);case"keypress":return e.which!==32?null:(s_=!0,r_);case"textInput":return t=e.data,t===r_&&s_?null:t;default:return null}}function pP(t,e){if(oo)return t==="compositionend"||!$p&&f0(t,e)?(t=h0(),Tc=Bp=or=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d0&&e.locale!=="ko"?null:e.data;default:return null}}var mP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mP[t.type]:e==="textarea"}function m0(t,e,n,i){qy(i),e=Zc(e,"onChange"),0<e.length&&(n=new Wp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ul=null,Cl=null;function gP(t){S0(t,0)}function Nh(t){var e=uo(t);if(Fy(e))return t}function _P(t,e){if(t==="change")return e}var g0=!1;if(ki){var kd;if(ki){var Ad="oninput"in document;if(!Ad){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),Ad=typeof a_.oninput=="function"}kd=Ad}else kd=!1;g0=kd&&(!document.documentMode||9<document.documentMode)}function l_(){ul&&(ul.detachEvent("onpropertychange",_0),Cl=ul=null)}function _0(t){if(t.propertyName==="value"&&Nh(Cl)){var e=[];m0(e,Cl,t,jp(t)),Qy(gP,e)}}function vP(t,e,n){t==="focusin"?(l_(),ul=e,Cl=n,ul.attachEvent("onpropertychange",_0)):t==="focusout"&&l_()}function yP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nh(Cl)}function wP(t,e){if(t==="click")return Nh(e)}function xP(t,e){if(t==="input"||t==="change")return Nh(e)}function EP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:EP;function kl(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!lf.call(e,s)||!Vn(t[s],e[s]))return!1}return!0}function u_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function c_(t,e){var n=u_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u_(n)}}function v0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y0(){for(var t=window,e=zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zc(t.document)}return e}function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TP(t){var e=y0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v0(n.ownerDocument.documentElement,n)){if(i!==null&&qp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=c_(n,o);var l=c_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IP=ki&&"documentMode"in document&&11>=document.documentMode,ao=null,Cf=null,cl=null,kf=!1;function h_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kf||ao==null||ao!==zc(i)||(i=ao,"selectionStart"in i&&qp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cl&&kl(cl,i)||(cl=i,i=Zc(Cf,"onSelect"),0<i.length&&(e=new Wp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ao)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},bd={},w0={};ki&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Rh(t){if(bd[t])return bd[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w0)return bd[t]=e[n];return t}var x0=Rh("animationend"),E0=Rh("animationiteration"),T0=Rh("animationstart"),I0=Rh("transitionend"),P0=new Map,d_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,e){P0.set(t,e),gs(e,[t])}for(var Nd=0;Nd<d_.length;Nd++){var Rd=d_[Nd],PP=Rd.toLowerCase(),SP=Rd[0].toUpperCase()+Rd.slice(1);kr(PP,"on"+SP)}kr(x0,"onAnimationEnd");kr(E0,"onAnimationIteration");kr(T0,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(I0,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CP=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function f_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,PI(i,e,void 0,t),t.currentTarget=null}function S0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,g=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;f_(s,h,g),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,g=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;f_(s,h,g),o=d}}}if(Bc)throw t=Tf,Bc=!1,Tf=null,t}function Fe(t,e){var n=e[Lf];n===void 0&&(n=e[Lf]=new Set);var i=t+"__bubble";n.has(i)||(C0(e,t,2,!1),n.add(i))}function Ld(t,e,n){var i=0;e&&(i|=4),C0(n,t,i,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Al(t){if(!t[ac]){t[ac]=!0,Oy.forEach(function(n){n!=="selectionchange"&&(CP.has(n)||Ld(n,!1,t),Ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,Ld("selectionchange",!1,e))}}function C0(t,e,n,i){switch(c0(e)){case 1:var s=UI;break;case 4:s=BI;break;default:s=Up}n=s.bind(null,e,n,t),s=void 0,!Ef||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Od(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Qr(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Qy(function(){var g=o,y=jp(n),x=[];e:{var I=P0.get(t);if(I!==void 0){var O=Wp,M=t;switch(t){case"keypress":if(Ic(n)===0)break e;case"keydown":case"keyup":O=iP;break;case"focusin":M="focus",O=Cd;break;case"focusout":M="blur",O=Cd;break;case"beforeblur":case"afterblur":O=Cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=t_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=$I;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=oP;break;case x0:case E0:case T0:O=GI;break;case I0:O=lP;break;case"scroll":O=WI;break;case"wheel":O=cP;break;case"copy":case"cut":case"paste":O=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=i_}var j=(e&4)!==0,U=!j&&t==="scroll",A=j?I!==null?I+"Capture":null:I;j=[];for(var P=g,R;P!==null;){R=P;var H=R.stateNode;if(R.tag===5&&H!==null&&(R=H,A!==null&&(H=Tl(P,A),H!=null&&j.push(bl(P,H,R)))),U)break;P=P.return}0<j.length&&(I=new O(I,M,null,n,y),x.push({event:I,listeners:j}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",I&&n!==wf&&(M=n.relatedTarget||n.fromElement)&&(Qr(M)||M[Ai]))break e;if((O||I)&&(I=y.window===y?y:(I=y.ownerDocument)?I.defaultView||I.parentWindow:window,O?(M=n.relatedTarget||n.toElement,O=g,M=M?Qr(M):null,M!==null&&(U=_s(M),M!==U||M.tag!==5&&M.tag!==6)&&(M=null)):(O=null,M=g),O!==M)){if(j=t_,H="onMouseLeave",A="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(j=i_,H="onPointerLeave",A="onPointerEnter",P="pointer"),U=O==null?I:uo(O),R=M==null?I:uo(M),I=new j(H,P+"leave",O,n,y),I.target=U,I.relatedTarget=R,H=null,Qr(y)===g&&(j=new j(A,P+"enter",M,n,y),j.target=R,j.relatedTarget=U,H=j),U=H,O&&M)t:{for(j=O,A=M,P=0,R=j;R;R=eo(R))P++;for(R=0,H=A;H;H=eo(H))R++;for(;0<P-R;)j=eo(j),P--;for(;0<R-P;)A=eo(A),R--;for(;P--;){if(j===A||A!==null&&j===A.alternate)break t;j=eo(j),A=eo(A)}j=null}else j=null;O!==null&&p_(x,I,O,j,!1),M!==null&&U!==null&&p_(x,U,M,j,!0)}}e:{if(I=g?uo(g):window,O=I.nodeName&&I.nodeName.toLowerCase(),O==="select"||O==="input"&&I.type==="file")var Y=_P;else if(o_(I))if(g0)Y=xP;else{Y=yP;var J=vP}else(O=I.nodeName)&&O.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(Y=wP);if(Y&&(Y=Y(t,g))){m0(x,Y,n,y);break e}J&&J(t,I,g),t==="focusout"&&(J=I._wrapperState)&&J.controlled&&I.type==="number"&&mf(I,"number",I.value)}switch(J=g?uo(g):window,t){case"focusin":(o_(J)||J.contentEditable==="true")&&(ao=J,Cf=g,cl=null);break;case"focusout":cl=Cf=ao=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,h_(x,n,y);break;case"selectionchange":if(IP)break;case"keydown":case"keyup":h_(x,n,y)}var C;if($p)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else oo?f0(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(d0&&n.locale!=="ko"&&(oo||E!=="onCompositionStart"?E==="onCompositionEnd"&&oo&&(C=h0()):(or=y,Bp="value"in or?or.value:or.textContent,oo=!0)),J=Zc(g,E),0<J.length&&(E=new n_(E,t,null,n,y),x.push({event:E,listeners:J}),C?E.data=C:(C=p0(n),C!==null&&(E.data=C)))),(C=dP?fP(t,n):pP(t,n))&&(g=Zc(g,"onBeforeInput"),0<g.length&&(y=new n_("onBeforeInput","beforeinput",null,n,y),x.push({event:y,listeners:g}),y.data=C))}S0(x,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Tl(t,n),o!=null&&i.unshift(bl(t,o,s)),o=Tl(t,e),o!=null&&i.push(bl(t,o,s))),t=t.return}return i}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,g=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&g!==null&&(h=g,s?(d=Tl(n,o),d!=null&&l.unshift(bl(n,d,h))):s||(d=Tl(n,o),d!=null&&l.push(bl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var kP=/\r\n?/g,AP=/\u0000|\uFFFD/g;function m_(t){return(typeof t=="string"?t:""+t).replace(kP,`
`).replace(AP,"")}function lc(t,e,n){if(e=m_(e),m_(t)!==e&&n)throw Error(Q(425))}function Gc(){}var Af=null,bf=null;function Nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rf=typeof setTimeout=="function"?setTimeout:void 0,bP=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,NP=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(t){return g_.resolve(null).then(t).catch(RP)}:Rf;function RP(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Sl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Sl(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function __(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Go,Nl="__reactProps$"+Go,Ai="__reactContainer$"+Go,Lf="__reactEvents$"+Go,LP="__reactListeners$"+Go,OP="__reactHandles$"+Go;function Qr(t){var e=t[Gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[Gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=__(t);t!==null;){if(n=t[Gn])return n;t=__(t)}return e}t=n,n=t.parentNode}return null}function Jl(t){return t=t[Gn]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Lh(t){return t[Nl]||null}var Of=[],co=-1;function Ar(t){return{current:t}}function ze(t){0>co||(t.current=Of[co],Of[co]=null,co--)}function Ve(t,e){co++,Of[co]=t.current,t.current=e}var Ir={},Dt=Ar(Ir),Kt=Ar(!1),rs=Ir;function Ao(t,e){var n=t.type.contextTypes;if(!n)return Ir;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(t){return t=t.childContextTypes,t!=null}function Kc(){ze(Kt),ze(Dt)}function v_(t,e,n){if(Dt.current!==Ir)throw Error(Q(168));Ve(Dt,e),Ve(Kt,n)}function k0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,vI(t)||"Unknown",s));return Ke({},n,i)}function Qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,rs=Dt.current,Ve(Dt,t),Ve(Kt,Kt.current),!0}function y_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=k0(t,e,rs),i.__reactInternalMemoizedMergedChildContext=t,ze(Kt),ze(Dt),Ve(Dt,t)):ze(Kt),Ve(Kt,n)}var yi=null,Oh=!1,Md=!1;function A0(t){yi===null?yi=[t]:yi.push(t)}function DP(t){Oh=!0,A0(t)}function br(){if(!Md&&yi!==null){Md=!0;var t=0,e=Le;try{var n=yi;for(Le=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}yi=null,Oh=!1}catch(s){throw yi!==null&&(yi=yi.slice(t+1)),e0(Vp,br),s}finally{Le=e,Md=!1}}return null}var ho=[],fo=0,Yc=null,Xc=0,vn=[],yn=0,ss=null,wi=1,xi="";function Zr(t,e){ho[fo++]=Xc,ho[fo++]=Yc,Yc=t,Xc=e}function b0(t,e,n){vn[yn++]=wi,vn[yn++]=xi,vn[yn++]=ss,ss=t;var i=wi;t=xi;var s=32-Mn(i)-1;i&=~(1<<s),n+=1;var o=32-Mn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,wi=1<<32-Mn(e)+s|n<<s|i,xi=o+t}else wi=1<<o|n<<s|i,xi=t}function Zp(t){t.return!==null&&(Zr(t,1),b0(t,1,0))}function Gp(t){for(;t===Yc;)Yc=ho[--fo],ho[fo]=null,Xc=ho[--fo],ho[fo]=null;for(;t===ss;)ss=vn[--yn],vn[yn]=null,xi=vn[--yn],vn[yn]=null,wi=vn[--yn],vn[yn]=null}var sn=null,rn=null,We=!1,On=null;function N0(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function w_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sn=t,rn=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sn=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:wi,overflow:xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sn=t,rn=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if(We){var e=rn;if(e){var n=e;if(!w_(t,e)){if(Df(t))throw Error(Q(418));e=fr(n.nextSibling);var i=sn;e&&w_(t,e)?N0(i,n):(t.flags=t.flags&-4097|2,We=!1,sn=t)}}else{if(Df(t))throw Error(Q(418));t.flags=t.flags&-4097|2,We=!1,sn=t}}}function x_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function uc(t){if(t!==sn)return!1;if(!We)return x_(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nf(t.type,t.memoizedProps)),e&&(e=rn)){if(Df(t))throw R0(),Error(Q(418));for(;e;)N0(t,e),e=fr(e.nextSibling)}if(x_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=sn?fr(t.stateNode.nextSibling):null;return!0}function R0(){for(var t=rn;t;)t=fr(t.nextSibling)}function bo(){rn=sn=null,We=!1}function Kp(t){On===null?On=[t]:On.push(t)}var MP=Mi.ReactCurrentBatchConfig;function qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E_(t){var e=t._init;return e(t._payload)}function L0(t){function e(A,P){if(t){var R=A.deletions;R===null?(A.deletions=[P],A.flags|=16):R.push(P)}}function n(A,P){if(!t)return null;for(;P!==null;)e(A,P),P=P.sibling;return null}function i(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function s(A,P){return A=_r(A,P),A.index=0,A.sibling=null,A}function o(A,P,R){return A.index=R,t?(R=A.alternate,R!==null?(R=R.index,R<P?(A.flags|=2,P):R):(A.flags|=2,P)):(A.flags|=1048576,P)}function l(A){return t&&A.alternate===null&&(A.flags|=2),A}function h(A,P,R,H){return P===null||P.tag!==6?(P=Wd(R,A.mode,H),P.return=A,P):(P=s(P,R),P.return=A,P)}function d(A,P,R,H){var Y=R.type;return Y===so?y(A,P,R.props.children,H,R.key):P!==null&&(P.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Xi&&E_(Y)===P.type)?(H=s(P,R.props),H.ref=qa(A,P,R),H.return=A,H):(H=Nc(R.type,R.key,R.props,null,A.mode,H),H.ref=qa(A,P,R),H.return=A,H)}function g(A,P,R,H){return P===null||P.tag!==4||P.stateNode.containerInfo!==R.containerInfo||P.stateNode.implementation!==R.implementation?(P=Hd(R,A.mode,H),P.return=A,P):(P=s(P,R.children||[]),P.return=A,P)}function y(A,P,R,H,Y){return P===null||P.tag!==7?(P=ts(R,A.mode,H,Y),P.return=A,P):(P=s(P,R),P.return=A,P)}function x(A,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Wd(""+P,A.mode,R),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ju:return R=Nc(P.type,P.key,P.props,null,A.mode,R),R.ref=qa(A,null,P),R.return=A,R;case ro:return P=Hd(P,A.mode,R),P.return=A,P;case Xi:var H=P._init;return x(A,H(P._payload),R)}if(Xa(P)||Ua(P))return P=ts(P,A.mode,R,null),P.return=A,P;cc(A,P)}return null}function I(A,P,R,H){var Y=P!==null?P.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Y!==null?null:h(A,P,""+R,H);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ju:return R.key===Y?d(A,P,R,H):null;case ro:return R.key===Y?g(A,P,R,H):null;case Xi:return Y=R._init,I(A,P,Y(R._payload),H)}if(Xa(R)||Ua(R))return Y!==null?null:y(A,P,R,H,null);cc(A,R)}return null}function O(A,P,R,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return A=A.get(R)||null,h(P,A,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ju:return A=A.get(H.key===null?R:H.key)||null,d(P,A,H,Y);case ro:return A=A.get(H.key===null?R:H.key)||null,g(P,A,H,Y);case Xi:var J=H._init;return O(A,P,R,J(H._payload),Y)}if(Xa(H)||Ua(H))return A=A.get(R)||null,y(P,A,H,Y,null);cc(P,H)}return null}function M(A,P,R,H){for(var Y=null,J=null,C=P,E=P=0,S=null;C!==null&&E<R.length;E++){C.index>E?(S=C,C=null):S=C.sibling;var b=I(A,C,R[E],H);if(b===null){C===null&&(C=S);break}t&&C&&b.alternate===null&&e(A,C),P=o(b,P,E),J===null?Y=b:J.sibling=b,J=b,C=S}if(E===R.length)return n(A,C),We&&Zr(A,E),Y;if(C===null){for(;E<R.length;E++)C=x(A,R[E],H),C!==null&&(P=o(C,P,E),J===null?Y=C:J.sibling=C,J=C);return We&&Zr(A,E),Y}for(C=i(A,C);E<R.length;E++)S=O(C,A,E,R[E],H),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?E:S.key),P=o(S,P,E),J===null?Y=S:J.sibling=S,J=S);return t&&C.forEach(function(D){return e(A,D)}),We&&Zr(A,E),Y}function j(A,P,R,H){var Y=Ua(R);if(typeof Y!="function")throw Error(Q(150));if(R=Y.call(R),R==null)throw Error(Q(151));for(var J=Y=null,C=P,E=P=0,S=null,b=R.next();C!==null&&!b.done;E++,b=R.next()){C.index>E?(S=C,C=null):S=C.sibling;var D=I(A,C,b.value,H);if(D===null){C===null&&(C=S);break}t&&C&&D.alternate===null&&e(A,C),P=o(D,P,E),J===null?Y=D:J.sibling=D,J=D,C=S}if(b.done)return n(A,C),We&&Zr(A,E),Y;if(C===null){for(;!b.done;E++,b=R.next())b=x(A,b.value,H),b!==null&&(P=o(b,P,E),J===null?Y=b:J.sibling=b,J=b);return We&&Zr(A,E),Y}for(C=i(A,C);!b.done;E++,b=R.next())b=O(C,A,E,b.value,H),b!==null&&(t&&b.alternate!==null&&C.delete(b.key===null?E:b.key),P=o(b,P,E),J===null?Y=b:J.sibling=b,J=b);return t&&C.forEach(function(V){return e(A,V)}),We&&Zr(A,E),Y}function U(A,P,R,H){if(typeof R=="object"&&R!==null&&R.type===so&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ju:e:{for(var Y=R.key,J=P;J!==null;){if(J.key===Y){if(Y=R.type,Y===so){if(J.tag===7){n(A,J.sibling),P=s(J,R.props.children),P.return=A,A=P;break e}}else if(J.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Xi&&E_(Y)===J.type){n(A,J.sibling),P=s(J,R.props),P.ref=qa(A,J,R),P.return=A,A=P;break e}n(A,J);break}else e(A,J);J=J.sibling}R.type===so?(P=ts(R.props.children,A.mode,H,R.key),P.return=A,A=P):(H=Nc(R.type,R.key,R.props,null,A.mode,H),H.ref=qa(A,P,R),H.return=A,A=H)}return l(A);case ro:e:{for(J=R.key;P!==null;){if(P.key===J)if(P.tag===4&&P.stateNode.containerInfo===R.containerInfo&&P.stateNode.implementation===R.implementation){n(A,P.sibling),P=s(P,R.children||[]),P.return=A,A=P;break e}else{n(A,P);break}else e(A,P);P=P.sibling}P=Hd(R,A.mode,H),P.return=A,A=P}return l(A);case Xi:return J=R._init,U(A,P,J(R._payload),H)}if(Xa(R))return M(A,P,R,H);if(Ua(R))return j(A,P,R,H);cc(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,P!==null&&P.tag===6?(n(A,P.sibling),P=s(P,R),P.return=A,A=P):(n(A,P),P=Wd(R,A.mode,H),P.return=A,A=P),l(A)):n(A,P)}return U}var No=L0(!0),O0=L0(!1),Jc=Ar(null),eh=null,po=null,Qp=null;function Yp(){Qp=po=eh=null}function Xp(t){var e=Jc.current;ze(Jc),t._currentValue=e}function jf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){eh=t,Qp=po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(Qp!==t)if(t={context:t,memoizedValue:e,next:null},po===null){if(eh===null)throw Error(Q(308));po=t,eh.dependencies={lanes:0,firstContext:t}}else po=po.next=t;return e}var Yr=null;function Jp(t){Yr===null?Yr=[t]:Yr.push(t)}function D0(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Jp(e)):(n.next=s.next,s.next=n),e.interleaved=n,bi(t,i)}function bi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ji=!1;function em(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ae&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,bi(t,n)}return s=i.interleaved,s===null?(e.next=e,Jp(i)):(e.next=s.next,s.next=e),i.interleaved=e,bi(t,n)}function Pc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Fp(t,n)}}function T_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function th(t,e,n,i){var s=t.updateQueue;Ji=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,g=d.next;d.next=null,l===null?o=g:l.next=g,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=g:h.next=g,y.lastBaseUpdate=d))}if(o!==null){var x=s.baseState;l=0,y=g=d=null,h=o;do{var I=h.lane,O=h.eventTime;if((i&I)===I){y!==null&&(y=y.next={eventTime:O,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,j=h;switch(I=e,O=n,j.tag){case 1:if(M=j.payload,typeof M=="function"){x=M.call(O,x,I);break e}x=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=j.payload,I=typeof M=="function"?M.call(O,x,I):M,I==null)break e;x=Ke({},x,I);break e;case 2:Ji=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,I=s.effects,I===null?s.effects=[h]:I.push(h))}else O={eventTime:O,lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(g=y=O,d=x):y=y.next=O,l|=I;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;I=h,h=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);if(y===null&&(d=x),s.baseState=d,s.firstBaseUpdate=g,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);as|=l,t.lanes=l,t.memoizedState=x}}function I_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var eu={},Yn=Ar(eu),Rl=Ar(eu),Ll=Ar(eu);function Xr(t){if(t===eu)throw Error(Q(174));return t}function tm(t,e){switch(Ve(Ll,e),Ve(Rl,t),Ve(Yn,eu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_f(e,t)}ze(Yn),Ve(Yn,e)}function Ro(){ze(Yn),ze(Rl),ze(Ll)}function j0(t){Xr(Ll.current);var e=Xr(Yn.current),n=_f(e,t.type);e!==n&&(Ve(Rl,t),Ve(Yn,n))}function nm(t){Rl.current===t&&(ze(Yn),ze(Rl))}var Ze=Ar(0);function nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function im(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var Sc=Mi.ReactCurrentDispatcher,Vd=Mi.ReactCurrentBatchConfig,os=0,Ge=null,ht=null,yt=null,ih=!1,hl=!1,Ol=0,jP=0;function At(){throw Error(Q(321))}function rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function sm(t,e,n,i,s,o){if(os=o,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sc.current=t===null||t.memoizedState===null?UP:BP,t=n(i,s),hl){o=0;do{if(hl=!1,Ol=0,25<=o)throw Error(Q(301));o+=1,yt=ht=null,e.updateQueue=null,Sc.current=WP,t=n(i,s)}while(hl)}if(Sc.current=rh,e=ht!==null&&ht.next!==null,os=0,yt=ht=Ge=null,ih=!1,e)throw Error(Q(300));return t}function om(){var t=Ol!==0;return Ol=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ge.memoizedState=yt=t:yt=yt.next=t,yt}function Pn(){if(ht===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=yt===null?Ge.memoizedState:yt.next;if(e!==null)yt=e,ht=t;else{if(t===null)throw Error(Q(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?Ge.memoizedState=yt=t:yt=yt.next=t}return yt}function Dl(t,e){return typeof e=="function"?e(t):e}function Fd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=ht,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,g=o;do{var y=g.lane;if((os&y)===y)d!==null&&(d=d.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var x={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};d===null?(h=d=x,l=i):d=d.next=x,Ge.lanes|=y,as|=y}g=g.next}while(g!==null&&g!==o);d===null?l=i:d.next=h,Vn(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ge.lanes|=o,as|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Vn(o,e.memoizedState)||(Gt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function V0(){}function F0(t,e){var n=Ge,i=Pn(),s=e(),o=!Vn(i.memoizedState,s);if(o&&(i.memoizedState=s,Gt=!0),i=i.queue,am(B0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Ml(9,U0.bind(null,n,i,s,e),void 0,null),wt===null)throw Error(Q(349));os&30||z0(n,e,s)}return s}function z0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U0(t,e,n,i){e.value=n,e.getSnapshot=i,W0(e)&&H0(t)}function B0(t,e,n){return n(function(){W0(e)&&H0(t)})}function W0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function H0(t){var e=bi(t,1);e!==null&&jn(e,t,1,-1)}function P_(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},e.queue=t,t=t.dispatch=zP.bind(null,Ge,t),[e.memoizedState,t]}function Ml(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function $0(){return Pn().memoizedState}function Cc(t,e,n,i){var s=Zn();Ge.flags|=t,s.memoizedState=Ml(1|e,n,void 0,i===void 0?null:i)}function Dh(t,e,n,i){var s=Pn();i=i===void 0?null:i;var o=void 0;if(ht!==null){var l=ht.memoizedState;if(o=l.destroy,i!==null&&rm(i,l.deps)){s.memoizedState=Ml(e,n,o,i);return}}Ge.flags|=t,s.memoizedState=Ml(1|e,n,o,i)}function S_(t,e){return Cc(8390656,8,t,e)}function am(t,e){return Dh(2048,8,t,e)}function q0(t,e){return Dh(4,2,t,e)}function Z0(t,e){return Dh(4,4,t,e)}function G0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K0(t,e,n){return n=n!=null?n.concat([t]):null,Dh(4,4,G0.bind(null,e,t),n)}function lm(){}function Q0(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Y0(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function X0(t,e,n){return os&21?(Vn(n,e)||(n=i0(),Ge.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function VP(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var i=Vd.transition;Vd.transition={};try{t(!1),e()}finally{Le=n,Vd.transition=i}}function J0(){return Pn().memoizedState}function FP(t,e,n){var i=gr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ew(t))tw(e,n);else if(n=D0(t,e,n,i),n!==null){var s=Bt();jn(n,t,i,s),nw(n,e,i)}}function zP(t,e,n){var i=gr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ew(t))tw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Vn(h,l)){var d=e.interleaved;d===null?(s.next=s,Jp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=D0(t,e,s,i),n!==null&&(s=Bt(),jn(n,t,i,s),nw(n,e,i))}}function ew(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function tw(t,e){hl=ih=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Fp(t,n)}}var rh={readContext:In,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},UP={readContext:In,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:S_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,G0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=Zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Zn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=FP.bind(null,Ge,t),[i.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:P_,useDebugValue:lm,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=P_(!1),e=t[0];return t=VP.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ge,s=Zn();if(We){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),wt===null)throw Error(Q(349));os&30||z0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,S_(B0.bind(null,i,o,t),[t]),i.flags|=2048,Ml(9,U0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Zn(),e=wt.identifierPrefix;if(We){var n=xi,i=wi;n=(i&~(1<<32-Mn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ol++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BP={readContext:In,useCallback:Q0,useContext:In,useEffect:am,useImperativeHandle:K0,useInsertionEffect:q0,useLayoutEffect:Z0,useMemo:Y0,useReducer:Fd,useRef:$0,useState:function(){return Fd(Dl)},useDebugValue:lm,useDeferredValue:function(t){var e=Pn();return X0(e,ht.memoizedState,t)},useTransition:function(){var t=Fd(Dl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:F0,useId:J0,unstable_isNewReconciler:!1},WP={readContext:In,useCallback:Q0,useContext:In,useEffect:am,useImperativeHandle:K0,useInsertionEffect:q0,useLayoutEffect:Z0,useMemo:Y0,useReducer:zd,useRef:$0,useState:function(){return zd(Dl)},useDebugValue:lm,useDeferredValue:function(t){var e=Pn();return ht===null?e.memoizedState=t:X0(e,ht.memoizedState,t)},useTransition:function(){var t=zd(Dl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:F0,useId:J0,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mh={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=gr(t),o=Pi(i,s);o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,s),e!==null&&(jn(e,t,s,i),Pc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bt(),s=gr(t),o=Pi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,s),e!==null&&(jn(e,t,s,i),Pc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),i=gr(t),s=Pi(n,i);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,i),e!==null&&(jn(e,t,i,n),Pc(e,t,i))}};function C_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!kl(n,i)||!kl(s,o):!0}function iw(t,e,n){var i=!1,s=Ir,o=e.contextType;return typeof o=="object"&&o!==null?o=In(o):(s=Qt(e)?rs:Dt.current,i=e.contextTypes,o=(i=i!=null)?Ao(t,s):Ir),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function k_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Mh.enqueueReplaceState(e,e.state,null)}function Ff(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},em(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=In(o):(o=Qt(e)?rs:Dt.current,s.context=Ao(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Vf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mh.enqueueReplaceState(s,s.state,null),th(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e){try{var n="",i=e;do n+=_I(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Ud(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HP=typeof WeakMap=="function"?WeakMap:Map;function rw(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){oh||(oh=!0,Qf=i),zf(t,e)},n}function sw(t,e,n){n=Pi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){zf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){zf(t,e),typeof i!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function A_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new HP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=rS.bind(null,t,e,n),e.then(t,t))}function b_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var $P=Mi.ReactCurrentOwner,Gt=!1;function Ut(t,e,n,i){e.child=t===null?O0(e,null,n,i):No(e,t.child,n,i)}function R_(t,e,n,i,s){n=n.render;var o=e.ref;return Eo(e,s),i=sm(t,e,n,i,o,s),n=om(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ni(t,e,s)):(We&&n&&Zp(e),e.flags|=1,Ut(t,e,i,s),e.child)}function L_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!gm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ow(t,e,o,i,s)):(t=Nc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:kl,n(l,i)&&t.ref===e.ref)return Ni(t,e,s)}return e.flags|=1,t=_r(o,i),t.ref=e.ref,t.return=e,e.child=t}function ow(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(kl(o,i)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Ni(t,e,s)}return Uf(t,e,n,i,s)}function aw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(go,nn),nn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(go,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ve(go,nn),nn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ve(go,nn),nn|=i;return Ut(t,e,s,n),e.child}function lw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uf(t,e,n,i,s){var o=Qt(n)?rs:Dt.current;return o=Ao(e,o),Eo(e,s),n=sm(t,e,n,i,o,s),i=om(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ni(t,e,s)):(We&&i&&Zp(e),e.flags|=1,Ut(t,e,n,s),e.child)}function O_(t,e,n,i,s){if(Qt(n)){var o=!0;Qc(e)}else o=!1;if(Eo(e,s),e.stateNode===null)kc(t,e),iw(e,n,i),Ff(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,g=n.contextType;typeof g=="object"&&g!==null?g=In(g):(g=Qt(n)?rs:Dt.current,g=Ao(e,g));var y=n.getDerivedStateFromProps,x=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==g)&&k_(e,l,i,g),Ji=!1;var I=e.memoizedState;l.state=I,th(e,i,l,s),d=e.memoizedState,h!==i||I!==d||Kt.current||Ji?(typeof y=="function"&&(Vf(e,n,y,i),d=e.memoizedState),(h=Ji||C_(e,n,h,i,I,d,g))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=g,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,M0(t,e),h=e.memoizedProps,g=e.type===e.elementType?h:Rn(e.type,h),l.props=g,x=e.pendingProps,I=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=In(d):(d=Qt(n)?rs:Dt.current,d=Ao(e,d));var O=n.getDerivedStateFromProps;(y=typeof O=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==x||I!==d)&&k_(e,l,i,d),Ji=!1,I=e.memoizedState,l.state=I,th(e,i,l,s);var M=e.memoizedState;h!==x||I!==M||Kt.current||Ji?(typeof O=="function"&&(Vf(e,n,O,i),M=e.memoizedState),(g=Ji||C_(e,n,g,i,I,M,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,M,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,M,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),l.props=i,l.state=M,l.context=d,i=g):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return Bf(t,e,n,i,o,s)}function Bf(t,e,n,i,s,o){lw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&y_(e,n,!1),Ni(t,e,o);i=e.stateNode,$P.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=No(e,t.child,null,o),e.child=No(e,null,h,o)):Ut(t,e,h,o),e.memoizedState=i.state,s&&y_(e,n,!0),e.child}function uw(t){var e=t.stateNode;e.pendingContext?v_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&v_(t,e.context,!1),tm(t,e.containerInfo)}function D_(t,e,n,i,s){return bo(),Kp(s),e.flags|=256,Ut(t,e,n,i),e.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function Hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function cw(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve(Ze,s&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Fh(l,i,0,null),t=ts(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hf(n),e.memoizedState=Wf,t):um(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return qP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=_r(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=_r(h,o):(o=ts(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Hf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Wf,i}return o=t.child,t=o.sibling,i=_r(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function um(t,e){return e=Fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hc(t,e,n,i){return i!==null&&Kp(i),No(e,t.child,null,n),t=um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Ud(Error(Q(422))),hc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Fh({mode:"visible",children:i.children},s,0,null),o=ts(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&No(e,t.child,null,l),e.child.memoizedState=Hf(l),e.memoizedState=Wf,o);if(!(e.mode&1))return hc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=Ud(o,i,void 0),hc(t,e,l,i)}if(h=(l&t.childLanes)!==0,Gt||h){if(i=wt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,bi(t,s),jn(i,t,s,-1))}return mm(),i=Ud(Error(Q(421))),hc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sS.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,rn=fr(s.nextSibling),sn=e,We=!0,On=null,t!==null&&(vn[yn++]=wi,vn[yn++]=xi,vn[yn++]=ss,wi=t.id,xi=t.overflow,ss=e),e=um(e,i.children),e.flags|=4096,e)}function M_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jf(t.return,e,n)}function Bd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function hw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ut(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M_(t,n,e);else if(t.tag===19)M_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ve(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bd(e,!0,n,null,o);break;case"together":Bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZP(t,e,n){switch(e.tag){case 3:uw(e),bo();break;case 5:j0(e);break;case 1:Qt(e.type)&&Qc(e);break;case 4:tm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ve(Jc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ve(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?cw(t,e,n):(Ve(Ze,Ze.current&1),t=Ni(t,e,n),t!==null?t.sibling:null);Ve(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return hw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,aw(t,e,n)}return Ni(t,e,n)}var dw,$f,fw,pw;dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$f=function(){};fw=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Xr(Yn.current);var o=null;switch(n){case"input":s=ff(t,s),i=ff(t,i),o=[];break;case"select":s=Ke({},s,{value:void 0}),i=Ke({},i,{value:void 0}),o=[];break;case"textarea":s=gf(t,s),i=gf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Gc)}vf(n,i);var l;n=null;for(g in s)if(!i.hasOwnProperty(g)&&s.hasOwnProperty(g)&&s[g]!=null)if(g==="style"){var h=s[g];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(xl.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in i){var d=i[g];if(h=s!=null?s[g]:void 0,i.hasOwnProperty(g)&&d!==h&&(d!=null||h!=null))if(g==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(g,n)),n=d;else g==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(g,d)):g==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(g,""+d):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(xl.hasOwnProperty(g)?(d!=null&&g==="onScroll"&&Fe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(g,d))}n&&(o=o||[]).push("style",n);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};pw=function(t,e,n,i){n!==i&&(e.flags|=4)};function Za(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function GP(t,e,n){var i=e.pendingProps;switch(Gp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Qt(e.type)&&Kc(),bt(e),null;case 3:return i=e.stateNode,Ro(),ze(Kt),ze(Dt),im(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Jf(On),On=null))),$f(t,e),bt(e),null;case 5:nm(e);var s=Xr(Ll.current);if(n=e.type,t!==null&&e.stateNode!=null)fw(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return bt(e),null}if(t=Xr(Yn.current),uc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Gn]=e,i[Nl]=o,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(s=0;s<el.length;s++)Fe(el[s],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":$g(i,o),Fe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",i);break;case"textarea":Zg(i,o),Fe("invalid",i)}vf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&lc(i.textContent,h,t),s=["children",""+h]):xl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Fe("scroll",i)}switch(n){case"input":ec(i),qg(i,o,!0);break;case"textarea":ec(i),Gg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Gc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=By(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Gn]=e,t[Nl]=i,dw(t,e,!1,!1),e.stateNode=t;e:{switch(l=yf(n,i),n){case"dialog":Fe("cancel",t),Fe("close",t),s=i;break;case"iframe":case"object":case"embed":Fe("load",t),s=i;break;case"video":case"audio":for(s=0;s<el.length;s++)Fe(el[s],t);s=i;break;case"source":Fe("error",t),s=i;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=i;break;case"details":Fe("toggle",t),s=i;break;case"input":$g(t,i),s=ff(t,i),Fe("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ke({},i,{value:void 0}),Fe("invalid",t);break;case"textarea":Zg(t,i),s=gf(t,i),Fe("invalid",t);break;default:s=i}vf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?$y(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Wy(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&El(t,d):typeof d=="number"&&El(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Fe("scroll",t):d!=null&&Lp(t,o,d,l))}switch(n){case"input":ec(t),qg(t,i,!1);break;case"textarea":ec(t),Gg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Tr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?vo(t,!!i.multiple,o,!1):i.defaultValue!=null&&vo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Gc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)pw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Xr(Ll.current),Xr(Yn.current),uc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gn]=e,(o=i.nodeValue!==n)&&(t=sn,t!==null))switch(t.tag){case 3:lc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gn]=e,e.stateNode=i}return bt(e),null;case 13:if(ze(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&rn!==null&&e.mode&1&&!(e.flags&128))R0(),bo(),e.flags|=98560,o=!1;else if(o=uc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Gn]=e}else bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),o=!1}else On!==null&&(Jf(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?ft===0&&(ft=3):mm())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Ro(),$f(t,e),t===null&&Al(e.stateNode.containerInfo),bt(e),null;case 10:return Xp(e.type._context),bt(e),null;case 17:return Qt(e.type)&&Kc(),bt(e),null;case 19:if(ze(Ze),o=e.memoizedState,o===null)return bt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Za(o,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=nh(t),l!==null){for(e.flags|=128,Za(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>Oo&&(e.flags|=128,i=!0,Za(o,!1),e.lanes=4194304)}else{if(!i)if(t=nh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Za(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!We)return bt(e),null}else 2*nt()-o.renderingStartTime>Oo&&n!==1073741824&&(e.flags|=128,i=!0,Za(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ze.current,Ve(Ze,i?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return pm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?nn&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function KP(t,e){switch(Gp(e),e.tag){case 1:return Qt(e.type)&&Kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),ze(Kt),ze(Dt),im(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nm(e),null;case 13:if(ze(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(Ze),null;case 4:return Ro(),null;case 10:return Xp(e.type._context),null;case 22:case 23:return pm(),null;case 24:return null;default:return null}}var dc=!1,Lt=!1,QP=typeof WeakSet=="function"?WeakSet:Set,ne=null;function mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function qf(t,e,n){try{n()}catch(i){Je(t,e,i)}}var j_=!1;function YP(t,e){if(Af=$c,t=y0(),qp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,g=0,y=0,x=t,I=null;t:for(;;){for(var O;x!==n||s!==0&&x.nodeType!==3||(h=l+s),x!==o||i!==0&&x.nodeType!==3||(d=l+i),x.nodeType===3&&(l+=x.nodeValue.length),(O=x.firstChild)!==null;)I=x,x=O;for(;;){if(x===t)break t;if(I===n&&++g===s&&(h=l),I===o&&++y===i&&(d=l),(O=x.nextSibling)!==null)break;x=I,I=x.parentNode}x=O}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(bf={focusedElem:t,selectionRange:n},$c=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var j=M.memoizedProps,U=M.memoizedState,A=e.stateNode,P=A.getSnapshotBeforeUpdate(e.elementType===e.type?j:Rn(e.type,j),U);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(H){Je(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return M=j_,j_=!1,M}function dl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&qf(e,n,o)}s=s.next}while(s!==i)}}function jh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Zf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mw(t){var e=t.alternate;e!==null&&(t.alternate=null,mw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gn],delete e[Nl],delete e[Lf],delete e[LP],delete e[OP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gw(t){return t.tag===5||t.tag===3||t.tag===4}function V_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gc));else if(i!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}function Kf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}var Et=null,Ln=!1;function Qi(t,e,n){for(n=n.child;n!==null;)_w(t,e,n),n=n.sibling}function _w(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Ah,n)}catch{}switch(n.tag){case 5:Lt||mo(n,e);case 6:var i=Et,s=Ln;Et=null,Qi(t,e,n),Et=i,Ln=s,Et!==null&&(Ln?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Ln?(t=Et,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),Sl(t)):Dd(Et,n.stateNode));break;case 4:i=Et,s=Ln,Et=n.stateNode.containerInfo,Ln=!0,Qi(t,e,n),Et=i,Ln=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&qf(n,e,l),s=s.next}while(s!==i)}Qi(t,e,n);break;case 1:if(!Lt&&(mo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}Qi(t,e,n);break;case 21:Qi(t,e,n);break;case 22:n.mode&1?(Lt=(i=Lt)||n.memoizedState!==null,Qi(t,e,n),Lt=i):Qi(t,e,n);break;default:Qi(t,e,n)}}function F_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QP),e.forEach(function(i){var s=oS.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Et=h.stateNode,Ln=!1;break e;case 3:Et=h.stateNode.containerInfo,Ln=!0;break e;case 4:Et=h.stateNode.containerInfo,Ln=!0;break e}h=h.return}if(Et===null)throw Error(Q(160));_w(o,l,s),Et=null,Ln=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(g){Je(s,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vw(e,t),e=e.sibling}function vw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),qn(t),i&4){try{dl(3,t,t.return),jh(3,t)}catch(j){Je(t,t.return,j)}try{dl(5,t,t.return)}catch(j){Je(t,t.return,j)}}break;case 1:Nn(e,t),qn(t),i&512&&n!==null&&mo(n,n.return);break;case 5:if(Nn(e,t),qn(t),i&512&&n!==null&&mo(n,n.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(j){Je(t,t.return,j)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&zy(s,o),yf(h,l);var g=yf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],x=d[l+1];y==="style"?$y(s,x):y==="dangerouslySetInnerHTML"?Wy(s,x):y==="children"?El(s,x):Lp(s,y,x,g)}switch(h){case"input":pf(s,o);break;case"textarea":Uy(s,o);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var O=o.value;O!=null?vo(s,!!o.multiple,O,!1):I!==!!o.multiple&&(o.defaultValue!=null?vo(s,!!o.multiple,o.defaultValue,!0):vo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Nl]=o}catch(j){Je(t,t.return,j)}}break;case 6:if(Nn(e,t),qn(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(j){Je(t,t.return,j)}}break;case 3:if(Nn(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(e.containerInfo)}catch(j){Je(t,t.return,j)}break;case 4:Nn(e,t),qn(t);break;case 13:Nn(e,t),qn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(dm=nt())),i&4&&F_(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(g=Lt)||y,Nn(e,t),Lt=g):Nn(e,t),qn(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(ne=t,y=t.child;y!==null;){for(x=ne=y;ne!==null;){switch(I=ne,O=I.child,I.tag){case 0:case 11:case 14:case 15:dl(4,I,I.return);break;case 1:mo(I,I.return);var M=I.stateNode;if(typeof M.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(j){Je(i,n,j)}}break;case 5:mo(I,I.return);break;case 22:if(I.memoizedState!==null){U_(x);continue}}O!==null?(O.return=I,ne=O):U_(x)}y=y.sibling}e:for(y=null,x=t;;){if(x.tag===5){if(y===null){y=x;try{s=x.stateNode,g?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=x.stateNode,d=x.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Hy("display",l))}catch(j){Je(t,t.return,j)}}}else if(x.tag===6){if(y===null)try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(j){Je(t,t.return,j)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;y===x&&(y=null),x=x.return}y===x&&(y=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Nn(e,t),qn(t),i&4&&F_(t);break;case 21:break;default:Nn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gw(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(El(s,""),i.flags&=-33);var o=V_(t);Kf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=V_(t);Gf(t,h,l);break;default:throw Error(Q(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XP(t,e,n){ne=t,yw(t)}function yw(t,e,n){for(var i=(t.mode&1)!==0;ne!==null;){var s=ne,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||dc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Lt;h=dc;var g=Lt;if(dc=l,(Lt=d)&&!g)for(ne=s;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?B_(s):d!==null?(d.return=l,ne=d):B_(s);for(;o!==null;)ne=o,yw(o),o=o.sibling;ne=s,dc=h,Lt=g}z_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ne=o):z_(t)}}function z_(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||jh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Lt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&I_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var x=y.dehydrated;x!==null&&Sl(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Lt||e.flags&512&&Zf(e)}catch(I){Je(e,e.return,I)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function U_(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function B_(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jh(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{Zf(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{Zf(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){ne=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ne=h;break}ne=e.return}}var JP=Math.ceil,sh=Mi.ReactCurrentDispatcher,cm=Mi.ReactCurrentOwner,Tn=Mi.ReactCurrentBatchConfig,Ae=0,wt=null,at=null,Pt=0,nn=0,go=Ar(0),ft=0,jl=null,as=0,Vh=0,hm=0,fl=null,Zt=null,dm=0,Oo=1/0,vi=null,oh=!1,Qf=null,mr=null,fc=!1,ar=null,ah=0,pl=0,Yf=null,Ac=-1,bc=0;function Bt(){return Ae&6?nt():Ac!==-1?Ac:Ac=nt()}function gr(t){return t.mode&1?Ae&2&&Pt!==0?Pt&-Pt:MP.transition!==null?(bc===0&&(bc=i0()),bc):(t=Le,t!==0||(t=window.event,t=t===void 0?16:c0(t.type)),t):1}function jn(t,e,n,i){if(50<pl)throw pl=0,Yf=null,Error(Q(185));Yl(t,n,i),(!(Ae&2)||t!==wt)&&(t===wt&&(!(Ae&2)&&(Vh|=n),ft===4&&tr(t,Pt)),Yt(t,i),n===1&&Ae===0&&!(e.mode&1)&&(Oo=nt()+500,Oh&&br()))}function Yt(t,e){var n=t.callbackNode;MI(t,e);var i=Hc(t,t===wt?Pt:0);if(i===0)n!==null&&Yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Yg(n),e===1)t.tag===0?DP(W_.bind(null,t)):A0(W_.bind(null,t)),NP(function(){!(Ae&6)&&br()}),n=null;else{switch(r0(i)){case 1:n=Vp;break;case 4:n=t0;break;case 16:n=Wc;break;case 536870912:n=n0;break;default:n=Wc}n=Cw(n,ww.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ww(t,e){if(Ac=-1,bc=0,Ae&6)throw Error(Q(327));var n=t.callbackNode;if(To()&&t.callbackNode!==n)return null;var i=Hc(t,t===wt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=lh(t,i);else{e=i;var s=Ae;Ae|=2;var o=Ew();(wt!==t||Pt!==e)&&(vi=null,Oo=nt()+500,es(t,e));do try{nS();break}catch(h){xw(t,h)}while(!0);Yp(),sh.current=o,Ae=s,at!==null?e=0:(wt=null,Pt=0,e=ft)}if(e!==0){if(e===2&&(s=If(t),s!==0&&(i=s,e=Xf(t,s))),e===1)throw n=jl,es(t,0),tr(t,i),Yt(t,nt()),n;if(e===6)tr(t,i);else{if(s=t.current.alternate,!(i&30)&&!eS(s)&&(e=lh(t,i),e===2&&(o=If(t),o!==0&&(i=o,e=Xf(t,o))),e===1))throw n=jl,es(t,0),tr(t,i),Yt(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Gr(t,Zt,vi);break;case 3:if(tr(t,i),(i&130023424)===i&&(e=dm+500-nt(),10<e)){if(Hc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rf(Gr.bind(null,t,Zt,vi),e);break}Gr(t,Zt,vi);break;case 4:if(tr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Mn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*JP(i/1960))-i,10<i){t.timeoutHandle=Rf(Gr.bind(null,t,Zt,vi),i);break}Gr(t,Zt,vi);break;case 5:Gr(t,Zt,vi);break;default:throw Error(Q(329))}}}return Yt(t,nt()),t.callbackNode===n?ww.bind(null,t):null}function Xf(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=lh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Jf(e)),t}function Jf(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function eS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Vn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~hm,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),i=1<<n;t[n]=-1,e&=~i}}function W_(t){if(Ae&6)throw Error(Q(327));To();var e=Hc(t,0);if(!(e&1))return Yt(t,nt()),null;var n=lh(t,e);if(t.tag!==0&&n===2){var i=If(t);i!==0&&(e=i,n=Xf(t,i))}if(n===1)throw n=jl,es(t,0),tr(t,e),Yt(t,nt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gr(t,Zt,vi),Yt(t,nt()),null}function fm(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Oo=nt()+500,Oh&&br())}}function ls(t){ar!==null&&ar.tag===0&&!(Ae&6)&&To();var e=Ae;Ae|=1;var n=Tn.transition,i=Le;try{if(Tn.transition=null,Le=1,t)return t()}finally{Le=i,Tn.transition=n,Ae=e,!(Ae&6)&&br()}}function pm(){nn=go.current,ze(go)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bP(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(Gp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Kc();break;case 3:Ro(),ze(Kt),ze(Dt),im();break;case 5:nm(i);break;case 4:Ro();break;case 13:ze(Ze);break;case 19:ze(Ze);break;case 10:Xp(i.type._context);break;case 22:case 23:pm()}n=n.return}if(wt=t,at=t=_r(t.current,null),Pt=nn=e,ft=0,jl=null,hm=Vh=as=0,Zt=fl=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Yr=null}return t}function xw(t,e){do{var n=at;try{if(Yp(),Sc.current=rh,ih){for(var i=Ge.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ih=!1}if(os=0,yt=ht=Ge=null,hl=!1,Ol=0,cm.current=null,n===null||n.return===null){ft=1,jl=e,at=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=Pt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d,y=h,x=y.tag;if(!(y.mode&1)&&(x===0||x===11||x===15)){var I=y.alternate;I?(y.updateQueue=I.updateQueue,y.memoizedState=I.memoizedState,y.lanes=I.lanes):(y.updateQueue=null,y.memoizedState=null)}var O=b_(l);if(O!==null){O.flags&=-257,N_(O,l,h,o,e),O.mode&1&&A_(o,g,e),e=O,d=g;var M=e.updateQueue;if(M===null){var j=new Set;j.add(d),e.updateQueue=j}else M.add(d);break e}else{if(!(e&1)){A_(o,g,e),mm();break e}d=Error(Q(426))}}else if(We&&h.mode&1){var U=b_(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),N_(U,l,h,o,e),Kp(Lo(d,h));break e}}o=d=Lo(d,h),ft!==4&&(ft=2),fl===null?fl=[o]:fl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=rw(o,d,e);T_(o,A);break e;case 1:h=d;var P=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(mr===null||!mr.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=sw(o,h,e);T_(o,H);break e}}o=o.return}while(o!==null)}Iw(n)}catch(Y){e=Y,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Ew(){var t=sh.current;return sh.current=rh,t===null?rh:t}function mm(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(as&268435455)&&!(Vh&268435455)||tr(wt,Pt)}function lh(t,e){var n=Ae;Ae|=2;var i=Ew();(wt!==t||Pt!==e)&&(vi=null,es(t,e));do try{tS();break}catch(s){xw(t,s)}while(!0);if(Yp(),Ae=n,sh.current=i,at!==null)throw Error(Q(261));return wt=null,Pt=0,ft}function tS(){for(;at!==null;)Tw(at)}function nS(){for(;at!==null&&!CI();)Tw(at)}function Tw(t){var e=Sw(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?Iw(t):at=e,cm.current=null}function Iw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KP(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=GP(n,e,nn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function Gr(t,e,n){var i=Le,s=Tn.transition;try{Tn.transition=null,Le=1,iS(t,e,n,i)}finally{Tn.transition=s,Le=i}return null}function iS(t,e,n,i){do To();while(ar!==null);if(Ae&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(jI(t,o),t===wt&&(at=wt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,Cw(Wc,function(){return To(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tn.transition,Tn.transition=null;var l=Le;Le=1;var h=Ae;Ae|=4,cm.current=null,YP(t,n),vw(n,t),TP(bf),$c=!!Af,bf=Af=null,t.current=n,XP(n),kI(),Ae=h,Le=l,Tn.transition=o}else t.current=n;if(fc&&(fc=!1,ar=t,ah=s),o=t.pendingLanes,o===0&&(mr=null),NI(n.stateNode),Yt(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(oh)throw oh=!1,t=Qf,Qf=null,t;return ah&1&&t.tag!==0&&To(),o=t.pendingLanes,o&1?t===Yf?pl++:(pl=0,Yf=t):pl=0,br(),null}function To(){if(ar!==null){var t=r0(ah),e=Tn.transition,n=Le;try{if(Tn.transition=null,Le=16>t?16:t,ar===null)var i=!1;else{if(t=ar,ar=null,ah=0,Ae&6)throw Error(Q(331));var s=Ae;for(Ae|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var g=h[d];for(ne=g;ne!==null;){var y=ne;switch(y.tag){case 0:case 11:case 15:dl(8,y,o)}var x=y.child;if(x!==null)x.return=y,ne=x;else for(;ne!==null;){y=ne;var I=y.sibling,O=y.return;if(mw(y),y===g){ne=null;break}if(I!==null){I.return=O,ne=I;break}ne=O}}}var M=o.alternate;if(M!==null){var j=M.child;if(j!==null){M.child=null;do{var U=j.sibling;j.sibling=null,j=U}while(j!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:dl(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,ne=A;break e}ne=o.return}}var P=t.current;for(ne=P;ne!==null;){l=ne;var R=l.child;if(l.subtreeFlags&2064&&R!==null)R.return=l,ne=R;else e:for(l=P;ne!==null;){if(h=ne,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:jh(9,h)}}catch(Y){Je(h,h.return,Y)}if(h===l){ne=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ne=H;break e}ne=h.return}}if(Ae=s,br(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Ah,t)}catch{}i=!0}return i}finally{Le=n,Tn.transition=e}}return!1}function H_(t,e,n){e=Lo(n,e),e=rw(t,e,1),t=pr(t,e,1),e=Bt(),t!==null&&(Yl(t,1,e),Yt(t,e))}function Je(t,e,n){if(t.tag===3)H_(t,t,n);else for(;e!==null;){if(e.tag===3){H_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(mr===null||!mr.has(i))){t=Lo(n,t),t=sw(e,t,1),e=pr(e,t,1),t=Bt(),e!==null&&(Yl(e,1,t),Yt(e,t));break}}e=e.return}}function rS(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Pt&n)===n&&(ft===4||ft===3&&(Pt&130023424)===Pt&&500>nt()-dm?es(t,0):hm|=n),Yt(t,e)}function Pw(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=Bt();t=bi(t,e),t!==null&&(Yl(t,e,n),Yt(t,n))}function sS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pw(t,n)}function oS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),Pw(t,n)}var Sw;Sw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,ZP(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,We&&e.flags&1048576&&b0(e,Xc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kc(t,e),t=e.pendingProps;var s=Ao(e,Dt.current);Eo(e,n),s=sm(null,e,i,t,s,n);var o=om();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(i)?(o=!0,Qc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,em(e),s.updater=Mh,e.stateNode=s,s._reactInternals=e,Ff(e,i,t,n),e=Bf(null,e,i,!0,o,n)):(e.tag=0,We&&o&&Zp(e),Ut(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=lS(i),t=Rn(i,t),s){case 0:e=Uf(null,e,i,t,n);break e;case 1:e=O_(null,e,i,t,n);break e;case 11:e=R_(null,e,i,t,n);break e;case 14:e=L_(null,e,i,Rn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),Uf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),O_(t,e,i,s,n);case 3:e:{if(uw(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,s=o.element,M0(t,e),th(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Lo(Error(Q(423)),e),e=D_(t,e,i,n,s);break e}else if(i!==s){s=Lo(Error(Q(424)),e),e=D_(t,e,i,n,s);break e}else for(rn=fr(e.stateNode.containerInfo.firstChild),sn=e,We=!0,On=null,n=O0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bo(),i===s){e=Ni(t,e,n);break e}Ut(t,e,i,n)}e=e.child}return e;case 5:return j0(e),t===null&&Mf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Nf(i,s)?l=null:o!==null&&Nf(i,o)&&(e.flags|=32),lw(t,e),Ut(t,e,l,n),e.child;case 6:return t===null&&Mf(e),null;case 13:return cw(t,e,n);case 4:return tm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=No(e,null,i,n):Ut(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),R_(t,e,i,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Ve(Jc,i._currentValue),i._currentValue=l,o!==null)if(Vn(o.value,l)){if(o.children===s.children&&!Kt.current){e=Ni(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Pi(-1,n&-n),d.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?d.next=d:(d.next=y.next,y.next=d),g.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),jf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),jf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Eo(e,n),s=In(s),i=i(s),e.flags|=1,Ut(t,e,i,n),e.child;case 14:return i=e.type,s=Rn(i,e.pendingProps),s=Rn(i.type,s),L_(t,e,i,s,n);case 15:return ow(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),kc(t,e),e.tag=1,Qt(i)?(t=!0,Qc(e)):t=!1,Eo(e,n),iw(e,i,s),Ff(e,i,s,n),Bf(null,e,i,!0,t,n);case 19:return hw(t,e,n);case 22:return aw(t,e,n)}throw Error(Q(156,e.tag))};function Cw(t,e){return e0(t,e)}function aS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,i){return new aS(t,e,n,i)}function gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lS(t){if(typeof t=="function")return gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dp)return 11;if(t===Mp)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")gm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case so:return ts(n.children,s,o,e);case Op:l=8,s|=8;break;case uf:return t=xn(12,n,e,s|2),t.elementType=uf,t.lanes=o,t;case cf:return t=xn(13,n,e,s),t.elementType=cf,t.lanes=o,t;case hf:return t=xn(19,n,e,s),t.elementType=hf,t.lanes=o,t;case jy:return Fh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dy:l=10;break e;case My:l=9;break e;case Dp:l=11;break e;case Mp:l=14;break e;case Xi:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=xn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function ts(t,e,n,i){return t=xn(7,t,i,e),t.lanes=n,t}function Fh(t,e,n,i){return t=xn(22,t,i,e),t.elementType=jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Wd(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Hd(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uS(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _m(t,e,n,i,s,o,l,h,d){return t=new uS(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},em(o),t}function cS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function kw(t){if(!t)return Ir;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Qt(n))return k0(t,n,e)}return e}function Aw(t,e,n,i,s,o,l,h,d){return t=_m(n,i,!0,t,s,o,l,h,d),t.context=kw(null),n=t.current,i=Bt(),s=gr(n),o=Pi(i,s),o.callback=e??null,pr(n,o,s),t.current.lanes=s,Yl(t,s,i),Yt(t,i),t}function zh(t,e,n,i){var s=e.current,o=Bt(),l=gr(s);return n=kw(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=pr(s,e,l),t!==null&&(jn(t,s,l,o),Pc(t,s,l)),l}function uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vm(t,e){$_(t,e),(t=t.alternate)&&$_(t,e)}function hS(){return null}var bw=typeof reportError=="function"?reportError:function(t){console.error(t)};function ym(t){this._internalRoot=t}Uh.prototype.render=ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));zh(t,e,null,null)};Uh.prototype.unmount=ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){zh(null,t,null,null)}),e[Ai]=null}};function Uh(t){this._internalRoot=t}Uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=a0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&u0(t)}};function wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q_(){}function dS(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var g=uh(l);o.call(g)}}var l=Aw(e,i,t,0,null,!1,!1,"",q_);return t._reactRootContainer=l,t[Ai]=l.current,Al(t.nodeType===8?t.parentNode:t),ls(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var g=uh(d);h.call(g)}}var d=_m(t,0,!1,null,null,!1,!1,"",q_);return t._reactRootContainer=d,t[Ai]=d.current,Al(t.nodeType===8?t.parentNode:t),ls(function(){zh(e,d,n,i)}),d}function Wh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=uh(l);h.call(d)}}zh(e,l,t,s)}else l=dS(n,e,t,s,i);return uh(l)}s0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ja(e.pendingLanes);n!==0&&(Fp(e,n|1),Yt(e,nt()),!(Ae&6)&&(Oo=nt()+500,br()))}break;case 13:ls(function(){var i=bi(t,1);if(i!==null){var s=Bt();jn(i,t,1,s)}}),vm(t,1)}};zp=function(t){if(t.tag===13){var e=bi(t,134217728);if(e!==null){var n=Bt();jn(e,t,134217728,n)}vm(t,134217728)}};o0=function(t){if(t.tag===13){var e=gr(t),n=bi(t,e);if(n!==null){var i=Bt();jn(n,t,e,i)}vm(t,e)}};a0=function(){return Le};l0=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};xf=function(t,e,n){switch(e){case"input":if(pf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Lh(i);if(!s)throw Error(Q(90));Fy(i),pf(i,s)}}}break;case"textarea":Uy(t,n);break;case"select":e=n.value,e!=null&&vo(t,!!n.multiple,e,!1)}};Gy=fm;Ky=ls;var fS={usingClientEntryPoint:!1,Events:[Jl,uo,Lh,qy,Zy,fm]},Ga={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pS={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xy(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||hS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Ah=pc.inject(pS),Qn=pc}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fS;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wm(e))throw Error(Q(200));return cS(t,e,null,n)};ln.createRoot=function(t,e){if(!wm(t))throw Error(Q(299));var n=!1,i="",s=bw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_m(t,1,!1,null,null,n,!1,i,s),t[Ai]=e.current,Al(t.nodeType===8?t.parentNode:t),new ym(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Xy(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return ls(t)};ln.hydrate=function(t,e,n){if(!Bh(e))throw Error(Q(200));return Wh(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!wm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=bw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Aw(e,null,t,1,n??null,s,!1,o,l),t[Ai]=e.current,Al(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Uh(e)};ln.render=function(t,e,n){if(!Bh(e))throw Error(Q(200));return Wh(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Bh(t))throw Error(Q(40));return t._reactRootContainer?(ls(function(){Wh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};ln.unstable_batchedUpdates=fm;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Bh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Wh(t,e,n,!1,i)};ln.version="18.3.1-next-f1338f8080-20240426";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),Ny.exports=ln;var Rw=Ny.exports,Z_=Rw;af.createRoot=Z_.createRoot,af.hydrateRoot=Z_.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vl.apply(this,arguments)}var lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lr||(lr={}));const G_="popstate";function mS(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return ep("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Lw(s)}return _S(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gS(){return Math.random().toString(36).substr(2,8)}function K_(t,e){return{usr:t.state,key:t.key,idx:e}}function ep(t,e,n,i){return n===void 0&&(n=null),Vl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:n,key:e&&e.key||i||gS()})}function Lw(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function _S(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=lr.Pop,d=null,g=y();g==null&&(g=0,l.replaceState(Vl({},l.state,{idx:g}),""));function y(){return(l.state||{idx:null}).idx}function x(){h=lr.Pop;let U=y(),A=U==null?null:U-g;g=U,d&&d({action:h,location:j.location,delta:A})}function I(U,A){h=lr.Push;let P=ep(j.location,U,A);g=y()+1;let R=K_(P,g),H=j.createHref(P);try{l.pushState(R,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(H)}o&&d&&d({action:h,location:j.location,delta:1})}function O(U,A){h=lr.Replace;let P=ep(j.location,U,A);g=y();let R=K_(P,g),H=j.createHref(P);l.replaceState(R,"",H),o&&d&&d({action:h,location:j.location,delta:0})}function M(U){let A=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof U=="string"?U:Lw(U);return P=P.replace(/ $/,"%20"),lt(A,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,A)}let j={get action(){return h},get location(){return t(s,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(G_,x),d=U,()=>{s.removeEventListener(G_,x),d=null}},createHref(U){return e(s,U)},createURL:M,encodeLocation(U){let A=M(U);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:I,replace:O,go(U){return l.go(U)}};return j}var Q_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Q_||(Q_={}));function vS(t,e,n){return n===void 0&&(n="/"),yS(t,e,n)}function yS(t,e,n,i){let s=typeof e=="string"?Ko(e):e,o=Mw(s.pathname||"/",n);if(o==null)return null;let l=Ow(t);wS(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let g=RS(o);h=AS(l[d],g)}return h}function Ow(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(lt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let g=ns([i,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(lt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Ow(o.children,e,y,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:CS(g,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of Dw(o.path))s(o,l,d)}),e}function Dw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=Dw(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function wS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const xS=/^:[\w-]+$/,ES=3,TS=2,IS=1,PS=10,SS=-2,Y_=t=>t==="*";function CS(t,e){let n=t.split("/"),i=n.length;return n.some(Y_)&&(i+=SS),e&&(i+=TS),n.filter(s=>!Y_(s)).reduce((s,o)=>s+(xS.test(o)?ES:o===""?IS:PS),i)}function kS(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function AS(t,e,n){let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],g=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",x=bS({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},y),I=d.route;if(!x)return null;Object.assign(s,x.params),l.push({params:s,pathname:ns([o,x.pathname]),pathnameBase:jS(ns([o,x.pathnameBase])),route:I}),x.pathnameBase!=="/"&&(o=ns([o,x.pathnameBase]))}return l}function bS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=NS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((g,y,x)=>{let{paramName:I,isOptional:O}=y;if(I==="*"){let j=h[x]||"";l=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const M=h[x];return O&&!M?g[I]=void 0:g[I]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:l,pattern:t}}function NS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function RS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const LS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OS=t=>LS.test(t);function DS(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Ko(t):t,o;if(n)if(OS(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),xm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=X_(n.substring(1),"/"):o=X_(n,e)}else o=e;return{pathname:o,search:VS(i),hash:FS(s)}}function X_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $d(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jw(t,e){let n=MS(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Vw(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Ko(t):(s=Vl({},t),lt(!s.pathname||!s.pathname.includes("?"),$d("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),$d("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),$d("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let x=e.length-1;if(!i&&l.startsWith("..")){let I=l.split("/");for(;I[0]==="..";)I.shift(),x-=1;s.pathname=I.join("/")}h=x>=0?e[x]:"/"}let d=DS(s,h),g=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(g||y)&&(d.pathname+="/"),d}const ns=t=>t.join("/").replace(/\/\/+/g,"/"),jS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fw=["post","put","patch","delete"];new Set(Fw);const US=["get",...Fw];new Set(US);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fl.apply(this,arguments)}const Em=$.createContext(null),BS=$.createContext(null),tu=$.createContext(null),Hh=$.createContext(null),vs=$.createContext({outlet:null,matches:[],isDataRoute:!1}),zw=$.createContext(null);function nu(){return $.useContext(Hh)!=null}function $h(){return nu()||lt(!1),$.useContext(Hh).location}function Uw(t){$.useContext(tu).static||$.useLayoutEffect(t)}function zn(){let{isDataRoute:t}=$.useContext(vs);return t?tC():WS()}function WS(){nu()||lt(!1);let t=$.useContext(Em),{basename:e,future:n,navigator:i}=$.useContext(tu),{matches:s}=$.useContext(vs),{pathname:o}=$h(),l=JSON.stringify(jw(s,n.v7_relativeSplatPath)),h=$.useRef(!1);return Uw(()=>{h.current=!0}),$.useCallback(function(g,y){if(y===void 0&&(y={}),!h.current)return;if(typeof g=="number"){i.go(g);return}let x=Vw(g,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ns([e,x.pathname])),(y.replace?i.replace:i.push)(x,y.state,y)},[e,i,l,o,t])}function HS(t,e){return $S(t,e)}function $S(t,e,n,i){nu()||lt(!1);let{navigator:s}=$.useContext(tu),{matches:o}=$.useContext(vs),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let g=$h(),y;if(e){var x;let U=typeof e=="string"?Ko(e):e;d==="/"||(x=U.pathname)!=null&&x.startsWith(d)||lt(!1),y=U}else y=g;let I=y.pathname||"/",O=I;if(d!=="/"){let U=d.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(U.length).join("/")}let M=vS(t,{pathname:O}),j=QS(M&&M.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:ns([d,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:ns([d,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&j?$.createElement(Hh.Provider,{value:{location:Fl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:lr.Pop}},j):j}function qS(){let t=eC(),e=zS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:s},n):null,null)}const ZS=$.createElement(qS,null);class GS extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(vs.Provider,{value:this.props.routeContext},$.createElement(zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KS(t){let{routeContext:e,match:n,children:i}=t,s=$.useContext(Em);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(vs.Provider,{value:e},i)}function QS(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=l.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);y>=0||lt(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:I,errors:O}=n,M=x.route.loader&&I[x.route.id]===void 0&&(!O||O[x.route.id]===void 0);if(x.route.lazy||M){d=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,x,I)=>{let O,M=!1,j=null,U=null;n&&(O=h&&x.route.id?h[x.route.id]:void 0,j=x.route.errorElement||ZS,d&&(g<0&&I===0?(nC("route-fallback"),M=!0,U=null):g===I&&(M=!0,U=x.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,I+1)),P=()=>{let R;return O?R=j:M?R=U:x.route.Component?R=$.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=y,$.createElement(KS,{match:x,routeContext:{outlet:y,matches:A,isDataRoute:n!=null},children:R})};return n&&(x.route.ErrorBoundary||x.route.errorElement||I===0)?$.createElement(GS,{location:n.location,revalidation:n.revalidation,component:j,error:O,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):P()},null)}var Bw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bw||{}),Ww=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ww||{});function YS(t){let e=$.useContext(Em);return e||lt(!1),e}function XS(t){let e=$.useContext(BS);return e||lt(!1),e}function JS(t){let e=$.useContext(vs);return e||lt(!1),e}function Hw(t){let e=JS(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function eC(){var t;let e=$.useContext(zw),n=XS(),i=Hw();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function tC(){let{router:t}=YS(Bw.UseNavigateStable),e=Hw(Ww.UseNavigateStable),n=$.useRef(!1);return Uw(()=>{n.current=!0}),$.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fl({fromRouteId:e},o)))},[t,e])}const J_={};function nC(t,e,n){J_[t]||(J_[t]=!0)}function iC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rC(t){let{to:e,replace:n,state:i,relative:s}=t;nu()||lt(!1);let{future:o,static:l}=$.useContext(tu),{matches:h}=$.useContext(vs),{pathname:d}=$h(),g=zn(),y=Vw(e,jw(h,o.v7_relativeSplatPath),d,s==="path"),x=JSON.stringify(y);return $.useEffect(()=>g(JSON.parse(x),{replace:n,state:i,relative:s}),[g,x,s,n,i]),null}function zt(t){lt(!1)}function sC(t){let{basename:e="/",children:n=null,location:i,navigationType:s=lr.Pop,navigator:o,static:l=!1,future:h}=t;nu()&&lt(!1);let d=e.replace(/^\/*/,"/"),g=$.useMemo(()=>({basename:d,navigator:o,static:l,future:Fl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=Ko(i));let{pathname:y="/",search:x="",hash:I="",state:O=null,key:M="default"}=i,j=$.useMemo(()=>{let U=Mw(y,d);return U==null?null:{location:{pathname:U,search:x,hash:I,state:O,key:M},navigationType:s}},[d,y,x,I,O,M,s]);return j==null?null:$.createElement(tu.Provider,{value:g},$.createElement(Hh.Provider,{children:n,value:j}))}function oC(t){let{children:e,location:n}=t;return HS(tp(e),n)}new Promise(()=>{});function tp(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(i,s)=>{if(!$.isValidElement(i))return;let o=[...e,s];if(i.type===$.Fragment){n.push.apply(n,tp(i.props.children,o));return}i.type!==zt&&lt(!1),!i.props.index||!i.props.children||lt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=tp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const aC="6";try{window.__reactRouterVersion=aC}catch{}const lC="startTransition",ev=rI[lC];function uC(t){let{basename:e,children:n,future:i,window:s}=t,o=$.useRef();o.current==null&&(o.current=mS({window:s,v5Compat:!0}));let l=o.current,[h,d]=$.useState({action:l.action,location:l.location}),{v7_startTransition:g}=i||{},y=$.useCallback(x=>{g&&ev?ev(()=>d(x)):d(x)},[d,g]);return $.useLayoutEffect(()=>l.listen(y),[l,y]),$.useEffect(()=>iC(i),[i]),$.createElement(sC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var tv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tv||(tv={}));var nv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nv||(nv={}));var iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},cC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,g=d?t[s+2]:0,y=o>>2,x=(o&3)<<4|h>>4;let I=(h&15)<<2|g>>6,O=g&63;d||(O=64,l||(I=64)),i.push(n[y],n[x],n[I],n[O])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($w(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const g=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||g==null||x==null)throw new hC;const I=o<<2|h>>4;if(i.push(I),g!==64){const O=h<<4&240|g>>2;if(i.push(O),x!==64){const M=g<<6&192|x;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dC=function(t){const e=$w(t);return qw.encodeByteArray(e,!0)},ch=function(t){return dC(t).replace(/\./g,"")},Zw=function(t){try{return qw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=()=>fC().__FIREBASE_DEFAULTS__,mC=()=>{if(typeof process>"u"||typeof iv>"u")return;const t=iv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zw(t[1]);return e&&JSON.parse(e)},qh=()=>{try{return pC()||mC()||gC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gw=t=>{var e,n;return(n=(e=qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_C=t=>{const e=Gw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Kw=()=>{var t;return(t=qh())===null||t===void 0?void 0:t.config},Qw=t=>{var e;return(e=qh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ch(JSON.stringify(n)),ch(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function xC(){var t;const e=(t=qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PC(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CC(){try{return typeof indexedDB=="object"}catch{return!1}}function kC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="FirebaseError";class ji extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=AC,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?bC(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ji(s,h,i)}}function bC(t,e){return t.replace(NC,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const NC=/\{\$([^}]+)}/g;function RC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(rv(o)&&rv(l)){if(!hh(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LC(t,e){const n=new OC(t,e);return n.subscribe.bind(n)}class OC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");DC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=qd),s.error===void 0&&(s.error=qd),s.complete===void 0&&(s.complete=qd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new vC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VC(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jC(t){return t===Kr?void 0:t}function VC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const zC={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},UC=Se.INFO,BC={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},WC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=BC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=UC,this._logHandler=WC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const HC=(t,e)=>e.some(n=>t instanceof n);let sv,ov;function $C(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qC(){return ov||(ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yw=new WeakMap,np=new WeakMap,Xw=new WeakMap,Zd=new WeakMap,Im=new WeakMap;function ZC(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(vr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Yw.set(n,t)}).catch(()=>{}),Im.set(e,t),e}function GC(t){if(np.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});np.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KC(t){ip=t(ip)}function QC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Gd(this),e,...n);return Xw.set(i,e.sort?e.sort():[e]),vr(i)}:qC().includes(t)?function(...e){return t.apply(Gd(this),e),vr(Yw.get(this))}:function(...e){return vr(t.apply(Gd(this),e))}}function YC(t){return typeof t=="function"?QC(t):(t instanceof IDBTransaction&&GC(t),HC(t,$C())?new Proxy(t,ip):t)}function vr(t){if(t instanceof IDBRequest)return ZC(t);if(Zd.has(t))return Zd.get(t);const e=YC(t);return e!==t&&(Zd.set(t,e),Im.set(e,t)),e}const Gd=t=>Im.get(t);function XC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=vr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(vr(l.result),d.oldVersion,d.newVersion,vr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const JC=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],Kd=new Map;function av(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=e1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||JC.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let g=d.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),s&&d.done]))[0]};return Kd.set(e,o),o}KC(t=>({...t,get:(e,n,i)=>av(e,n)||t.get(e,n,i),has:(e,n)=>!!av(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function n1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",lv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Tm("@firebase/app"),i1="@firebase/app-compat",r1="@firebase/analytics-compat",s1="@firebase/analytics",o1="@firebase/app-check-compat",a1="@firebase/app-check",l1="@firebase/auth",u1="@firebase/auth-compat",c1="@firebase/database",h1="@firebase/data-connect",d1="@firebase/database-compat",f1="@firebase/functions",p1="@firebase/functions-compat",m1="@firebase/installations",g1="@firebase/installations-compat",_1="@firebase/messaging",v1="@firebase/messaging-compat",y1="@firebase/performance",w1="@firebase/performance-compat",x1="@firebase/remote-config",E1="@firebase/remote-config-compat",T1="@firebase/storage",I1="@firebase/storage-compat",P1="@firebase/firestore",S1="@firebase/vertexai-preview",C1="@firebase/firestore-compat",k1="firebase",A1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",b1={[rp]:"fire-core",[i1]:"fire-core-compat",[s1]:"fire-analytics",[r1]:"fire-analytics-compat",[a1]:"fire-app-check",[o1]:"fire-app-check-compat",[l1]:"fire-auth",[u1]:"fire-auth-compat",[c1]:"fire-rtdb",[h1]:"fire-data-connect",[d1]:"fire-rtdb-compat",[f1]:"fire-fn",[p1]:"fire-fn-compat",[m1]:"fire-iid",[g1]:"fire-iid-compat",[_1]:"fire-fcm",[v1]:"fire-fcm-compat",[y1]:"fire-perf",[w1]:"fire-perf-compat",[x1]:"fire-rc",[E1]:"fire-rc-compat",[T1]:"fire-gcs",[I1]:"fire-gcs-compat",[P1]:"fire-fst",[C1]:"fire-fst-compat",[S1]:"fire-vertex","fire-js":"fire-js",[k1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,N1=new Map,op=new Map;function uv(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Do(t){const e=t.name;if(op.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of dh.values())uv(n,t);for(const n of N1.values())uv(n,t);return!0}function Pm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new iu("app","Firebase",R1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=A1;function Jw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sp,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=Kw()),!n)throw yr.create("no-options");const o=dh.get(s);if(o){if(hh(n,o.options)&&hh(i,o.config))return o;throw yr.create("duplicate-app",{appName:s})}const l=new FC(s);for(const d of op.values())l.addComponent(d);const h=new L1(n,i,l);return dh.set(s,h),h}function ex(t=sp){const e=dh.get(t);if(!e&&t===sp&&Kw())return Jw();if(!e)throw yr.create("no-app",{appName:t});return e}function wr(t,e,n){var i;let s=(i=b1[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(h.join(" "));return}Do(new us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firebase-heartbeat-database",D1=1,zl="firebase-heartbeat-store";let Qd=null;function tx(){return Qd||(Qd=XC(O1,D1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function M1(t){try{const n=(await tx()).transaction(zl),i=await n.objectStore(zl).get(nx(t));return await n.done,i}catch(e){if(e instanceof ji)Ri.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function cv(t,e){try{const i=(await tx()).transaction(zl,"readwrite");await i.objectStore(zl).put(e,nx(t)),await i.done}catch(n){if(n instanceof ji)Ri.warn(n.message);else{const i=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(i.message)}}}function nx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=1024,V1=30*24*60*60*1e3;class F1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=hv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=V1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hv(),{heartbeatsToSend:i,unsentEntries:s}=z1(this._heartbeatsCache.heartbeats),o=ch(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ri.warn(n),""}}}function hv(){return new Date().toISOString().substring(0,10)}function z1(t,e=j1){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),dv(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CC()?kC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dv(t){return ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){Do(new us("platform-logger",e=>new t1(e),"PRIVATE")),Do(new us("heartbeat",e=>new F1(e),"PRIVATE")),wr(rp,lv,t),wr(rp,lv,"esm2017"),wr("fire-js","")}B1("");function Sm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W1=ix,rx=new iu("auth","Firebase",ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Tm("@firebase/auth");function H1(t,...e){fh.logLevel<=Se.WARN&&fh.warn(`Auth (${Qo}): ${t}`,...e)}function Rc(t,...e){fh.logLevel<=Se.ERROR&&fh.error(`Auth (${Qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Cm(t,...e)}function Xn(t,...e){return Cm(t,...e)}function sx(t,e,n){const i=Object.assign(Object.assign({},W1()),{[e]:n});return new iu("auth","Firebase",i).create(e,{appName:t.name})}function Si(t){return sx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return rx.create(t,...e)}function ce(t,e,...n){if(!t)throw Cm(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rc(e),new Error(e)}function Li(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $1(){return fv()==="http:"||fv()==="https:"}function fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($1()||TC()||"connection"in navigator)?navigator.onLine:!0}function Z1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=wC()||IC()}get(){return q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new su(3e4,6e4);function Nr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rr(t,e,n,i,s={}){return ax(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=ru(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:d},o);return EC()||(g.referrerPolicy="no-referrer"),ox.fetch()(lx(t,t.config.apiHost,n,h),g)})}async function ax(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},G1),e);try{const s=new Y1(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw mc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,g]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw mc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw mc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw mc(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw sx(t,y,g);Fn(t,y)}}catch(s){if(s instanceof ji)throw s;Fn(t,"network-request-failed",{message:String(s)})}}async function ou(t,e,n,i,s={}){const o=await Rr(t,e,n,i,s);return"mfaPendingCredential"in o&&Fn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function lx(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?km(t.config,s):`${t.config.apiScheme}://${s}`}function Q1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),K1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Xn(t,e,i);return s.customData._tokenResponse=n,s}function pv(t){return t!==void 0&&t.enterprise!==void 0}class X1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Q1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function J1(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function ux(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tk(t,e=!1){const n=Xt(t),i=await n.getIdToken(e),s=Am(i);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:ml(Yd(s.auth_time)),issuedAtTime:ml(Yd(s.iat)),expirationTime:ml(Yd(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function Am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Zw(n);return s?JSON.parse(s):(Rc("Failed to decode base64 JWT payload"),null)}catch(s){return Rc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mv(t){const e=Am(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ji&&nk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function nk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ml(this.lastLoginAt),this.creationTime=ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Ul(t,ux(n,{idToken:i}));ce(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?cx(o.providerUserInfo):[],h=sk(t.providerData,l),d=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),y=d?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,x)}async function rk(t){const e=Xt(t);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sk(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function cx(t){return t.map(e=>{var{providerId:n}=e,i=Sm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e){const n=await ax(t,{},async()=>{const i=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=lx(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",ox.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ak(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await ok(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Io;return i&&(ce(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ce(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ti{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ik(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tk(this,e)}reload(){return rk(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await Ul(this,ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,g,y;const x=(i=n.displayName)!==null&&i!==void 0?i:void 0,I=(s=n.email)!==null&&s!==void 0?s:void 0,O=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(l=n.photoURL)!==null&&l!==void 0?l:void 0,j=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,A=(g=n.createdAt)!==null&&g!==void 0?g:void 0,P=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:R,emailVerified:H,isAnonymous:Y,providerData:J,stsTokenManager:C}=n;ce(R&&C,e,"internal-error");const E=Io.fromJSON(this.name,C);ce(typeof R=="string",e,"internal-error"),Yi(x,e.name),Yi(I,e.name),ce(typeof H=="boolean",e,"internal-error"),ce(typeof Y=="boolean",e,"internal-error"),Yi(O,e.name),Yi(M,e.name),Yi(j,e.name),Yi(U,e.name),Yi(A,e.name),Yi(P,e.name);const S=new Ti({uid:R,auth:e,email:I,emailVerified:H,displayName:x,isAnonymous:Y,photoURL:M,phoneNumber:O,tenantId:j,stsTokenManager:E,createdAt:A,lastLoginAt:P});return J&&Array.isArray(J)&&(S.providerData=J.map(b=>Object.assign({},b))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new Io;s.updateFromServerResponse(n);const o=new Ti({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ph(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?cx(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Io;h.updateFromIdToken(i);const d=new Ti({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,g),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function Ii(t){Li(t instanceof Function,"Expected a class definition");let e=gv.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hx.type="NONE";const _v=hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Po{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Lc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Lc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Po(Ii(_v),e,i);const s=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=s[0]||Ii(_v);const l=Lc(i,e.config.apiKey,e.name);let h=null;for(const g of n)try{const y=await g._get(l);if(y){const x=Ti._fromJSON(e,y);g!==o&&(h=x),o=g;break}}catch{}const d=s.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Po(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(l)}catch{}})),new Po(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_x(e))return"Blackberry";if(vx(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||px(e))&&!e.includes("edge/"))return"Chrome";if(gx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dx(t=Mt()){return/firefox\//i.test(t)}function fx(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function px(t=Mt()){return/crios\//i.test(t)}function mx(t=Mt()){return/iemobile/i.test(t)}function gx(t=Mt()){return/android/i.test(t)}function _x(t=Mt()){return/blackberry/i.test(t)}function vx(t=Mt()){return/webos/i.test(t)}function bm(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lk(t=Mt()){var e;return bm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uk(){return PC()&&document.documentMode===10}function yx(t=Mt()){return bm(t)||gx(t)||vx(t)||_x(t)||/windows phone/i.test(t)||mx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e=[]){let n;switch(t){case"Browser":n=vv(Mt());break;case"Worker":n=`${vv(Mt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Nr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=6;class fk{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:dk,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ii(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ux(this,{idToken:e}),i=await Ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Si(this));const n=e?Xt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hk(this),n=new fk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ak(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ii(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&H1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ys(t){return Xt(t)}class yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mk(t){Zh=t}function xx(t){return Zh.loadJS(t)}function gk(){return Zh.recaptchaEnterpriseScript}function _k(){return Zh.gapiScript}function vk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const yk="recaptcha-enterprise",wk="NO_RECAPTCHA";class xk{constructor(e){this.type=yk,this.auth=ys(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{J1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new X1(d);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,l(g.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;pv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(g=>{l(g)}).catch(()=>{l(wk)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&pv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gk();d.length!==0&&(d+=h),xx(d).then(()=>{s(h,o,l)}).catch(g=>{l(g)})}}).catch(h=>{l(h)})})}}async function wv(t,e,n,i=!1){const s=new xk(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function up(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await wv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await wv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e){const n=Pm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(hh(o,e??{}))return s;Fn(s,"already-initialized")}return n.initialize({options:e})}function Tk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ik(t,e,n){const i=ys(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=Ex(e),{host:l,port:h}=Pk(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),Sk()}function Ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pk(t){const e=Ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:xv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:xv(l)}}}function xv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function Ck(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(t,e){return ou(t,"POST","/v1/accounts:signInWithPassword",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(t,e){return ou(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}async function bk(t,e){return ou(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Nm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Bl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,n,"signInWithPassword",kk);case"emailLink":return Ak(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,i,"signUpPassword",Ck);case"emailLink":return bk(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return ou(t,"POST","/v1/accounts:signInWithIdp",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="http://localhost";class cs extends Nm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Sm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new cs(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,So(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:Nk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lk(t){const e=tl(nl(t)).link,n=e?tl(nl(e)).deep_link_id:null,i=tl(nl(t)).deep_link_id;return(i?tl(nl(i)).link:null)||i||n||e||t}class Rm{constructor(e){var n,i,s,o,l,h;const d=tl(nl(e)),g=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,x=Rk((s=d.mode)!==null&&s!==void 0?s:null);ce(g&&y&&x,"argument-error"),this.apiKey=g,this.operation=x,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=Lk(e);try{return new Rm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rm.parseLink(n);return ce(i,"argument-error"),Bl._fromEmailAndCode(e,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends au{constructor(){super("facebook.com")}static credential(e){return cs._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cs._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ir.credential(n,i)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends au{constructor(){super("github.com")}static credential(e){return cs._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends au{constructor(){super("twitter.com")}static credential(e,n){return cs._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return sr.credential(n,i)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return ou(t,"POST","/v1/accounts:signUp",Nr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Ti._fromIdTokenResponse(e,i,s),l=Ev(i);return new hs({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Ev(i);return new hs({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Ev(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends ji{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new mh(e,n,i,s)}}function Ix(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(t,o,e,i):o})}async function Dk(t,e,n=!1){const i=await Ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e,n=!1){const{auth:i}=t;if(Kn(i.app))return Promise.reject(Si(i));const s="reauthenticate";try{const o=await Ul(t,Ix(i,s,e,t),n);ce(o.idToken,i,"internal-error");const l=Am(o.idToken);ce(l,i,"internal-error");const{sub:h}=l;return ce(t.uid===h,i,"user-mismatch"),hs._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(t,e,n=!1){if(Kn(t.app))return Promise.reject(Si(t));const i="signIn",s=await Ix(t,i,e),o=await hs._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function jk(t,e){return Px(ys(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t){const e=ys(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vk(t,e,n){if(Kn(t.app))return Promise.reject(Si(t));const i=ys(t),l=await up(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ok).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Sx(t),d}),h=await hs._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function Cx(t,e,n){return Kn(t.app)?Promise.reject(Si(t)):jk(Xt(t),Yo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Sx(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e){return Xt(t).setPersistence(e)}function zk(t,e,n,i){return Xt(t).onIdTokenChanged(e,n,i)}function Uk(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}function Bk(t,e,n,i){return Xt(t).onAuthStateChanged(e,n,i)}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1e3,Hk=10;class Ax extends kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);uk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Hk):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ax.type="LOCAL";const bx=Ax;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Nx.type="SESSION";const Lm=Nx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Gh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async g=>g(n.origin,o)),d=await $k(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const g=Om("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(x){const I=x;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(I.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function Zk(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function Gk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Qk(){return Rx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="firebaseLocalStorageDb",Yk=1,_h="firebaseLocalStorage",Ox="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(t,e){return t.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function Xk(){const t=indexedDB.deleteDatabase(Lx);return new lu(t).toPromise()}function cp(){const t=indexedDB.open(Lx,Yk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(_h,{keyPath:Ox})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(_h)?e(i):(i.close(),await Xk(),e(await cp()))})})}async function Tv(t,e,n){const i=Kh(t,!0).put({[Ox]:e,value:n});return new lu(i).toPromise()}async function Jk(t,e){const n=Kh(t,!1).get(e),i=await new lu(n).toPromise();return i===void 0?null:i.value}function Iv(t,e){const n=Kh(t,!0).delete(e);return new lu(n).toPromise()}const eA=800,tA=3;class Dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>tA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(Qk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Gk(),!this.activeServiceWorker)return;this.sender=new qk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await Tv(e,gh,"1"),await Iv(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Tv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Jk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Kh(s,!1).getAll();return new lu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dx.type="LOCAL";const nA=Dx;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){return e?Ii(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm extends Nm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rA(t){return Px(t.auth,new Dm(t),t.bypassAuthState)}function sA(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),Mk(n,new Dm(t),t.bypassAuthState)}async function oA(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),Dk(n,new Dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rA;case"linkViaPopup":case"linkViaRedirect":return oA;case"reauthViaPopup":case"reauthViaRedirect":return sA;default:Fn(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new su(2e3,1e4);class _o extends Mx{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aA.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="pendingRedirect",Oc=new Map;class uA extends Mx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const i=await cA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cA(t,e){const n=fA(e),i=dA(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function hA(t,e){Oc.set(t._key(),e)}function dA(t){return Ii(t._redirectPersistence)}function fA(t){return Lc(lA,t.config.apiKey,t.name)}async function pA(t,e,n=!1){if(Kn(t.app))return Promise.reject(Si(t));const i=ys(t),s=iA(i,e),l=await new uA(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=10*60*1e3;class gA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_A(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!jx(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pv(e))}saveEventToCache(e){this.cachedEventUids.add(Pv(e)),this.lastProcessedEventTime=Date.now()}}function Pv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _A(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wA=/^https?/;async function xA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vA(t);for(const n of e)try{if(EA(n))return}catch{}Fn(t,"unauthorized-domain")}function EA(t){const e=ap(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!wA.test(n))return!1;if(yA.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new su(3e4,6e4);function Sv(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IA(t){return new Promise((e,n)=>{var i,s,o;function l(){Sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sv(),n(Xn(t,"network-request-failed"))},timeout:TA.get()})}if(!((s=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)l();else{const h=vk("iframefcb");return Jn()[h]=()=>{gapi.load?l():n(Xn(t,"network-request-failed"))},xx(`${_k()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function PA(t){return Dc=Dc||IA(t),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new su(5e3,15e3),CA="__/auth/iframe",kA="emulator/auth/iframe",AA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NA(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?km(e,kA):`https://${t.config.authDomain}/${CA}`,i={apiKey:e.apiKey,appName:t.name,v:Qo},s=bA.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ru(i).slice(1)}`}async function RA(t){const e=await PA(t),n=Jn().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:NA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AA,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Xn(t,"network-request-failed"),h=Jn().setTimeout(()=>{o(l)},SA.get());function d(){Jn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OA=500,DA=600,MA="_blank",jA="http://localhost";class Cv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VA(t,e,n,i=OA,s=DA){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},LA),{width:i.toString(),height:s.toString(),top:o,left:l}),g=Mt().toLowerCase();n&&(h=px(g)?MA:n),dx(g)&&(e=e||jA,d.scrollbars="yes");const y=Object.entries(d).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(lk(g)&&h!=="_self")return FA(e||"",h),new Cv(null);const x=window.open(e||"",h,y);ce(x,t,"popup-blocked");try{x.focus()}catch{}return new Cv(x)}function FA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__/auth/handler",UA="emulator/auth/handler",BA=encodeURIComponent("fac");async function kv(t,e,n,i,s,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Qo,eventId:s};if(e instanceof Tx){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",RC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,x]of Object.entries({}))l[y]=x}if(e instanceof au){const y=e.getScopes().filter(x=>x!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),g=d?`#${BA}=${encodeURIComponent(d)}`:"";return`${WA(t)}?${ru(h).slice(1)}${g}`}function WA({config:t}){return t.emulator?km(t,UA):`https://${t.authDomain}/${zA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class HA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lm,this._completeRedirectFn=pA,this._overrideRedirectResult=hA}async _openPopup(e,n,i,s){var o;Li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await kv(e,n,i,ap(),s);return VA(e,l,Om())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await kv(e,n,i,ap(),s);return Zk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Li(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await RA(e),i=new gA(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xd,{type:Xd},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Xd];l!==void 0&&n(!!l),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yx()||fx()||bm()}}const $A=HA;var Av="@firebase/auth",bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GA(t){Do(new us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ce(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wx(t)},g=new pk(i,s,o,d);return Tk(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Do(new us("auth-internal",e=>{const n=ys(e.getProvider("auth").getImmediate());return(i=>new qA(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(Av,bv,ZA(t)),wr(Av,bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=5*60,QA=Qw("authIdTokenMaxAge")||KA;let Nv=null;const YA=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>QA)return;const s=n==null?void 0:n.token;Nv!==s&&(Nv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XA(t=ex()){const e=Pm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ek(t,{popupRedirectResolver:$A,persistence:[nA,bx,Lm]}),i=Qw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=YA(o.toString());Uk(n,l,()=>l(n.currentUser)),zk(n,h=>l(h))}}const s=Gw("auth");return s&&Ik(n,`http://${s}`),n}function JA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Xn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",JA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GA("Browser");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,Vx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function S(){}S.prototype=E.prototype,C.D=E.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(b,D,V){for(var N=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)N[Ye-2]=arguments[Ye];return E.prototype[D].apply(b,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,E,S){S||(S=0);var b=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)b[D]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(D=0;16>D;++D)b[D]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=C.g[0],S=C.g[1],D=C.g[2];var V=C.g[3],N=E+(V^S&(D^V))+b[0]+3614090360&4294967295;E=S+(N<<7&4294967295|N>>>25),N=V+(D^E&(S^D))+b[1]+3905402710&4294967295,V=E+(N<<12&4294967295|N>>>20),N=D+(S^V&(E^S))+b[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=S+(E^D&(V^E))+b[3]+3250441966&4294967295,S=D+(N<<22&4294967295|N>>>10),N=E+(V^S&(D^V))+b[4]+4118548399&4294967295,E=S+(N<<7&4294967295|N>>>25),N=V+(D^E&(S^D))+b[5]+1200080426&4294967295,V=E+(N<<12&4294967295|N>>>20),N=D+(S^V&(E^S))+b[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=S+(E^D&(V^E))+b[7]+4249261313&4294967295,S=D+(N<<22&4294967295|N>>>10),N=E+(V^S&(D^V))+b[8]+1770035416&4294967295,E=S+(N<<7&4294967295|N>>>25),N=V+(D^E&(S^D))+b[9]+2336552879&4294967295,V=E+(N<<12&4294967295|N>>>20),N=D+(S^V&(E^S))+b[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=S+(E^D&(V^E))+b[11]+2304563134&4294967295,S=D+(N<<22&4294967295|N>>>10),N=E+(V^S&(D^V))+b[12]+1804603682&4294967295,E=S+(N<<7&4294967295|N>>>25),N=V+(D^E&(S^D))+b[13]+4254626195&4294967295,V=E+(N<<12&4294967295|N>>>20),N=D+(S^V&(E^S))+b[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=S+(E^D&(V^E))+b[15]+1236535329&4294967295,S=D+(N<<22&4294967295|N>>>10),N=E+(D^V&(S^D))+b[1]+4129170786&4294967295,E=S+(N<<5&4294967295|N>>>27),N=V+(S^D&(E^S))+b[6]+3225465664&4294967295,V=E+(N<<9&4294967295|N>>>23),N=D+(E^S&(V^E))+b[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=S+(V^E&(D^V))+b[0]+3921069994&4294967295,S=D+(N<<20&4294967295|N>>>12),N=E+(D^V&(S^D))+b[5]+3593408605&4294967295,E=S+(N<<5&4294967295|N>>>27),N=V+(S^D&(E^S))+b[10]+38016083&4294967295,V=E+(N<<9&4294967295|N>>>23),N=D+(E^S&(V^E))+b[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=S+(V^E&(D^V))+b[4]+3889429448&4294967295,S=D+(N<<20&4294967295|N>>>12),N=E+(D^V&(S^D))+b[9]+568446438&4294967295,E=S+(N<<5&4294967295|N>>>27),N=V+(S^D&(E^S))+b[14]+3275163606&4294967295,V=E+(N<<9&4294967295|N>>>23),N=D+(E^S&(V^E))+b[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=S+(V^E&(D^V))+b[8]+1163531501&4294967295,S=D+(N<<20&4294967295|N>>>12),N=E+(D^V&(S^D))+b[13]+2850285829&4294967295,E=S+(N<<5&4294967295|N>>>27),N=V+(S^D&(E^S))+b[2]+4243563512&4294967295,V=E+(N<<9&4294967295|N>>>23),N=D+(E^S&(V^E))+b[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=S+(V^E&(D^V))+b[12]+2368359562&4294967295,S=D+(N<<20&4294967295|N>>>12),N=E+(S^D^V)+b[5]+4294588738&4294967295,E=S+(N<<4&4294967295|N>>>28),N=V+(E^S^D)+b[8]+2272392833&4294967295,V=E+(N<<11&4294967295|N>>>21),N=D+(V^E^S)+b[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=S+(D^V^E)+b[14]+4259657740&4294967295,S=D+(N<<23&4294967295|N>>>9),N=E+(S^D^V)+b[1]+2763975236&4294967295,E=S+(N<<4&4294967295|N>>>28),N=V+(E^S^D)+b[4]+1272893353&4294967295,V=E+(N<<11&4294967295|N>>>21),N=D+(V^E^S)+b[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=S+(D^V^E)+b[10]+3200236656&4294967295,S=D+(N<<23&4294967295|N>>>9),N=E+(S^D^V)+b[13]+681279174&4294967295,E=S+(N<<4&4294967295|N>>>28),N=V+(E^S^D)+b[0]+3936430074&4294967295,V=E+(N<<11&4294967295|N>>>21),N=D+(V^E^S)+b[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=S+(D^V^E)+b[6]+76029189&4294967295,S=D+(N<<23&4294967295|N>>>9),N=E+(S^D^V)+b[9]+3654602809&4294967295,E=S+(N<<4&4294967295|N>>>28),N=V+(E^S^D)+b[12]+3873151461&4294967295,V=E+(N<<11&4294967295|N>>>21),N=D+(V^E^S)+b[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=S+(D^V^E)+b[2]+3299628645&4294967295,S=D+(N<<23&4294967295|N>>>9),N=E+(D^(S|~V))+b[0]+4096336452&4294967295,E=S+(N<<6&4294967295|N>>>26),N=V+(S^(E|~D))+b[7]+1126891415&4294967295,V=E+(N<<10&4294967295|N>>>22),N=D+(E^(V|~S))+b[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=S+(V^(D|~E))+b[5]+4237533241&4294967295,S=D+(N<<21&4294967295|N>>>11),N=E+(D^(S|~V))+b[12]+1700485571&4294967295,E=S+(N<<6&4294967295|N>>>26),N=V+(S^(E|~D))+b[3]+2399980690&4294967295,V=E+(N<<10&4294967295|N>>>22),N=D+(E^(V|~S))+b[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=S+(V^(D|~E))+b[1]+2240044497&4294967295,S=D+(N<<21&4294967295|N>>>11),N=E+(D^(S|~V))+b[8]+1873313359&4294967295,E=S+(N<<6&4294967295|N>>>26),N=V+(S^(E|~D))+b[15]+4264355552&4294967295,V=E+(N<<10&4294967295|N>>>22),N=D+(E^(V|~S))+b[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=S+(V^(D|~E))+b[13]+1309151649&4294967295,S=D+(N<<21&4294967295|N>>>11),N=E+(D^(S|~V))+b[4]+4149444226&4294967295,E=S+(N<<6&4294967295|N>>>26),N=V+(S^(E|~D))+b[11]+3174756917&4294967295,V=E+(N<<10&4294967295|N>>>22),N=D+(E^(V|~S))+b[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=S+(V^(D|~E))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var S=E-this.blockSize,b=this.B,D=this.h,V=0;V<E;){if(D==0)for(;V<=S;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<E;)if(b[D++]=C.charCodeAt(V++),D==this.blockSize){s(this,b),D=0;break}}else for(;V<E;)if(b[D++]=C[V++],D==this.blockSize){s(this,b),D=0;break}}this.h=D,this.o+=E},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var S=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=S&255,S/=256;for(this.u(C),C=Array(16),E=S=0;4>E;++E)for(var b=0;32>b;b+=8)C[S++]=this.g[E]>>>b&255;return C};function o(C,E){var S=h;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=E(C)}function l(C,E){this.h=E;for(var S=[],b=!0,D=C.length-1;0<=D;D--){var V=C[D]|0;b&&V==E||(S[D]=V,b=!1)}this.g=S}var h={};function d(C){return-128<=C&&128>C?o(C,function(E){return new l([E|0],0>E?-1:0)}):new l([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return x;if(0>C)return U(g(-C));for(var E=[],S=1,b=0;C>=S;b++)E[b]=C/S|0,S*=4294967296;return new l(E,0)}function y(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return U(y(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=g(Math.pow(E,8)),b=x,D=0;D<C.length;D+=8){var V=Math.min(8,C.length-D),N=parseInt(C.substring(D,D+V),E);8>V?(V=g(Math.pow(E,V)),b=b.j(V).add(g(N))):(b=b.j(S),b=b.add(g(N)))}return b}var x=d(0),I=d(1),O=d(16777216);t=l.prototype,t.m=function(){if(j(this))return-U(this).m();for(var C=0,E=1,S=0;S<this.g.length;S++){var b=this.i(S);C+=(0<=b?b:4294967296+b)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M(this))return"0";if(j(this))return"-"+U(this).toString(C);for(var E=g(Math.pow(C,6)),S=this,b="";;){var D=H(S,E).g;S=A(S,D.j(E));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=D,M(S))return V+b;for(;6>V.length;)V="0"+V;b=V+b}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function M(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function j(C){return C.h==-1}t.l=function(C){return C=A(this,C),j(C)?-1:M(C)?0:1};function U(C){for(var E=C.g.length,S=[],b=0;b<E;b++)S[b]=~C.g[b];return new l(S,~C.h).add(I)}t.abs=function(){return j(this)?U(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],b=0,D=0;D<=E;D++){var V=b+(this.i(D)&65535)+(C.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);b=N>>>16,V&=65535,N&=65535,S[D]=N<<16|V}return new l(S,S[S.length-1]&-2147483648?-1:0)};function A(C,E){return C.add(U(E))}t.j=function(C){if(M(this)||M(C))return x;if(j(this))return j(C)?U(this).j(U(C)):U(U(this).j(C));if(j(C))return U(this.j(U(C)));if(0>this.l(O)&&0>C.l(O))return g(this.m()*C.m());for(var E=this.g.length+C.g.length,S=[],b=0;b<2*E;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<C.g.length;D++){var V=this.i(b)>>>16,N=this.i(b)&65535,Ye=C.i(D)>>>16,si=C.i(D)&65535;S[2*b+2*D]+=N*si,P(S,2*b+2*D),S[2*b+2*D+1]+=V*si,P(S,2*b+2*D+1),S[2*b+2*D+1]+=N*Ye,P(S,2*b+2*D+1),S[2*b+2*D+2]+=V*Ye,P(S,2*b+2*D+2)}for(b=0;b<E;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=E;b<2*E;b++)S[b]=0;return new l(S,0)};function P(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function R(C,E){this.g=C,this.h=E}function H(C,E){if(M(E))throw Error("division by zero");if(M(C))return new R(x,x);if(j(C))return E=H(U(C),E),new R(U(E.g),U(E.h));if(j(E))return E=H(C,U(E)),new R(U(E.g),E.h);if(30<C.g.length){if(j(C)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var S=I,b=E;0>=b.l(C);)S=Y(S),b=Y(b);var D=J(S,1),V=J(b,1);for(b=J(b,2),S=J(S,2);!M(b);){var N=V.add(b);0>=N.l(C)&&(D=D.add(S),V=N),b=J(b,1),S=J(S,1)}return E=A(C,D.j(E)),new R(D,E)}for(D=x;0<=C.l(E);){for(S=Math.max(1,Math.floor(C.m()/E.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),V=g(S),N=V.j(E);j(N)||0<N.l(C);)S-=b,V=g(S),N=V.j(E);M(V)&&(V=I),D=D.add(V),C=A(C,N)}return new R(D,C)}t.A=function(C){return H(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)&C.i(b);return new l(S,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)|C.i(b);return new l(S,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)^C.i(b);return new l(S,this.h^C.h)};function Y(C){for(var E=C.g.length+1,S=[],b=0;b<E;b++)S[b]=C.i(b)<<1|C.i(b-1)>>>31;return new l(S,C.h)}function J(C,E){var S=E>>5;E%=32;for(var b=C.g.length-S,D=[],V=0;V<b;V++)D[V]=0<E?C.i(V+S)>>>E|C.i(V+S+1)<<32-E:C.i(V+S);return new l(D,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Vx=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=g,l.fromString=y,is=l}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fx,il,zx,Mc,hp,Ux,Bx,Wx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gc=="object"&&gc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in v))break e;v=v[F]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var v=0,T=!1,F={next:function(){if(!T&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(u){return u||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,v){return u.call.apply(u.bind,arguments)}function x(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function I(u,m,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:x,I.apply(null,arguments)}function O(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function M(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,F,W){for(var ee=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ee[Re-2]=arguments[Re];return m.prototype[F].apply(T,ee)}}function j(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function U(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(d(T)){const F=u.length||0,W=T.length||0;u.length=F+W;for(let ee=0;ee<W;ee++)u[F+ee]=T[ee]}else u.push(T)}}class A{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var Y=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function J(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function C(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function E(u){const m={};for(const v in u)m[v]=u[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let v,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(v in T)u[v]=T[v];for(let W=0;W<S.length;W++)v=S[W],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function D(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function V(u){h.setTimeout(()=>{throw u},0)}function N(){var u=ue;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ye{constructor(){this.h=this.g=null}add(m,v){const T=si.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var si=new A(()=>new ut,u=>u.reset());class ut{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,q=!1,ue=new Ye,X=()=>{const u=h.Promise.resolve(void 0);jt=()=>{u.then(he)}};var he=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(v){V(v)}var m=si;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u}();function ye(u,m){if(Te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Y){e:{try{H(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}M(ye,Te);var pe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),Un=0;function gu(u,m,v,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=F,this.key=++Un,this.da=this.fa=!1}function Fi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zi(u){this.src=u,this.g={},this.h=0}zi.prototype.add=function(u,m,v,T,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ee=Lr(u,m,T,F);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new gu(m,this.src,W,!!T,F),m.fa=v,u.push(m)),m};function oi(u,m){var v=m.type;if(v in u.g){var T=u.g[v],F=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=F)&&Array.prototype.splice.call(T,F,1),W&&(Fi(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Lr(u,m,v,T){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==T)return F}return-1}var sa="closure_lm_"+(1e6*Math.random()|0),Ts={};function oa(u,m,v,T,F){if(Array.isArray(m)){for(var W=0;W<m.length;W++)oa(u,m[W],v,T,F);return null}return v=yu(v),u&&u[ct]?u.K(m,v,g(T)?!!T.capture:!1,F):aa(u,m,v,!1,T,F)}function aa(u,m,v,T,F,W){if(!m)throw Error("Invalid event type");var ee=g(F)?!!F.capture:!!F,Re=Cs(u);if(Re||(u[sa]=Re=new zi(u)),v=Re.add(m,v,T,ee,W),v.proxy)return v;if(T=Is(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Ne||(F=ee),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Ss(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Is(){function u(v){return m.call(u.src,u.listener,v)}const m=vu;return u}function _u(u,m,v,T,F){if(Array.isArray(m))for(var W=0;W<m.length;W++)_u(u,m[W],v,T,F);else T=g(T)?!!T.capture:!!T,v=yu(v),u&&u[ct]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=Lr(W,v,T,F),-1<v&&(Fi(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Cs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Lr(m,v,T,F)),(v=-1<u?m[u]:null)&&Ps(v))}function Ps(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ct])oi(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(Ss(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=Cs(m))?(oi(v,u),v.h==0&&(v.src=null,m[sa]=null)):Fi(u)}}}function Ss(u){return u in Ts?Ts[u]:Ts[u]="on"+u}function vu(u,m){if(u.da)u=!0;else{m=new ye(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&Ps(u),u=v.call(T,m)}return u}function Cs(u){return u=u[sa],u instanceof zi?u:null}var la="__closure_events_fn_"+(1e9*Math.random()>>>0);function yu(u){return typeof u=="function"?u:(u[la]||(u[la]=function(m){return u.handleEvent(m)}),u[la])}function it(){ve.call(this),this.i=new zi(this),this.M=this,this.F=null}M(it,ve),it.prototype[ct]=!0,it.prototype.removeEventListener=function(u,m,v,T){_u(this,u,m,v,T)};function mt(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new Te(m,u);else if(m instanceof Te)m.target=m.target||u;else{var F=m;m=new Te(T,u),b(m,F)}if(F=!0,v)for(var W=v.length-1;0<=W;W--){var ee=m.g=v[W];F=Or(ee,T,!0,m)&&F}if(ee=m.g=u,F=Or(ee,T,!0,m)&&F,F=Or(ee,T,!1,m)&&F,v)for(W=0;W<v.length;W++)ee=m.g=v[W],F=Or(ee,T,!1,m)&&F}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)Fi(v[T]);delete u.g[m],u.h--}}this.F=null},it.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},it.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function Or(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,W=0;W<m.length;++W){var ee=m[W];if(ee&&!ee.da&&ee.capture==v){var Re=ee.listener,rt=ee.ha||ee.src;ee.fa&&oi(u.i,ee),F=Re.call(rt,T)!==!1&&F}}return F&&!T.defaultPrevented}function wu(u,m,v){if(typeof u=="function")v&&(u=I(u,v));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function ua(u){u.g=wu(()=>{u.g=null,u.i&&(u.i=!1,ua(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class xu extends ve{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(u){ve.call(this),this.h=u,this.g={}}M(Dr,ve);var ca=[];function ks(u){J(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ps(m)},u),u.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),ks(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=h.JSON.stringify,hd=h.JSON.parse,Mr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ha(){}ha.prototype.h=null;function Eu(u){return u.h||(u.h=u.i())}function da(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bs(){Te.call(this,"d")}M(bs,Te);function fa(){Te.call(this,"c")}M(fa,Te);var ai={},Tu=null;function Ns(){return Tu=Tu||new it}ai.La="serverreachability";function Iu(u){Te.call(this,ai.La,u)}M(Iu,Te);function jr(u){const m=Ns();mt(m,new Iu(m))}ai.STAT_EVENT="statevent";function Rs(u,m){Te.call(this,ai.STAT_EVENT,u),this.stat=m}M(Rs,Te);function xt(u){const m=Ns();mt(m,new Rs(m,u))}ai.Ma="timingevent";function Pu(u,m){Te.call(this,ai.Ma,u),this.size=m}M(Pu,Te);function Vr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Fr(){this.g=!0}Fr.prototype.xa=function(){this.g=!1};function cn(u,m,v,T,F,W){u.info(function(){if(u.g)if(W)for(var ee="",Re=W.split("&"),rt=0;rt<Re.length;rt++){var Ce=Re[rt].split("=");if(1<Ce.length){var Me=Ce[0];Ce=Ce[1];var qe=Me.split("_");ee=2<=qe.length&&qe[1]=="type"?ee+(Me+"="+Ce+"&"):ee+(Me+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+v+`
`+ee})}function re(u,m,v,T,F,W,ee){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+v+`
`+W+" "+ee})}function li(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Cu(u,v)+(T?" "+T:"")})}function Su(u,m){u.info(function(){return"TIMEOUT: "+m})}Fr.prototype.info=function(){};function Cu(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return As(v)}catch{return m}}var zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ls={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Os;function Sn(){}M(Sn,ha),Sn.prototype.g=function(){return new XMLHttpRequest},Sn.prototype.i=function(){return{}},Os=new Sn;function Cn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}var Au={},pa={};function ma(u,m,v){u.L=1,u.v=dn(Xe(m)),u.m=v,u.P=!0,ga(u,null)}function ga(u,m){u.F=Date.now(),Ms(u),u.A=Xe(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ru(v.i,"t",T),u.C=0,v=u.j.J,u.h=new ku,u.g=Fu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new xu(I(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ca[0]=F.toString()),F=ca);for(var W=0;W<F.length;W++){var ee=oa(v,F[W],T||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),jr(),cn(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Vt(u)==3?m.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const qe=Vt(this.g);var m=this.g.Ba();const Gi=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||qe!=4||m==7||(m==8||0>=Gi?jr(3):jr(2)),_a(this);var v=this.g.Z();this.X=v;t:if(bu(this)){var T=Ra(this.g);u="";var F=T.length,W=Vt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Ur(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==F-1)});T.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,re(this.i,this.u,this.A,this.l,this.R,qe,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,rt=this.g;if((Re=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Re)){var Ce=Re;break t}}Ce=null}if(v=Ce)li(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Br(this,v);else{this.o=!1,this.s=3,xt(12),ui(this),Ur(this);break e}}if(this.P){v=!0;let et;for(;!this.J&&this.C<ee.length;)if(et=Ds(this,ee),et==pa){qe==4&&(this.s=4,xt(14),v=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Au){this.s=4,xt(15),li(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else li(this.i,this.l,et,null),Br(this,et);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||ee.length!=0||this.h.h||(this.s=1,xt(16),v=!1),this.o=this.o&&v,!v)li(this.i,this.l,ee,"[Invalid Chunked Response]"),ui(this),Ur(this);else if(0<ee.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),$s(Me),Me.M=!0,xt(11))}}else li(this.i,this.l,ee,null),Br(this,ee);qe==4&&ui(this),this.o&&!this.J&&(qe==4?Oa(this.j,this):(this.o=!1,Ms(this)))}else dd(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),ui(this),Ur(this)}}}catch{}finally{}};function bu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ds(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?pa:(v=Number(m.substring(v,T)),isNaN(v)?Au:(T+=1,T+v>m.length?pa:(m=m.slice(T,T+v),u.C=T+v,m)))}Cn.prototype.cancel=function(){this.J=!0,ui(this)};function Ms(u){u.S=Date.now()+u.I,Nu(u,u.I)}function Nu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vr(I(u.ba,u),m)}function _a(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Su(this.i,this.A),this.L!=2&&(jr(),xt(17)),ui(this),this.s=2,Ur(this)):Nu(this,this.S-u)};function Ur(u){u.j.G==0||u.J||Oa(u.j,u)}function ui(u){_a(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ks(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Br(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ie(v.h,u))){if(!u.K&&Ie(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Zs(v),Ws(v);else break e;Hs(v),xt(18)}}else v.za=F[1],0<v.za-v.T&&37500>F[2]&&v.F&&v.v==0&&!v.C&&(v.C=Vr(I(v.Za,v),6e3));if(1>=Bi(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else pi(v,11)}else if((u.K||v.g==u)&&Zs(v),!P(m))for(F=v.Da.g.parse(m),m=0;m<F.length;m++){let Ce=F[m];if(v.T=Ce[0],Ce=Ce[1],v.G==2)if(Ce[0]=="c"){v.K=Ce[1],v.ia=Ce[2];const Me=Ce[3];Me!=null&&(v.la=Me,v.j.info("VER="+v.la));const qe=Ce[4];qe!=null&&(v.Aa=qe,v.j.info("SVER="+v.Aa));const Gi=Ce[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(T=1.5*Gi,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const et=u.g;if(et){const Ks=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var W=T.h;W.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(je(W,W.h),W.h=null))}if(T.D){const Hn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(T.ya=Hn,de(T.I,T.D,Hn))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ee=u;if(T.qa=Gs(T,T.J?T.ia:null,T.W),ee.K){Hr(T.h,ee);var Re=ee,rt=T.L;rt&&(Re.I=rt),Re.B&&(_a(Re),Ms(Re)),T.g=ee}else bn(T);0<v.i.length&&Zi(v)}else Ce[0]!="stop"&&Ce[0]!="close"||pi(v,7);else v.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?pi(v,7):Bs(v):Ce[0]!="noop"&&v.l&&v.l.ta(Ce),v.v=0)}}jr(4)}catch{}}var Wr=class{constructor(u,m){this.g=u,this.map=m}};function va(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ya(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bi(u){return u.h?1:u.g?u.g.size:0}function Ie(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function je(u,m){u.g?u.g.add(m):u.h=m}function Hr(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}va.prototype.cancel=function(){if(this.i=ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ci(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return j(u.i)}function Wi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function wa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function _e(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=wa(u),T=Wi(u),F=T.length,W=0;W<F;W++)m.call(void 0,T[W],v&&v[W],u)}var Ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),F=null;if(0<=T){var W=u[v].substring(0,T);F=u[v].substring(T+1)}else W=u[v];m(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function hn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hn){this.h=u.h,js(this,u.j),this.o=u.o,this.g=u.g,hi(this,u.s),this.l=u.l;var m=u.i,v=new di;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Bn(this,v),this.m=u.m}else u&&(m=String(u).match(Ue))?(this.h=!1,js(this,m[1]||"",!0),this.o=kn(m[2]||""),this.g=kn(m[3]||"",!0),hi(this,m[4]),this.l=kn(m[5]||"",!0),Bn(this,m[6]||"",!0),this.m=kn(m[7]||"")):(this.h=!1,this.i=new di(null,this.h))}hn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(An(m,Hi,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(An(m,Hi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(An(v,v.charAt(0)=="/"?Ia:Ta,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",An(v,Pa)),u.join("")};function Xe(u){return new hn(u)}function js(u,m,v){u.j=v?kn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function hi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Bn(u,m,v){m instanceof di?(u.i=m,fn(u.i,u.h)):(v||(m=An(m,Vs)),u.i=new di(m,u.h))}function de(u,m,v){u.i.set(m,v)}function dn(u){return de(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function kn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function An(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Ea),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ea(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Hi=/[#\/\?@]/g,Ta=/[#\?:]/g,Ia=/[#\?]/g,Vs=/[#\?@]/g,Pa=/#/g;function di(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Jt(u){u.g||(u.g=new Map,u.h=0,u.i&&xa(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=di.prototype,t.add=function(u,m){Jt(this),this.i=null,u=ae(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Sa(u,m){Jt(u),m=ae(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Fs(u,m){return Jt(u),m=ae(u,m),u.g.has(m)}t.forEach=function(u,m){Jt(this),this.g.forEach(function(v,T){v.forEach(function(F){u.call(m,F,T,this)},this)},this)},t.na=function(){Jt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const F=u[T];for(let W=0;W<F.length;W++)v.push(m[T])}return v},t.V=function(u){Jt(this);let m=[];if(typeof u=="string")Fs(this,u)&&(m=m.concat(this.g.get(ae(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return Jt(this),this.i=null,u=ae(this,u),Fs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ru(u,m,v){Sa(u,m),0<v.length&&(u.i=null,u.g.set(ae(u,m),j(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const W=encodeURIComponent(String(T)),ee=this.V(T);for(T=0;T<ee.length;T++){var F=W;ee[T]!==""&&(F+="="+encodeURIComponent(String(ee[T]))),u.push(F)}}return this.i=u.join("&")};function ae(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fn(u,m){m&&!u.j&&(Jt(u),u.i=null,u.g.forEach(function(v,T){var F=T.toLowerCase();T!=F&&(Sa(this,T),Ru(this,F,v))},u)),u.j=m}function De(u,m){const v=new Fr;if(h.Image){const T=new Image;T.onload=O(pn,v,"TestLoadImage: loaded",!0,m,T),T.onerror=O(pn,v,"TestLoadImage: error",!1,m,T),T.onabort=O(pn,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=O(pn,v,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Lu(u,m){const v=new Fr,T=new AbortController,F=setTimeout(()=>{T.abort(),pn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(F),W.ok?pn(v,"TestPingServer: ok",!0,m):pn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),pn(v,"TestPingServer: error",!1,m)})}function pn(u,m,v,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(v)}catch{}}function Ca(){this.g=new Mr}function ka(u,m,v){const T=v||"";try{_e(u,function(F,W){let ee=F;g(F)&&(ee=As(F)),m.push(T+W+"="+encodeURIComponent(ee))})}catch(F){throw m.push(T+"type="+encodeURIComponent("_badmap")),F}}function mn(u){this.l=u.Ub||null,this.j=u.eb||!1}M(mn,ha),mn.prototype.g=function(){return new $i(this.l,this.j)},mn.prototype.i=function(u){return function(){return u}}({});function $i(u,m){it.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M($i,it),t=$i.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,en(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$e(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,en(this)),this.g&&(this.readyState=3,en(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$e(this):en(this),this.readyState==3&&qi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$e(this))},t.Qa=function(u){this.g&&(this.response=u,$e(this))},t.ga=function(){this.g&&$e(this)};function $e(u){u.readyState=4,u.l=null,u.j=null,u.v=null,en(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function en(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Aa(u){let m="";return J(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function zs(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Aa(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):de(u,m,v))}function Be(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Be,it);var Ou=/^https?$/i,ba=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Os.g(),this.v=this.o?Eu(this.o):Eu(Os),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Du(this,W);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)v.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())v.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ba,m,void 0))||T||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of v)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Du(this,W)}};function Du(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Na(u),Us(u)}function Na(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xe(this):this.bb())},t.bb=function(){xe(this)};function xe(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Vt(u)!=4||u.Z()!=2)){if(u.u&&Vt(u)==4)wu(u.Ea,0,u);else if(mt(u,"readystatechange"),Vt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ee===0){var F=String(u.D).match(Ue)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),T=!Ou.test(F?F.toLowerCase():"")}v=T}if(v)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var W=2<Vt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Na(u)}}finally{Us(u)}}}}function Us(u,m){if(u.g){$t(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||mt(u,"ready");try{v.onreadystatechange=T}catch{}}}function $t(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Vt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),hd(m)}};function Ra(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dd(u){const m={};u=(u.g&&2<=Vt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(P(u[T]))continue;var v=D(u[T]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[F]||[];m[F]=W,W.push(v)}C(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Mu(u){this.Aa=0,this.i=[],this.j=new Fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fi("baseRetryDelayMs",5e3,u),this.cb=fi("retryDelaySeedMs",1e4,u),this.Wa=fi("forwardChannelMaxRetries",2,u),this.wa=fi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new va(u&&u.concurrentRequestLimit),this.Da=new Ca,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mu.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,T){xt(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Gs(this,null,this.W),Zi(this)};function Bs(u){if(ju(u),u.G==3){var m=u.U++,v=Xe(u.I);if(de(v,"SID",u.K),de(v,"RID",m),de(v,"TYPE","terminate"),$r(u,v),m=new Cn(u,u.j,m),m.L=2,m.v=dn(Xe(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=Fu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ms(m)}Vu(u)}function Ws(u){u.g&&($s(u),u.g.cancel(),u.g=null)}function ju(u){Ws(u),u.u&&(h.clearTimeout(u.u),u.u=null),Zs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Zi(u){if(!ya(u.h)&&!u.s){u.s=!0;var m=u.Ga;jt||X(),q||(jt(),q=!0),ue.add(m,u),u.B=0}}function fd(u,m){return Bi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vr(I(u.Ga,u,m),Da(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Cn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=E(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=La(this,F,m),v=Xe(this.I),de(v,"RID",u),de(v,"CVER",22),this.D&&de(v,"X-HTTP-Session-Id",this.D),$r(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Aa(W)))+"&"+m:this.m&&zs(v,this.m,W)),je(this.h,F),this.Ua&&de(v,"TYPE","init"),this.P?(de(v,"$req",m),de(v,"SID","null"),F.T=!0,ma(F,v,null)):ma(F,v,m),this.G=2}}else this.G==3&&(u?tn(this,u):this.i.length==0||ya(this.h)||tn(this))};function tn(u,m){var v;m?v=m.l:v=u.U++;const T=Xe(u.I);de(T,"SID",u.K),de(T,"RID",v),de(T,"AID",u.T),$r(u,T),u.m&&u.o&&zs(T,u.m,u.o),v=new Cn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=La(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),je(u.h,v),ma(v,T,m)}function $r(u,m){u.H&&J(u.H,function(v,T){de(m,T,v)}),u.l&&_e({},function(v,T){de(m,T,v)})}function La(u,m,v){v=Math.min(u.i.length,v);var T=u.l?I(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ee=["count="+v];W==-1?0<v?(W=F[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let Re=!0;for(let rt=0;rt<v;rt++){let Ce=F[rt].g;const Me=F[rt].map;if(Ce-=W,0>Ce)W=Math.max(0,F[rt].g-100),Re=!1;else try{ka(Me,ee,"req"+Ce+"_")}catch{T&&T(Me)}}if(Re){T=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function bn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;jt||X(),q||(jt(),q=!0),ue.add(m,u),u.v=0}}function Hs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vr(I(u.Fa,u),Da(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,qs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vr(I(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Ws(this),qs(this))};function $s(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function qs(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Xe(u.qa);de(m,"RID","rpc"),de(m,"SID",u.K),de(m,"AID",u.T),de(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&de(m,"TO",u.ja),de(m,"TYPE","xmlhttp"),$r(u,m),u.m&&u.o&&zs(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=dn(Xe(m)),v.m=null,v.P=!0,ga(v,u)}t.Za=function(){this.C!=null&&(this.C=null,Ws(this),Hs(this),xt(19))};function Zs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Oa(u,m){var v=null;if(u.g==m){Zs(u),$s(u),u.g=null;var T=2}else if(Ie(u.h,m))v=m.D,Hr(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;T=Ns(),mt(T,new Pu(T,v)),Zi(u)}else bn(u);else if(F=m.s,F==3||F==0&&0<m.X||!(T==1&&fd(u,m)||T==2&&Hs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),F){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function Da(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function pi(u,m){if(u.j.info("Error code "+m),m==2){var v=I(u.fb,u),T=u.Xa;const F=!T;T=new hn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||js(T,"https"),dn(T),F?De(T.toString(),v):Lu(T.toString(),v)}else xt(2);u.G=0,u.l&&u.l.sa(m),Vu(u),ju(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Vu(u){if(u.G=0,u.ka=[],u.l){const m=ci(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Gs(u,m,v){var T=v instanceof hn?Xe(v):new hn(v);if(T.g!="")m&&(T.g=m+"."+T.g),hi(T,T.s);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var W=new hn(null);T&&js(W,T),m&&(W.g=m),F&&hi(W,F),v&&(W.l=v),T=W}return v=u.D,m=u.ya,v&&m&&de(T,v,m),de(T,"VER",u.la),$r(u,T),T}function Fu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Be(new mn({eb:v})):new Be(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ma(){}t=Ma.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qr(){}qr.prototype.g=function(u,m){return new gt(u,m)};function gt(u,m){it.call(this),this.g=new Mu(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!P(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new gn(this)}M(gt,it),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Bs(this.g)},gt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=As(u),u=v);m.i.push(new Wr(m.Ya++,u)),m.G==3&&Zi(m)},gt.prototype.N=function(){this.g.l=null,delete this.j,Bs(this.g),delete this.g,gt.aa.N.call(this)};function Wn(u){bs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}M(Wn,bs);function zu(){fa.call(this),this.status=1}M(zu,fa);function gn(u){this.g=u}M(gn,Ma),gn.prototype.ua=function(){mt(this.g,"a")},gn.prototype.ta=function(u){mt(this.g,new Wn(u))},gn.prototype.sa=function(u){mt(this.g,new zu)},gn.prototype.ra=function(){mt(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,Wx=function(){return new qr},Bx=function(){return Ns()},Ux=ai,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,Mc=zr,Ls.COMPLETE="complete",zx=Ls,da.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",it.prototype.listen=it.prototype.K,il=da,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Fx=Be}).apply(typeof gc<"u"?gc:typeof self<"u"?self:typeof window<"u"?window:{});const Lv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Tm("@firebase/firestore");function Ka(){return ds.logLevel}function ie(t,...e){if(ds.logLevel<=Se.DEBUG){const n=e.map(Mm);ds.debug(`Firestore (${Xo}): ${t}`,...n)}}function Oi(t,...e){if(ds.logLevel<=Se.ERROR){const n=e.map(Mm);ds.error(`Firestore (${Xo}): ${t}`,...n)}}function Mo(t,...e){if(ds.logLevel<=Se.WARN){const n=e.map(Mm);ds.warn(`Firestore (${Xo}): ${t}`,...n)}}function Mm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+t;throw Oi(e),new Error(e)}function Oe(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class tb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nb{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string"),new Hx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Rt(e)}}class ib{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rb{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new ib(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ob{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new sb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=ab(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function be(t,e){return t<e?-1:t>e?1:0}function jo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new pt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new pt(0,0))}static max(){return new me(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(),i===void 0?i=e.length-n:i>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Wl{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Wl{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return lb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(He.fromString(e))}static fromName(e){return new oe(He.fromString(e).popFirst(5))}static empty(){return new oe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new He(e.slice()))}}function ub(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new Pr(s,oe.empty(),e)}function cb(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Pr(me.min(),oe.empty(),-1)}static max(){return new Pr(me.max(),oe.empty(),-1)}}function hb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==db)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(s=>s?G.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const g=d;n(e[g]).next(y=>{l[g]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new G((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function pb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jm.oe=-1;function Qh(t){return t==null}function vh(t){return t===0&&1/t==-1/0}function mb(t){return typeof t=="number"&&Number.isInteger(t)&&!vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _c(this.root,e,this.comparator,!1)}getReverseIterator(){return new _c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _c(this.root,e,this.comparator,!0)}}class _c{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Tt.RED,this.left=s??Tt.EMPTY,this.right=o??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Tt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,i,s,o){return this}insert(e,n,i){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new St(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zx("Invalid base64 string: "+o):o}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const gb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=gb.exec(t);if(Oe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fs(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fm(t){const e=t.mapValue.fields.__previous_value__;return Vm(e)?Fm(e):e}function Hl(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,i,s,o,l,h,d,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=g}}class $l{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc={mapValue:{}};function ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vm(t)?4:yb(t)?9007199254740991:vb(t)?10:11:fe()}function ii(t,e){if(t===e)return!0;const n=ps(t);if(n!==ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hl(t).isEqual(Hl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Sr(s.timestampValue),h=Sr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return fs(s.bytesValue).isEqual(fs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?vh(l)===vh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Ov(l)!==Ov(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ii(l[d],h[d])))return!1;return!0}(t,e);default:return fe()}}function ql(t,e){return(t.values||[]).find(n=>ii(n,e))!==void 0}function Vo(t,e){if(t===e)return 0;const n=ps(t),i=ps(e);if(n!==i)return be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Mv(t.timestampValue,e.timestampValue);case 4:return Mv(Hl(t),Hl(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(o,l){const h=fs(o),d=fs(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let g=0;g<h.length&&g<d.length;g++){const y=be(h[g],d[g]);if(y!==0)return y}return be(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=be(tt(o.latitude),tt(l.latitude));return h!==0?h:be(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,g,y;const x=o.fields||{},I=l.fields||{},O=(h=x.value)===null||h===void 0?void 0:h.arrayValue,M=(d=I.value)===null||d===void 0?void 0:d.arrayValue,j=be(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((y=M==null?void 0:M.values)===null||y===void 0?void 0:y.length)||0);return j!==0?j:jv(O,M)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===vc.mapValue&&l===vc.mapValue)return 0;if(o===vc.mapValue)return 1;if(l===vc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),g=l.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let x=0;x<d.length&&x<y.length;++x){const I=be(d[x],y[x]);if(I!==0)return I;const O=Vo(h[d[x]],g[y[x]]);if(O!==0)return O}return be(d.length,y.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Sr(t),i=Sr(e),s=be(n.seconds,i.seconds);return s!==0?s:be(n.nanos,i.nanos)}function jv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Vo(n[s],i[s]);if(o)return o}return be(n.length,i.length)}function Fo(t){return dp(t)}function dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Sr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=dp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${dp(n.fields[l])}`;return s+"}"}(t.mapValue):fe()}function fp(t){return!!t&&"integerValue"in t}function zm(t){return!!t&&"arrayValue"in t}function Vv(t){return!!t&&"nullValue"in t}function Fv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function vb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=gl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=gl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];jc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Jo(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new wn(gl(this.value))}}function Gx(t){const e=[];return Jo(t.fields,(n,i)=>{const s=new It([n]);if(jc(i)){const o=Gx(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ot(e,0,me.min(),me.min(),me.min(),wn.empty(),0)}static newFoundDocument(e,n,i,s){return new Ot(e,1,n,me.min(),i,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,me.min(),me.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,me.min(),me.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function zv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=Vo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Uv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function wb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{}class dt extends Kx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Eb(e,n,i):n==="array-contains"?new Pb(e,i):n==="in"?new Sb(e,i):n==="not-in"?new Cb(e,i):n==="array-contains-any"?new kb(e,i):new dt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Tb(e,i):new Ib(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vo(n,this.value)):n!==null&&ps(this.value)===ps(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends Kx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ri(e,n)}matches(e){return Qx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qx(t){return t.op==="and"}function Yx(t){return xb(t)&&Qx(t)}function xb(t){for(const e of t.filters)if(e instanceof ri)return!1;return!0}function pp(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Fo(t.value);if(Yx(t))return t.filters.map(e=>pp(e)).join(",");{const e=t.filters.map(n=>pp(n)).join(",");return`${t.op}(${e})`}}function Xx(t,e){return t instanceof dt?function(i,s){return s instanceof dt&&i.op===s.op&&i.field.isEqual(s.field)&&ii(i.value,s.value)}(t,e):t instanceof ri?function(i,s){return s instanceof ri&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&Xx(l,s.filters[h]),!0):!1}(t,e):void fe()}function Jx(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`}(t):t instanceof ri?function(n){return n.op.toString()+" {"+n.getFilters().map(Jx).join(" ,")+"}"}(t):"Filter"}class Eb extends dt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Tb extends dt{constructor(e,n){super(e,"in",n),this.keys=eE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ib extends dt{constructor(e,n){super(e,"not-in",n),this.keys=eE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class Pb extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zm(n)&&ql(n.arrayValue,this.value)}}class Sb extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ql(this.value.arrayValue,n)}}class Cb extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ql(this.value.arrayValue,n)}}class kb extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function Bv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new Ab(t,e,n,i,s,o,l)}function Um(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>pp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fo(i)).join(",")),e.ue=n}return e.ue}function Bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uv(t.startAt,e.startAt)&&Uv(t.endAt,e.endAt)}function mp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bb(t,e,n,i,s,o,l,h){return new Yh(t,e,n,i,s,o,l,h)}function Wm(t){return new Yh(t)}function Wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nb(t){return t.collectionGroup!==null}function _l(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new St(It.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new wh(o,i))}),n.has(It.keyField().canonicalString())||e.ce.push(new wh(It.keyField(),i))}return e.ce}function ei(t){const e=ge(t);return e.le||(e.le=Rb(e,_l(t))),e.le}function Rb(t,e){if(t.limitType==="F")return Bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new wh(s.field,o)});const n=t.endAt?new yh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new yh(t.startAt.position,t.startAt.inclusive):null;return Bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function gp(t,e,n){return new Yh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xh(t,e){return Bm(ei(t),ei(e))&&t.limitType===e.limitType}function tE(t){return`${Um(ei(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Jx(s)).join(", ")}]`),Qh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Fo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Fo(s)).join(",")),`Target(${i})`}(ei(t))}; limitType=${t.limitType})`}function Jh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of _l(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const g=zv(l,h,d);return l.inclusive?g<=0:g<0}(i.startAt,_l(i),s)||i.endAt&&!function(l,h,d){const g=zv(l,h,d);return l.inclusive?g>=0:g>0}(i.endAt,_l(i),s))}(t,e)}function Lb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nE(t){return(e,n)=>{let i=!1;for(const s of _l(t)){const o=Ob(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Ob(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),g=h.data.field(o);return d!==null&&g!==null?Vo(d,g):fe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return qx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Qe(oe.comparator);function Di(){return Db}const iE=new Qe(oe.comparator);function rl(...t){let e=iE;for(const n of t)e=e.insert(n.key,n);return e}function rE(t){let e=iE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Jr(){return vl()}function sE(){return vl()}function vl(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mb=new Qe(oe.comparator),jb=new St(oe.comparator);function Pe(...t){let e=jb;for(const n of t)e=e.add(n);return e}const Vb=new St(be);function Fb(){return Vb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function oE(t){return{integerValue:""+t}}function zb(t,e){return mb(e)?oE(e):Hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function Ub(t,e,n){return t instanceof Zl?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Vm(o)&&(o=Fm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Gl?lE(t,e):t instanceof Kl?uE(t,e):function(s,o){const l=aE(s,o),h=Hv(l)+Hv(s.Pe);return fp(l)&&fp(s.Pe)?oE(h):Hm(s.serializer,h)}(t,e)}function Bb(t,e,n){return t instanceof Gl?lE(t,e):t instanceof Kl?uE(t,e):n}function aE(t,e){return t instanceof xh?function(i){return fp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Zl extends ed{}class Gl extends ed{constructor(e){super(),this.elements=e}}function lE(t,e){const n=cE(e);for(const i of t.elements)n.some(s=>ii(s,i))||n.push(i);return{arrayValue:{values:n}}}class Kl extends ed{constructor(e){super(),this.elements=e}}function uE(t,e){let n=cE(e);for(const i of t.elements)n=n.filter(s=>!ii(s,i));return{arrayValue:{values:n}}}class xh extends ed{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hv(t){return tt(t.integerValue||t.doubleValue)}function cE(t){return zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.field=e,this.transform=n}}function Hb(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Gl&&s instanceof Gl||i instanceof Kl&&s instanceof Kl?jo(i.elements,s.elements,ii):i instanceof xh&&s instanceof xh?ii(i.Pe,s.Pe):i instanceof Zl&&s instanceof Zl}(t.transform,e.transform)}class $b{constructor(e,n){this.version=e,this.transformResults=n}}class ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class td{}function hE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fE(t.key,ti.none()):new hu(t.key,t.data,ti.none());{const n=t.data,i=wn.empty();let s=new St(It.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ws(t.key,i,new Dn(s.toArray()),ti.none())}}function qb(t,e,n){t instanceof hu?function(s,o,l){const h=s.value.clone(),d=qv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(s,o,l){if(!Vc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=qv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(dE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function yl(t,e,n,i){return t instanceof hu?function(o,l,h,d){if(!Vc(o.precondition,l))return h;const g=o.value.clone(),y=Zv(o.fieldTransforms,d,l);return g.setAll(y),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),null}(t,e,n,i):t instanceof ws?function(o,l,h,d){if(!Vc(o.precondition,l))return h;const g=Zv(o.fieldTransforms,d,l),y=l.data;return y.setAll(dE(o)),y.setAll(g),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,i):function(o,l,h){return Vc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function Zb(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=aE(i.transform,s||null);o!=null&&(n===null&&(n=wn.empty()),n.set(i.field,o))}return n||null}function $v(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&jo(i,s,(o,l)=>Hb(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends td{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ws extends td{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function qv(t,e,n){const i=new Map;Oe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,Bb(l,h,n[s]))}return i}function Zv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,Ub(o,l,e))}return i}class fE extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gb extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qb(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=sE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=hE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,i)=>$v(n,i))&&jo(this.baseMutations,e.baseMutations,(n,i)=>$v(n,i))}}class $m{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Oe(e.mutations.length===i.length);let s=function(){return Mb}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new $m(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ke;function Xb(t){switch(t){default:return fe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function pE(t){if(t===void 0)return Oi("GRPC error has no .code"),K.UNKNOWN;switch(t){case ot.OK:return K.OK;case ot.CANCELLED:return K.CANCELLED;case ot.UNKNOWN:return K.UNKNOWN;case ot.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ot.INTERNAL:return K.INTERNAL;case ot.UNAVAILABLE:return K.UNAVAILABLE;case ot.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ot.NOT_FOUND:return K.NOT_FOUND;case ot.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ot.ABORTED:return K.ABORTED;case ot.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ot.DATA_LOSS:return K.DATA_LOSS;default:return fe()}}(ke=ot||(ot={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new is([4294967295,4294967295],0);function Gv(t){const e=Jb().encode(t),n=new Vx;return n.update(e),new Uint8Array(n.digest())}function Kv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new is([n,i],0),new is([s,o],0)]}class qm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sl(`Invalid padding: ${n}`);if(i<0)throw new sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=is.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(is.fromNumber(i)));return s.compare(eN)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Gv(e),[i,s]=Kv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new qm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Gv(e),[i,s]=Kv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nd(me.min(),s,new Qe(be),Di(),Pe())}}class du{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new du(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class mE{constructor(e,n){this.targetId=e,this.me=n}}class gE{constructor(e,n,i=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Qv{constructor(){this.fe=0,this.ge=Xv(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),i=Pe();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:fe()}}),new du(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Xv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=Yv(),this.Qe=new Qe(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(mp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Ot.newNoDocument(l,me.min()))}else Oe(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const g=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=fs(i).toUint8Array()}catch(d){if(d instanceof Zx)return Mo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new qm(l,s,o)}catch(d){return Mo(d instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&mp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Ot.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Pe();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const g=this.Je(d);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new nd(e,n,this.Qe,this.ke,i);return this.ke=Di(),this.qe=Yv(),this.Qe=new Qe(be),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Qv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Yv(){return new Qe(oe.comparator)}function Xv(){return new Qe(oe.comparator)}const nN={asc:"ASCENDING",desc:"DESCENDING"},iN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rN={and:"AND",or:"OR"};class sN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _p(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function Eh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _E(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oN(t,e){return Eh(t,e.toTimestamp())}function ni(t){return Oe(!!t),me.fromTimestamp(function(n){const i=Sr(n);return new pt(i.seconds,i.nanos)}(t))}function Zm(t,e){return vp(t,e).canonicalString()}function vp(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vE(t){const e=He.fromString(t);return Oe(TE(e)),e}function yp(t,e){return Zm(t.databaseId,e.path)}function Jd(t,e){const n=vE(e);if(n.get(1)!==t.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(wE(n))}function yE(t,e){return Zm(t.databaseId,e)}function aN(t){const e=vE(t);return e.length===4?He.emptyPath():wE(e)}function wp(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wE(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jv(t,e,n){return{name:yp(t,e),fields:n.value.mapValue.fields}}function lN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(g,y){return g.useProto3Json?(Oe(y===void 0||typeof y=="string"),kt.fromBase64String(y||"")):(Oe(y===void 0||y instanceof Buffer||y instanceof Uint8Array),kt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const y=g.code===void 0?K.UNKNOWN:pE(g.code);return new se(y,g.message||"")}(l);n=new gE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Jd(t,i.document.name),o=ni(i.document.updateTime),l=i.document.createTime?ni(i.document.createTime):me.min(),h=new wn({mapValue:{fields:i.document.fields}}),d=Ot.newFoundDocument(s,o,l,h),g=i.targetIds||[],y=i.removedTargetIds||[];n=new Fc(g,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Jd(t,i.document),o=i.readTime?ni(i.readTime):me.min(),l=Ot.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Fc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Jd(t,i.document),o=i.removedTargetIds||[];n=new Fc([],o,s,null)}else{if(!("filter"in e))return fe();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new Yb(s,o),h=i.targetId;n=new mE(h,l)}}return n}function uN(t,e){let n;if(e instanceof hu)n={update:Jv(t,e.key,e.value)};else if(e instanceof fE)n={delete:yp(t,e.key)};else if(e instanceof ws)n={update:Jv(t,e.key,e.data),updateMask:vN(e.fieldMask)};else{if(!(e instanceof Gb))return fe();n={verify:yp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Zl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Gl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Kl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof xh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw fe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:oN(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function cN(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?ni(s.updateTime):ni(o);return l.isEqual(me.min())&&(l=ni(o)),new $b(l,s.transformResults||[])}(n,e))):[]}function hN(t,e){return{documents:[yE(t,e.path)]}}function dN(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yE(t,s);const o=function(g){if(g.length!==0)return EE(ri.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(g){if(g.length!==0)return g.map(y=>function(I){return{field:no(I.field),direction:mN(I.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=_p(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{_t:n,parent:s}}function fN(t){let e=aN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Oe(i===1);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(x){const I=xE(x);return I instanceof ri&&Yx(I)?I.getFilters():[I]}(n.where));let l=[];n.orderBy&&(l=function(x){return x.map(I=>function(M){return new wh(io(M.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let h=null;n.limit&&(h=function(x){let I;return I=typeof x=="object"?x.value:x,Qh(I)?null:I}(n.limit));let d=null;n.startAt&&(d=function(x){const I=!!x.before,O=x.values||[];return new yh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(x){const I=!x.before,O=x.values||[];return new yh(O,I)}(n.endAt)),bb(e,s,l,o,h,"F",d,g)}function pN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=io(n.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=io(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=io(n.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=io(n.unaryFilter.field);return dt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(io(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ri.create(n.compositeFilter.filters.map(i=>xE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function mN(t){return nN[t]}function gN(t){return iN[t]}function _N(t){return rN[t]}function no(t){return{fieldPath:t.canonicalString()}}function io(t){return It.fromServerFormat(t.fieldPath)}function EE(t){return t instanceof dt?function(n){if(n.op==="=="){if(Fv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(Vv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(Vv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:gN(n.op),value:n.value}}}(t):t instanceof ri?function(n){const i=n.getFilters().map(s=>EE(s));return i.length===1?i[0]:{compositeFilter:{op:_N(n.op),filters:i}}}(t):fe()}function vN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,i,s,o=me.min(),l=me.min(),h=kt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.ct=e}}function wN(t){const e=fN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.un=new EN}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Pr.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class EN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new St(He.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new St(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zo(0)}static kn(){return new zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&yl(i.mutation,s,Dn.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const s=Jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=rl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Di();const l=vl(),h=function(){return vl()}();return n.forEach((d,g)=>{const y=i.get(g.key);s.has(g.key)&&(y===void 0||y.mutation instanceof ws)?o=o.insert(g.key,g):y!==void 0?(l.set(g.key,y.mutation.getFieldMask()),yl(y.mutation,g,y.mutation.getFieldMask(),pt.now())):l.set(g.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((g,y)=>l.set(g,y)),n.forEach((g,y)=>{var x;return h.set(g,new IN(y,(x=l.get(g))!==null&&x!==void 0?x:null))}),h))}recalculateAndSaveOverlays(e,n){const i=vl();let s=new Qe((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const g=n.get(d);if(g===null)return;let y=i.get(d)||Dn.empty();y=h.applyToLocalView(g,y),i.set(d,y);const x=(s.get(h.batchId)||Pe()).add(d);s=s.insert(h.batchId,x)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),g=d.key,y=d.value,x=sE();y.forEach(I=>{if(!o.has(I)){const O=hE(n.get(I),i.get(I));O!==null&&x.set(I,O),o=o.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(e,g,x))}return G.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):G.resolve(Jr());let h=-1,d=o;return l.next(g=>G.forEach(g,(y,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next(I=>{d=d.insert(y,I)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,d,g,Pe())).next(y=>({batchId:h,changes:rE(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let s=rl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=rl();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const g=function(x,I){return new Yh(I,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,i,s).next(y=>{y.forEach((x,I)=>{l=l.insert(x,I)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,g)=>{const y=g.getKey();l.get(y)===null&&(l=l.insert(y,Ot.newInvalidDocument(y)))});let h=rl();return l.forEach((d,g)=>{const y=o.get(d);y!==void 0&&yl(y.mutation,g,Dn.empty(),pt.now()),Jh(n,g)&&(h=h.insert(d,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ni(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:wN(s.bundledQuery),readTime:ni(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.overlays=new Qe(oe.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Jr();return G.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const s=Jr(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,g=d.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Qe((g,y)=>g-y);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let y=o.get(g.largestBatchId);y===null&&(y=Jr(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Jr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,y)=>h.set(g,y)),!(h.size()>=s)););return G.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Qb(n,i));let o=this.Ir.get(n);o===void 0&&(o=Pe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.Tr=new St(vt.Er),this.dr=new St(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new vt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new He([])),i=new vt(n,e),s=new vt(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new He([])),i=new vt(n,e),s=new vt(n,e+1);let o=Pe();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new vt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(vt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Kb(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new vt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new vt(n,0),s=new vt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(be);return n.forEach(s=>{const o=new vt(s,0),l=new vt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new vt(new oe(o),0);let h=new St(be);return this.br.forEachWhile(d=>{const g=d.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(h=h.add(d.wr)),!0)},l),G.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(n.mutations,s=>{const o=new vt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new vt(n,0),s=this.br.firstAfterOrEqual(i);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.Mr=e,this.docs=function(){return new Qe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let i=Di();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ot.newInvalidDocument(s))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Di();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:g,value:{document:y}}=d.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||hb(cb(y),i)<=0||(s.has(y.key)||Jh(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,s){fe()}Or(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new NN(this)}getSize(e){return G.resolve(this.size)}}class NN extends TN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.persistence=e,this.Nr=new ea(n=>Um(n),Bm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gm,this.targetCount=0,this.kr=zo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jm(0),this.Kr=!1,this.Kr=!0,this.$r=new kN,this.referenceDelegate=e(this),this.Ur=new RN(this),this.indexManager=new xN,this.remoteDocumentCache=function(s){return new bN(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new yN(n),this.Gr=new SN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new AN(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const s=new ON(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class ON extends fb{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Jr=new Gm,this.Yr=null}static Zr(e){return new Km(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{const s=oe.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Pe(),s=Pe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Qm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SC()?8:pb(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new DN;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Ka()<=Se.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Ka()<=Se.DEBUG&&ie("QueryEngine","Query:",to(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Ka()<=Se.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):G.resolve())}Yi(e,n){if(Wv(n))return G.resolve(null);let i=ei(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gp(n,null,"F"),i=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Pe(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const g=this.ts(n,h);return this.ns(n,g,l,d.readTime)?this.Yi(e,gp(n,null,"F")):this.rs(e,g,n,d)}))})))}Zi(e,n,i,s){return Wv(n)||s.isEqual(me.min())?G.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?G.resolve(null):(Ka()<=Se.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),to(n)),this.rs(e,l,n,ub(s,-1)).next(h=>h))})}ts(e,n){let i=new St(nE(e));return n.forEach((s,o)=>{Jh(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return Ka()<=Se.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",to(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(be),this._s=new ea(o=>Um(o),Bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function VN(t,e,n,i){return new jN(t,e,n,i)}async function IE(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Pe();for(const g of s){l.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(g=>({hs:g,removedBatchIds:l,addedBatchIds:h}))})})}function FN(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,g,y){const x=g.batch,I=x.keys();let O=G.resolve();return I.forEach(M=>{O=O.next(()=>y.getEntry(d,M)).next(j=>{const U=g.docVersions.get(M);Oe(U!==null),j.version.compareTo(U)<0&&(x.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))})}),O.next(()=>h.mutationQueue.removeMutationBatch(d,x))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Pe();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(d=d.add(h.batch.mutations[g].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function PE(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zN(t,e){const n=ge(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((y,x)=>{const I=s.get(x);if(!I)return;h.push(n.Ur.removeMatchingKeys(o,y.removedDocuments,x).next(()=>n.Ur.addMatchingKeys(o,y.addedDocuments,x)));let O=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?O=O.withResumeToken(kt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):y.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(y.resumeToken,i)),s=s.insert(x,O),function(j,U,A){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(I,O,y)&&h.push(n.Ur.updateTargetData(o,O))});let d=Di(),g=Pe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(UN(o,l,e.documentUpdates).next(y=>{d=y.Ps,g=y.Is})),!i.isEqual(me.min())){const y=n.Ur.getLastRemoteSnapshotVersion(o).next(x=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return G.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,g)).next(()=>d)}).then(o=>(n.os=s,o))}function UN(t,e,n){let i=Pe(),s=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Di();return n.forEach((h,d)=>{const g=o.get(h);d.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(me.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||d.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function BN(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WN(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,G.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new ur(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function xp(t,e,n){const i=ge(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!cu(l))throw l;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function ey(t,e,n){const i=ge(t);let s=me.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,g,y){const x=ge(d),I=x._s.get(y);return I!==void 0?G.resolve(x.os.get(I)):x.Ur.getTargetData(g,y)}(i,l,ei(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:me.min(),n?o:Pe())).next(h=>(HN(i,Lb(e),h),{documents:h,Ts:o})))}function HN(t,e,n){let i=t.us.get(e)||me.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class ty{constructor(){this.activeTargetIds=Fb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $N{constructor(){this.so=new ty,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ty,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function ef(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class KN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=ef(),d=this.xo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,o,l),this.No(n,d,g,s).then(y=>(ie("RestConnection",`Received RPC '${n}' ${h}: `,y),y),y=>{throw Mo("RestConnection",`RPC '${n}' ${h} failed with error: `,y,"url: ",d,"request:",s),y})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=ZN[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=ef();return new Promise((l,h)=>{const d=new Fx;d.setWithCredentials(!0),d.listenOnce(zx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Mc.NO_ERROR:const y=d.getResponseJson();ie(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case Mc.TIMEOUT:ie(Nt,`RPC '${e}' ${o} timed out`),h(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const x=d.getStatus();if(ie(Nt,`RPC '${e}' ${o} failed with status:`,x,"response text:",d.getResponseText()),x>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(U){const A=U.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(A)>=0?A:K.UNKNOWN}(O.status);h(new se(M,O.message))}else h(new se(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new se(K.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ie(Nt,`RPC '${e}' ${o} completed.`)}});const g=JSON.stringify(s);ie(Nt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",g,i,15)})}Bo(e,n,i){const s=ef(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Wx(),h=Bx(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=o.join("");ie(Nt,`Creating RPC '${e}' stream ${s}: ${y}`,d);const x=l.createWebChannel(y,d);let I=!1,O=!1;const M=new GN({Io:U=>{O?ie(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(I||(ie(Nt,`Opening RPC '${e}' stream ${s} transport.`),x.open(),I=!0),ie(Nt,`RPC '${e}' stream ${s} sending:`,U),x.send(U))},To:()=>x.close()}),j=(U,A,P)=>{U.listen(A,R=>{try{P(R)}catch(H){setTimeout(()=>{throw H},0)}})};return j(x,il.EventType.OPEN,()=>{O||(ie(Nt,`RPC '${e}' stream ${s} transport opened.`),M.yo())}),j(x,il.EventType.CLOSE,()=>{O||(O=!0,ie(Nt,`RPC '${e}' stream ${s} transport closed`),M.So())}),j(x,il.EventType.ERROR,U=>{O||(O=!0,Mo(Nt,`RPC '${e}' stream ${s} transport errored:`,U),M.So(new se(K.UNAVAILABLE,"The operation could not be completed")))}),j(x,il.EventType.MESSAGE,U=>{var A;if(!O){const P=U.data[0];Oe(!!P);const R=P,H=R.error||((A=R[0])===null||A===void 0?void 0:A.error);if(H){ie(Nt,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let J=function(S){const b=ot[S];if(b!==void 0)return pE(b)}(Y),C=H.message;J===void 0&&(J=K.INTERNAL,C="Unknown error status: "+Y+" with message "+H.message),O=!0,M.So(new se(J,C)),x.close()}else ie(Nt,`RPC '${e}' stream ${s} received:`,P),M.bo(P)}}),j(h,Ux.STAT_EVENT,U=>{U.stat===hp.PROXY?ie(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===hp.NOPROXY&&ie(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new sN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new SE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Oi(n.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new se(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QN extends CE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lN(this.serializer,e),i=function(o){if(!("targetChange"in o))return me.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?me.min():l.readTime?ni(l.readTime):me.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=wp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=mp(d)?{documents:hN(o,d)}:{query:dN(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=_E(o,l.resumeToken);const g=_p(o,l.expectedCount);g!==null&&(h.expectedCount=g)}else if(l.snapshotVersion.compareTo(me.min())>0){h.readTime=Eh(o,l.snapshotVersion.toTimestamp());const g=_p(o,l.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const i=pN(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=wp(this.serializer),n.removeTarget=e,this.a_(n)}}class YN extends CE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cN(e.writeResults,e.commitTime),i=ni(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=wp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>uN(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,vp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(K.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,vp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oi(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{xs(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const g=ge(d);g.L_.add(4),await fu(g),g.q_.set("Unknown"),g.L_.delete(4),await rd(g)}(this))})}),this.q_=new JN(i,s)}}async function rd(t){if(xs(t))for(const e of t.B_)await e(!0)}async function fu(t){for(const e of t.B_)await e(!1)}function kE(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),eg(n)?Jm(n):ta(n).r_()&&Xm(n,e))}function Ym(t,e){const n=ge(t),i=ta(n);n.N_.delete(e),i.r_()&&AE(n,e),n.N_.size===0&&(i.r_()?i.o_():xs(n)&&n.q_.set("Unknown"))}function Xm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ta(t).A_(e)}function AE(t,e){t.Q_.xe(e),ta(t).R_(e)}function Jm(t){t.Q_=new tN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ta(t).start(),t.q_.v_()}function eg(t){return xs(t)&&!ta(t).n_()&&t.N_.size>0}function xs(t){return ge(t).L_.size===0}function bE(t){t.Q_=void 0}async function tR(t){t.q_.set("Online")}async function nR(t){t.N_.forEach((e,n)=>{Xm(t,e)})}async function iR(t,e){bE(t),eg(t)?(t.q_.M_(e),Jm(t)):t.q_.set("Unknown")}async function rR(t,e,n){if(t.q_.set("Online"),e instanceof gE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Th(t,i)}else if(e instanceof Fc?t.Q_.Ke(e):e instanceof mE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const i=await PE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(g);y&&o.N_.set(g,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,g)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(kt.EMPTY_BYTE_STRING,y.snapshotVersion)),AE(o,d);const x=new ur(y.target,d,g,y.sequenceNumber);Xm(o,x)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await Th(t,i)}}async function Th(t,e,n){if(!cu(e))throw e;t.L_.add(1),await fu(t),t.q_.set("Offline"),n||(n=()=>PE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await rd(t)})}function NE(t,e){return e().catch(n=>Th(t,n,e))}async function sd(t){const e=ge(t),n=Cr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sR(e);)try{const s=await BN(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,oR(e,s)}catch(s){await Th(e,s)}RE(e)&&LE(e)}function sR(t){return xs(t)&&t.O_.length<10}function oR(t,e){t.O_.push(e);const n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function RE(t){return xs(t)&&!Cr(t).n_()&&t.O_.length>0}function LE(t){Cr(t).start()}async function aR(t){Cr(t).p_()}async function lR(t){const e=Cr(t);for(const n of t.O_)e.m_(n.mutations)}async function uR(t,e,n){const i=t.O_.shift(),s=$m.from(i,e,n);await NE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sd(t)}async function cR(t,e){e&&Cr(t).V_&&await async function(i,s){if(function(l){return Xb(l)&&l!==K.ABORTED}(s.code)){const o=i.O_.shift();Cr(i).s_(),await NE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await sd(i)}}(t,e),RE(t)&&LE(t)}async function iy(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=xs(n);n.L_.add(3),await fu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await rd(n)}async function hR(t,e){const n=ge(t);e?(n.L_.delete(2),await rd(n)):e||(n.L_.add(2),await fu(n),n.q_.set("Unknown"))}function ta(t){return t.K_||(t.K_=function(n,i,s){const o=ge(n);return o.w_(),new QN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tR.bind(null,t),Ro:nR.bind(null,t),mo:iR.bind(null,t),d_:rR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),eg(t)?Jm(t):t.q_.set("Unknown")):(await t.K_.stop(),bE(t))})),t.K_}function Cr(t){return t.U_||(t.U_=function(n,i,s){const o=ge(n);return o.w_(),new YN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aR.bind(null,t),mo:cR.bind(null,t),f_:lR.bind(null,t),g_:uR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await sd(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new tg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(t,e){if(Oi("AsyncQueue",`${e}: ${t}`),cu(t))return new se(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=rl(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.W_=new Qe(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Uo{constructor(e,n,i,s,o,l,h,d,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Uo(e,n,Co.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fR{constructor(){this.queries=sy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=ge(n),o=s.queries;s.queries=sy(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new se(K.ABORTED,"Firestore shutting down"))}}function sy(){return new ea(t=>tE(t),Xh)}async function pR(t,e){const n=ge(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new dR,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=ng(l,`Initialization of query '${to(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&ig(n)}async function mR(t,e){const n=ge(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function gR(t,e){const n=ge(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&ig(n)}function _R(t,e,n){const i=ge(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function ig(t){t.Y_.forEach(e=>{e.next()})}var Ep,oy;(oy=Ep||(Ep={})).ea="default",oy.Cache="cache";class vR{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.key=e}}class DE{constructor(e){this.key=e}}class yR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=nE(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new ry,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,x)=>{const I=s.get(y),O=Jh(this.query,x)?x:null,M=!!I&&this.mutatedKeys.has(I.key),j=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;I&&O?I.data.isEqual(O.data)?M!==j&&(i.track({type:3,doc:O}),U=!0):this.ga(I,O)||(i.track({type:2,doc:O}),U=!0,(d&&this.Aa(O,d)>0||g&&this.Aa(O,g)<0)&&(h=!0)):!I&&O?(i.track({type:0,doc:O}),U=!0):I&&!O&&(i.track({type:1,doc:I}),U=!0,(d||g)&&(h=!0)),U&&(O?(l=l.add(O),o=j?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((y,x)=>function(O,M){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return j(O)-j(M)}(y.type,x.type)||this.Aa(y.doc,x.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,g=d!==this.Ea;return this.Ea=d,l.length!==0||g?{snapshot:new Uo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ry,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new DE(i))}),this.da.forEach(i=>{e.has(i)||n.push(new OE(i))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Uo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class xR{constructor(e){this.key=e,this.va=!1}}class ER{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new ea(h=>tE(h),Xh),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(oe.comparator),this.Na=new Map,this.La=new Gm,this.Ba={},this.ka=new Map,this.qa=zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TR(t,e,n=!0){const i=UE(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await ME(i,e,n,!0),s}async function IR(t,e){const n=UE(t);await ME(n,e,!0,!1)}async function ME(t,e,n,i){const s=await WN(t.localStore,ei(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await PR(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&kE(t.remoteStore,s),h}async function PR(t,e,n,i,s){t.Ka=(x,I,O)=>async function(j,U,A,P){let R=U.view.ma(A);R.ns&&(R=await ey(j.localStore,U.query,!1).then(({documents:C})=>U.view.ma(C,R)));const H=P&&P.targetChanges.get(U.targetId),Y=P&&P.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(R,j.isPrimaryClient,H,Y);return ly(j,U.targetId,J.wa),J.snapshot}(t,x,I,O);const o=await ey(t.localStore,e,!0),l=new yR(e,o.Ts),h=l.ma(o.documents),d=du.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),g=l.applyChanges(h,t.isPrimaryClient,d);ly(t,n,g.wa);const y=new wR(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),g.snapshot}async function SR(t,e,n){const i=ge(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Xh(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await xp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ym(i.remoteStore,s.targetId),Tp(i,s.targetId)}).catch(uu)):(Tp(i,s.targetId),await xp(i.localStore,s.targetId,!0))}async function CR(t,e){const n=ge(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ym(n.remoteStore,i.targetId))}async function kR(t,e,n){const i=DR(t);try{const s=await function(l,h){const d=ge(l),g=pt.now(),y=h.reduce((O,M)=>O.add(M.key),Pe());let x,I;return d.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Di(),j=Pe();return d.cs.getEntries(O,y).next(U=>{M=U,M.forEach((A,P)=>{P.isValidDocument()||(j=j.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(O,M)).next(U=>{x=U;const A=[];for(const P of h){const R=Zb(P,x.get(P.key).overlayedDocument);R!=null&&A.push(new ws(P.key,R,Gx(R.value.mapValue),ti.exists(!0)))}return d.mutationQueue.addMutationBatch(O,g,A,h)}).next(U=>{I=U;const A=U.applyToLocalDocumentSet(x,j);return d.documentOverlayCache.saveOverlays(O,U.batchId,A)})}).then(()=>({batchId:I.batchId,changes:rE(x)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let g=l.Ba[l.currentUser.toKey()];g||(g=new Qe(be)),g=g.insert(h,d),l.Ba[l.currentUser.toKey()]=g}(i,s.batchId,n),await pu(i,s.changes),await sd(i.remoteStore)}catch(s){const o=ng(s,"Failed to persist write");n.reject(o)}}async function jE(t,e){const n=ge(t);try{const i=await zN(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Oe(l.va):s.removedDocuments.size>0&&(Oe(l.va),l.va=!1))}),await pu(n,i,e)}catch(i){await uu(i)}}function ay(t,e,n){const i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ge(l);d.onlineState=h;let g=!1;d.queries.forEach((y,x)=>{for(const I of x.j_)I.Z_(h)&&(g=!0)}),g&&ig(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function AR(t,e,n){const i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Qe(oe.comparator);l=l.insert(o,Ot.newNoDocument(o,me.min()));const h=Pe().add(o),d=new nd(me.min(),new Map,new Qe(be),l,h);await jE(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),rg(i)}else await xp(i.localStore,e,!1).then(()=>Tp(i,e,n)).catch(uu)}async function bR(t,e){const n=ge(t),i=e.batch.batchId;try{const s=await FN(n.localStore,e);FE(n,i,null),VE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pu(n,s)}catch(s){await uu(s)}}async function NR(t,e,n){const i=ge(t);try{const s=await function(l,h){const d=ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.mutationQueue.lookupMutationBatch(g,h).next(x=>(Oe(x!==null),y=x.keys(),d.mutationQueue.removeMutationBatch(g,x))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>d.localDocuments.getDocuments(g,y))})}(i.localStore,e);FE(i,e,n),VE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await pu(i,s)}catch(s){await uu(s)}}function VE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function FE(t,e,n){const i=ge(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||zE(t,i)})}function zE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ym(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rg(t))}function ly(t,e,n){for(const i of n)i instanceof OE?(t.La.addReference(i.key,e),RR(t,i)):i instanceof DE?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||zE(t,i.key)):fe()}function RR(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(i),rg(t))}function rg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(He.fromString(e)),i=t.qa.next();t.Na.set(i,new xR(n)),t.Oa=t.Oa.insert(n,i),kE(t.remoteStore,new ur(ei(Wm(n.path)),i,"TargetPurposeLimboResolution",jm.oe))}}async function pu(t,e,n){const i=ge(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(g=>{var y;if((g||n)&&i.isPrimaryClient){const x=g?!g.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,x?"current":"not-current")}if(g){s.push(g);const x=Qm.Wi(d.targetId,g);o.push(x)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,g){const y=ge(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>G.forEach(g,I=>G.forEach(I.$i,O=>y.persistence.referenceDelegate.addReference(x,I.targetId,O)).next(()=>G.forEach(I.Ui,O=>y.persistence.referenceDelegate.removeReference(x,I.targetId,O)))))}catch(x){if(!cu(x))throw x;ie("LocalStore","Failed to update sequence numbers: "+x)}for(const x of g){const I=x.targetId;if(!x.fromCache){const O=y.os.get(I),M=O.snapshotVersion,j=O.withLastLimboFreeSnapshotVersion(M);y.os=y.os.insert(I,j)}}}(i.localStore,o))}async function LR(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await IE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new se(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pu(n,i.hs)}}function OR(t,e){const n=ge(t),i=n.Na.get(e);if(i&&i.va)return Pe().add(i.key);{let s=Pe();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function UE(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AR.bind(null,e),e.Ca.d_=gR.bind(null,e.eventManager),e.Ca.$a=_R.bind(null,e.eventManager),e}function DR(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NR.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return VN(this.persistence,new MN,e.initialUser,this.serializer)}Ga(e){return new LN(Km.Zr,this.serializer)}Wa(e){return new $N}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ay(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LR.bind(null,this.syncEngine),await hR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fR}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),i=function(o){return new KN(o)}(e.databaseInfo);return function(o,l,h,d){return new XN(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new eR(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>ay(this.syncEngine,n,0),function(){return ny.D()?new ny:new qN}())}createSyncEngine(e,n){return function(s,o,l,h,d,g,y){const x=new ER(s,o,l,h,d,g);return y&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ge(s);ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await fu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Rt.UNAUTHENTICATED,this.clientId=$x.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ng(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await IE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VR(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>iy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>iy(e.remoteStore,s)),t._onlineComponents=e}async function VR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new Ih)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await nf(t,new Ih);return t._offlineComponents}async function BE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await uy(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await uy(t,new Ip))),t._onlineComponents}function FR(t){return BE(t).then(e=>e.syncEngine)}async function zR(t){const e=await BE(t),n=e.eventManager;return n.onListen=TR.bind(null,e.syncEngine),n.onUnlisten=SR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CR.bind(null,e.syncEngine),n}function UR(t,e,n={}){const i=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,g){const y=new MR({next:I=>{y.Za(),l.enqueueAndForget(()=>mR(o,x));const O=I.docs.has(h);!O&&I.fromCache?g.reject(new se(K.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&d&&d.source==="server"?g.reject(new se(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),x=new vR(Wm(h.path),y,{includeMetadataChanges:!0,_a:!0});return pR(o,x)}(await zR(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,n){if(!n)throw new se(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BR(t,e,n,i){if(e===!0&&i===!0)throw new se(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hy(t){if(!oe.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dy(t){if(oe.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sg(t);throw new se(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new eb;switch(i.type){case"firstParty":return new rb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=cy.get(n);i&&(ie("ComponentProvider","Removing Datastore"),cy.delete(n),i.terminate())}(this),Promise.resolve()}}function WR(t,e,n,i={}){var s;const o=(t=Bo(t,od))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Rt.MOCK_USER;else{h=yC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rt(g)}t._authCredentials=new tb(new Hx(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new og(this.firestore,e,this._query)}}class on{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Er extends og{constructor(e,n,i){super(e,n,Wm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new oe(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function HR(t,e,...n){if(t=Xt(t),HE("collection","path",e),t instanceof od){const i=He.fromString(e,...n);return dy(i),new Er(t,null,i)}{if(!(t instanceof on||t instanceof Er))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return dy(i),new Er(t.firestore,null,i)}}function Wo(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=$x.newId()),HE("doc","path",e),t instanceof od){const i=He.fromString(e,...n);return hy(i),new on(t,null,new oe(i))}{if(!(t instanceof on||t instanceof Er))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return hy(i),new on(t.firestore,t instanceof Er?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new SE(this,"async_queue_retry"),this.Vu=()=>{const i=tf();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cu(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Oi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=tg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ad extends od{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new py,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new py(e),this._firestoreClient=void 0,await e}}}function $R(t,e){const n=typeof t=="object"?t:ex(),i=typeof t=="string"?t:"(default)",s=Pm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=_C("firestore");o&&WR(s,...o)}return s}function $E(t){if(t._terminated)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qR(t),t._firestoreClient}function qR(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,g,y){return new _b(h,d,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,WE(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new jR(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(kt.fromBase64String(e))}catch(n){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ho(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=/^__.*__$/;class GR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}function qE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class hg{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qE(this.Cu)&&ZR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KR{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||id(e)}Qu(e,n,i,s=!1){return new hg({Cu:e,methodName:n,qu:i,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZE(t){const e=t._freezeSettings(),n=id(t._databaseId);return new KR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GE(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);XE("Data must be an object, but it was:",l,i);const h=QE(i,l);let d,g;if(o.merge)d=new Dn(l.fieldMask),g=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const x of o.mergeFields){const I=QR(e,x,n);if(!l.contains(I))throw new se(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);XR(y,I)||y.push(I)}d=new Dn(y),g=l.fieldTransforms.filter(x=>d.covers(x.field))}else d=null,g=l.fieldTransforms;return new GR(new wn(h),d,g)}class dg extends lg{_toFieldTransform(e){return new Wb(e.path,new Zl)}isEqual(e){return e instanceof dg}}function KE(t,e){if(YE(t=Xt(t)))return XE("Unsupported field value:",e,t),QE(t,e);if(t instanceof lg)return function(i,s){if(!qE(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=KE(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zb(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=pt.fromDate(i);return{timestampValue:Eh(s.serializer,o)}}if(i instanceof pt){const o=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Eh(s.serializer,o)}}if(i instanceof ug)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ho)return{bytesValue:_E(s.serializer,i._byteString)};if(i instanceof on){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Zm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof cg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return Hm(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${sg(i)}`)}(t,e)}function QE(t,e){const n={};return qx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(t,(i,s)=>{const o=KE(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function YE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof ug||t instanceof Ho||t instanceof on||t instanceof lg||t instanceof cg)}function XE(t,e,n){if(!YE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=sg(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function QR(t,e,n){if((e=Xt(e))instanceof ag)return e._internalPath;if(typeof e=="string")return JE(t,e);throw Ph("Field path arguments must be of type string or ",t,!1,void 0,n)}const YR=new RegExp("[~\\*/\\[\\]]");function JE(t,e,n){if(e.search(YR)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ag(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ph(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new se(K.INVALID_ARGUMENT,h+t+d)}function XR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JR extends eT{data(){return super.data()}}function tT(t,e){return typeof e=="string"?JE(t,e):e instanceof ag?e._internalPath:e._delegate._internalPath}class eL{convertValue(e,n="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jo(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new cg(o)}convertGeoPoint(e){return new ug(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Fm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);Oe(TE(i));const s=new $l(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return s.isEqual(n)||Oi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iT extends eT{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(tT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class nL extends iT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){t=Bo(t,on);const e=Bo(t.firestore,ad);return UR($E(e),t._key).then(n=>sL(e,t,n))}class iL extends eL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function my(t,e,n){t=Bo(t,on);const i=Bo(t.firestore,ad),s=nT(t.converter,e);return rT(i,[GE(ZE(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ti.none())])}function rL(t,e){const n=Bo(t.firestore,ad),i=Wo(t),s=nT(t.converter,e);return rT(n,[GE(ZE(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,ti.exists(!1))]).then(()=>i)}function rT(t,e){return function(i,s){const o=new xr;return i.asyncQueue.enqueueAndForget(async()=>kR(await FR(i),s,o)),o.promise}($E(t),e)}function sL(t,e,n){const i=n.docs.get(e._key),s=new iL(t);return new iT(t,s,e._key,i,new tL(n.hasPendingWrites,n.fromCache),e.converter)}function Sh(){return new dg("serverTimestamp")}(function(e,n=!0){(function(s){Xo=s})(Qo),Do(new us("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ad(new nb(i.getProvider("auth-internal")),new ob(i.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(g.options.projectId,y)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),wr(Lv,"4.7.3",e),wr(Lv,"4.7.3","esm2017")})();var oL="firebase",aL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(oL,aL,"app");const lL={apiKey:"AIzaSyBtSj56p_qzu7ENoMDmwLbP3EkBANKzads",authDomain:"gobike26.firebaseapp.com",projectId:"gobike26",storageBucket:"gobike26.firebasestorage.app",messagingSenderId:"721691769363",appId:"1:721691769363:web:74f064472daca28d009de6"},sT=Jw(lL),ms=XA(sT),$o=$R(sT),oT=$.createContext(null);function uL({children:t}){const[e,n]=$.useState(null),[i,s]=$.useState(!0);$.useEffect(()=>{const l=Bk(ms,async h=>{if(h){const d=await fg(Wo($o,"users",h.uid));d.exists()&&n({uid:h.uid,...d.data()})}else n(null);s(!1)});return()=>l()},[]);const o=async()=>{await ms.signOut(),n(null)};return i?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-3xl mb-2",children:""}),p.jsx("p",{className:"text-xs text-gray-400",children:"Loading..."})]})}):p.jsx(oT.Provider,{value:{user:e,logout:o},children:t})}const na=()=>$.useContext(oT);function cL(){const t=zn();return p.jsxs("div",{className:"min-h-screen bg-dark flex flex-col overflow-hidden relative",children:[p.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-primary-500 rounded-full opacity-10 blur-3xl -translate-y-1/2 translate-x-1/2"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-primary-400 rounded-full opacity-10 blur-3xl translate-y-1/2 -translate-x-1/2"}),p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-6 text-center pt-16 pb-8",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"w-24 h-24 bg-primary-500 rounded-3xl flex items-center justify-center shadow-primary mb-4",children:p.jsx("span",{className:"text-5xl",children:""})}),p.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-primary-300 rounded-full opacity-60 animate-ping-slow"})]}),p.jsxs("h1",{className:"text-5xl font-display font-black text-white mb-2 tracking-tight",children:["Go",p.jsx("span",{className:"text-primary-500",children:"bike"})]}),p.jsx("p",{className:"text-gray-400 text-sm font-body mb-2",children:"Myanmar's Fast Delivery Service"}),p.jsx("p",{className:"text-gray-500 text-xs font-body",children:"    "}),p.jsx("div",{className:"flex gap-8 mt-10 mb-10",children:[{value:"500+",label:"Riders"},{value:"10K+",label:"Deliveries"},{value:"4.8",label:"Rating"}].map(e=>p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-2xl font-display font-black text-primary-400",children:e.value}),p.jsx("p",{className:"text-xs text-gray-500 font-body",children:e.label})]},e.label))}),p.jsx("div",{className:"grid grid-cols-2 gap-3 w-full max-w-xs mb-10",children:[{icon:"",text:"Real-time Tracking"},{icon:"",text:"Fast Delivery"},{icon:"",text:"Secure Payment"},{icon:"",text:"24/7 Support"}].map(e=>p.jsxs("div",{className:"bg-white/5 rounded-2xl p-3 flex items-center gap-2",children:[p.jsx("span",{className:"text-lg",children:e.icon}),p.jsx("span",{className:"text-xs text-gray-300 font-body",children:e.text})]},e.text))})]}),p.jsxs("div",{className:"px-6 pb-10 space-y-3",children:[p.jsx("button",{onClick:()=>t("/signup"),className:"w-full bg-primary-500 text-white font-display font-bold py-4 rounded-2xl shadow-primary text-base active:scale-95 transition-all",children:" "}),p.jsx("button",{onClick:()=>t("/login"),className:"w-full bg-white/10 text-white font-display font-semibold py-4 rounded-2xl text-base active:scale-95 transition-all",children:"Login "}),p.jsx("p",{className:"text-center text-xs text-gray-600 font-body",children:"Gobike  2024  Myanmar"})]})]})}function hL(){const[t,e]=$.useState({name:"",email:"",phone:"",password:"",role:"customer"}),[n,i]=$.useState(!1),[s,o]=$.useState(""),l=zn(),h=[{value:"customer",icon:"",label:"Customer"},{value:"rider",icon:"",label:"Rider"}],d=async g=>{g.preventDefault(),i(!0),o("");try{const{user:y}=await Vk(ms,t.email,t.password);await my(Wo($o,"users",y.uid),{name:t.name,email:t.email,phone:t.phone,role:t.role,status:"active",createdAt:Sh()}),t.role==="rider"&&await my(Wo($o,"riders",y.uid),{name:t.name,phone:t.phone,isOnline:!1,isAvailable:!1,currentLocation:null,coinBalance:0,totalEarned:0,totalCommission:0,rating:5,totalDeliveries:0,telegramChatId:null,vehicleType:"bike",lastUpdated:Sh()}),l(`/${t.role}`)}catch(y){o(y.message)}finally{i(!1)}};return p.jsxs("div",{className:"min-h-screen bg-surface flex flex-col",children:[p.jsxs("div",{className:"bg-dark px-6 pt-12 pb-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-primary-500 rounded-full opacity-15 blur-2xl -translate-y-1/2 translate-x-1/2"}),p.jsx("button",{onClick:()=>l("/"),className:"text-gray-400 text-sm mb-4 block",children:" Back"}),p.jsx("h1",{className:"text-3xl font-display font-black text-white",children:"Sign Up"}),p.jsx("p",{className:"text-gray-400 text-sm font-body mt-1",children:"Gobike "})]}),p.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:""}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(g=>p.jsxs("button",{type:"button",onClick:()=>e({...t,role:g.value}),className:`py-3 rounded-2xl flex flex-col items-center gap-1 border-2 transition-all
                  ${t.role===g.value?"border-primary-500 bg-primary-500 text-white shadow-primary":"border-gray-200 bg-white text-gray-600"}`,children:[p.jsx("span",{className:"text-xl",children:g.icon}),p.jsx("span",{className:"text-xs font-semibold",children:g.label})]},g.value))})]}),s&&p.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",s]}),p.jsxs("form",{onSubmit:d,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:""}),p.jsx("input",{type:"text",placeholder:" - ",value:t.name,onChange:g=>e({...t,name:g.target.value}),className:"input-field",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Email"}),p.jsx("input",{type:"email",placeholder:"example@gmail.com",value:t.email,onChange:g=>e({...t,email:g.target.value}),className:"input-field",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:""}),p.jsx("input",{type:"tel",placeholder:"09xxxxxxxx",value:t.phone,onChange:g=>e({...t,phone:g.target.value}),className:"input-field",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),p.jsx("input",{type:"password",placeholder:"  ",value:t.password,onChange:g=>e({...t,password:g.target.value}),className:"input-field",required:!0,minLength:6})]}),p.jsx("button",{type:"submit",disabled:n,className:"btn-primary mt-2",children:n?"...":" "})]}),p.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:["?"," ",p.jsx("button",{onClick:()=>l("/login"),className:"text-primary-500 font-semibold",children:"Login "})]})]})]})}function dL(){const[t,e]=$.useState({email:"",password:"",remember:!1}),[n,i]=$.useState(!1),[s,o]=$.useState(""),l=zn(),h=async d=>{var g;d.preventDefault(),i(!0),o("");try{await Fk(ms,t.remember?bx:Lm);const{user:y}=await Cx(ms,t.email,t.password),I=(g=(await fg(Wo($o,"users",y.uid))).data())==null?void 0:g.role;l(I==="customer"?"/customer":I==="rider"?"/rider":I==="admin"?"/admin":"/")}catch{o("Email  Password ")}finally{i(!1)}};return p.jsxs("div",{className:"min-h-screen bg-surface flex flex-col",children:[p.jsxs("div",{className:"bg-dark px-6 pt-12 pb-8 relative overflow-hidden",children:[p.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-primary-500 rounded-full opacity-10 blur-2xl translate-y-1/2 -translate-x-1/2"}),p.jsx("button",{onClick:()=>l("/"),className:"text-gray-400 text-sm mb-4 block",children:" Back"}),p.jsx("h1",{className:"text-3xl font-display font-black text-white",children:"Welcome Back "}),p.jsx("p",{className:"text-gray-400 text-sm font-body mt-1",children:"Gobike  "})]}),p.jsxs("div",{className:"flex-1 px-6 py-6",children:[s&&p.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",s]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Email"}),p.jsx("input",{type:"email",placeholder:"example@gmail.com",value:t.email,onChange:d=>e({...t,email:d.target.value}),className:"input-field",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),p.jsx("input",{type:"password",placeholder:"",value:t.password,onChange:d=>e({...t,password:d.target.value}),className:"input-field",required:!0})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"remember",checked:t.remember,onChange:d=>e({...t,remember:d.target.checked}),className:"w-4 h-4 accent-primary-500 rounded"}),p.jsx("label",{htmlFor:"remember",className:"text-xs text-gray-500",children:" (Remember Me)"})]}),p.jsx("button",{type:"submit",disabled:n,className:"btn-primary mt-2",children:n?"...":"Login "})]}),p.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:["?"," ",p.jsx("button",{onClick:()=>l("/signup"),className:"text-primary-500 font-semibold",children:"Sign Up "})]})]})]})}function fL(){const[t,e]=$.useState({email:"",password:""}),[n,i]=$.useState(!1),[s,o]=$.useState(""),l=zn(),h=async d=>{var g;d.preventDefault(),i(!0),o("");try{const{user:y}=await Cx(ms,t.email,t.password);((g=(await fg(Wo($o,"users",y.uid))).data())==null?void 0:g.role)==="admin"?l("/admin"):(o("Admin  "),await ms.signOut())}catch{o("Email  Password ")}finally{i(!1)}};return p.jsxs("div",{className:"min-h-screen bg-dark flex flex-col items-center justify-center px-6 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-500 rounded-full opacity-10 blur-3xl -translate-y-1/2 translate-x-1/2"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-primary-400 rounded-full opacity-10 blur-3xl translate-y-1/2 -translate-x-1/2"}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-primary",children:p.jsx("span",{className:"text-3xl",children:""})}),p.jsx("h1",{className:"text-2xl font-display font-black text-white",children:"Admin Portal"}),p.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Gobike Management System"})]}),p.jsxs("div",{className:"w-full max-w-sm",children:[s&&p.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",s]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Admin Email"}),p.jsx("input",{type:"email",placeholder:"admin@gobike.mm",value:t.email,onChange:d=>e({...t,email:d.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-primary-500 transition-all",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),p.jsx("input",{type:"password",placeholder:"",value:t.password,onChange:d=>e({...t,password:d.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-primary-500 transition-all",required:!0})]}),p.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary-500 text-white font-display font-bold py-4 rounded-2xl shadow-primary active:scale-95 transition-all disabled:opacity-50 mt-2",children:n?"...":" Admin Login"})]}),p.jsx("p",{className:"text-center text-xs text-gray-600 mt-6",children:"Gobike Admin Panel  Authorized Access Only"}),p.jsx("p",{className:"text-center mt-3",children:p.jsx("button",{onClick:()=>l("/login"),className:"text-gray-600 text-[10px]",children:" Back to Login"})})]})]})}const gy=[{id:"n1",userId:"user1",title:"Rider ",message:"  ",type:"order_update",orderId:"ORD001",isRead:!1,createdAt:new Date(Date.now()-5*60*1e3)},{id:"n2",userId:"user1",title:"",message:"Rider    ",type:"order_update",orderId:"ORD001",isRead:!1,createdAt:new Date(Date.now()-2*60*1e3)},{id:"n3",userId:"user2",title:"",message:"     ",type:"new_order",orderId:"ORD002",isRead:!0,createdAt:new Date(Date.now()-30*60*1e3)}];function pL(){const[t,e]=$.useState(!1),n=gy.filter(s=>!s.isRead).length,i=s=>{const o=Math.floor((Date.now()-s)/6e4);return o<60?`${o} `:`${Math.floor(o/60)} `};return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>e(!t),className:"relative w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:[p.jsx("span",{className:"text-lg",children:""}),n>0&&p.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-primary-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:n})]}),t&&p.jsxs("div",{className:"absolute right-0 top-11 w-72 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden z-50 animate-slide-up",children:[p.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:p.jsx("p",{className:"font-display font-bold text-sm",children:"Notifications"})}),p.jsx("div",{className:"max-h-72 overflow-y-auto",children:gy.map(s=>p.jsx("div",{className:`px-4 py-3 border-b border-gray-50 ${s.isRead?"":"bg-primary-50"}`,children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-lg mt-0.5",children:s.type==="new_order"?"":""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-800",children:s.title}),p.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.message}),p.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:[i(s.createdAt)," "]})]}),!s.isRead&&p.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500 mt-1 flex-shrink-0"})]})},s.id))})]})]})}function Vi({title:t}){var n;const{user:e}=na();return p.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-xl font-display font-bold text-primary-500",children:" Gobike"}),t&&p.jsxs("span",{className:"text-sm text-gray-400 font-body",children:["/ ",t]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(pL,{}),p.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:p.jsx("span",{className:"text-xs font-bold text-primary-600",children:((n=e==null?void 0:e.name)==null?void 0:n.charAt(0))||"G"})})]})]})})}const mL=[{path:"/customer",icon:"",label:"Home"},{path:"/customer/order",icon:"",label:"Order"},{path:"/customer/track",icon:"",label:"Track"},{path:"/customer/history",icon:"",label:"History"}],gL=[{path:"/rider",icon:"",label:"Home"},{path:"/rider/delivery",icon:"",label:"Active"},{path:"/rider/wallet",icon:"",label:"Wallet"},{path:"/rider/history",icon:"",label:"History"}],_L=[{path:"/admin",icon:"",label:"Dashboard"},{path:"/admin/riders",icon:"",label:"Riders"},{path:"/admin/wallet",icon:"",label:"Wallet"},{path:"/admin/map",icon:"",label:"Map"}];function Es(){const{user:t}=na(),e=zn(),n=$h(),i=(t==null?void 0:t.role)==="customer"?mL:(t==null?void 0:t.role)==="rider"?gL:_L;return p.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white shadow-bottom-nav border-t border-gray-100",children:p.jsx("div",{className:"flex items-center justify-around px-2 py-2 max-w-md mx-auto",children:i.map(s=>{const o=n.pathname===s.path;return p.jsxs("button",{onClick:()=>e(s.path),className:`bottom-nav-item flex-1 ${o?"bg-primary-50":""}`,children:[p.jsx("span",{className:"text-xl",children:s.icon}),p.jsx("span",{className:`text-[10px] font-semibold font-body ${o?"text-primary-500":"text-gray-400"}`,children:s.label})]},s.path)})})})}function aT(t,e){const n=$.useRef(e);$.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function vL(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const yL=1;function wL(t){return Object.freeze({__version:yL,map:t})}function lT(t,e){return Object.freeze({...t,...e})}const uT=$.createContext(null),cT=uT.Provider;function pg(){const t=$.useContext(uT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function hT(t){function e(n,i){const{instance:s,context:o}=t(n).current;return $.useImperativeHandle(i,()=>s),n.children==null?null:wl.createElement(cT,{value:o},n.children)}return $.forwardRef(e)}function xL(t){function e(n,i){const[s,o]=$.useState(!1),{instance:l}=t(n,o).current;$.useImperativeHandle(i,()=>l),$.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?Rw.createPortal(n.children,h):null}return $.forwardRef(e)}function EL(t){function e(n,i){const{instance:s}=t(n).current;return $.useImperativeHandle(i,()=>s),null}return $.forwardRef(e)}function mg(t,e){const n=$.useRef();$.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function ld(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function TL(t,e){return function(i,s){const o=pg(),l=t(ld(i,o),o);return aT(o.map,i.attribution),mg(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Pp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(BT,function(n){var i="1.9.4";function s(r){var a,c,f,_;for(c=1,f=arguments.length;c<f;c++){_=arguments[c];for(a in _)r[a]=_[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function g(r,a,c){var f,_,w,k;return k=function(){f=!1,_&&(w.apply(c,_),_=!1)},w=function(){f?_=arguments:(r.apply(c,arguments),setTimeout(k,a),f=!0)},w}function y(r,a,c){var f=a[1],_=a[0],w=f-_;return r===f&&c?r:((r-_)%w+w)%w+_}function x(){return!1}function I(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function O(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function M(r){return O(r).split(/\s+/)}function j(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function U(r,a,c){var f=[];for(var _ in r)f.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(r[_]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(A,function(c,f){var _=a[f];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(a)),_})}var R=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function H(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var C=0;function E(r){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||J("RequestAnimationFrame")||E,b=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function D(r,a,c){if(c&&S===E)r.call(a);else return S.call(window,l(r,a))}function V(r){r&&b.call(window,r)}var N={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:g,wrapNum:y,falseFn:x,formatNum:I,trim:O,splitWords:M,setOptions:j,getParamString:U,template:P,isArray:R,indexOf:H,emptyImageUrl:Y,requestFn:S,cancelFn:b,requestAnimFrame:D,cancelAnimFrame:V};function Ye(){}Ye.extend=function(r){var a=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return r.statics&&s(a,r.statics),r.includes&&(si(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,k=f._initHooks.length;w<k;w++)f._initHooks[w].call(this)}},a},Ye.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Ye.mergeOptions=function(r){return s(this.prototype.options,r),this},Ye.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function si(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=R(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ut={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=M(r);for(var _=0,w=r.length;_<w;_++)this._on(r[_],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=M(r);for(var _=arguments.length===1,w=0,k=r.length;w<k;w++)_?this._off(r[w]):this._off(r[w],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var _={fn:a,ctx:c};f&&(_.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(_)}},_off:function(r,a,c){var f,_,w;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(_=0,w=f.length;_<w;_++)f[_].fn=x;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var z=f[k];this._firingCount&&(z.fn=x,this._events[r]=f=f.slice()),f.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[r];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,k=_.length;w<k;w++){var z=_[w],B=z.fn;z.once&&this.off(r,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(f=!!a,_=void 0,c=void 0);var w=this._events&&this._events[r];if(w&&w.length&&this._listens(r,_,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var _=0,w=f.length;_<w;_++)if(f[_].fn===a&&f[_].ctx===c)return _;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=M(r);for(var _=0,w=r.length;_<w;_++)this._on(r[_],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ut.addEventListener=ut.on,ut.removeEventListener=ut.clearAllEventListeners=ut.off,ut.addOneTimeEventListener=ut.once,ut.fireEvent=ut.fire,ut.hasEventListeners=ut.listens;var jt=Ye.extend(ut);function q(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ue=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function X(r,a,c){return r instanceof q?r:R(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,a,c)}function he(r,a){if(r)for(var c=a?[r,a]:r,f=0,_=c.length;f<_;f++)this.extend(c[f])}he.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof q?r=X(r):r=ve(r),r instanceof he?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,_=r.max,w=_.x>=a.x&&f.x<=c.x,k=_.y>=a.y&&f.y<=c.y;return w&&k},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,_=r.max,w=_.x>a.x&&f.x<c.x,k=_.y>a.y&&f.y<c.y;return w&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,_=Math.abs(a.y-c.y)*r;return ve(X(a.x-f,a.y-_),X(c.x+f,c.y+_))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof he?r:new he(r,a)}function Te(r,a){if(r)for(var c=a?[r,a]:r,f=0,_=c.length;f<_;f++)this.extend(c[f])}Te.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,_;if(r instanceof ye)f=r,_=r;else if(r instanceof Te){if(f=r._southWest,_=r._northEast,!f||!_)return this}else return r?this.extend(pe(r)||Ne(r)):this;return!a&&!c?(this._southWest=new ye(f.lat,f.lng),this._northEast=new ye(_.lat,_.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,_=Math.abs(a.lng-c.lng)*r;return new Te(new ye(a.lat-f,a.lng-_),new ye(c.lat+f,c.lng+_))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ye||"lat"in r?r=pe(r):r=Ne(r);var a=this._southWest,c=this._northEast,f,_;return r instanceof Te?(f=r.getSouthWest(),_=r.getNorthEast()):f=_=r,f.lat>=a.lat&&_.lat<=c.lat&&f.lng>=a.lng&&_.lng<=c.lng},intersects:function(r){r=Ne(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),_=r.getNorthEast(),w=_.lat>=a.lat&&f.lat<=c.lat,k=_.lng>=a.lng&&f.lng<=c.lng;return w&&k},overlaps:function(r){r=Ne(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),_=r.getNorthEast(),w=_.lat>a.lat&&f.lat<c.lat,k=_.lng>a.lng&&f.lng<c.lng;return w&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Ne(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(r,a){return r instanceof Te?r:new Te(r,a)}function ye(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(r,a){if(!r)return!1;r=pe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+I(this.lat,r)+", "+I(this.lng,r)+")"},distanceTo:function(r){return Un.distance(this,pe(r))},wrap:function(){return Un.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function pe(r,a,c){return r instanceof ye?r:R(r)&&typeof r[0]!="object"?r.length===3?new ye(r[0],r[1],r[2]):r.length===2?new ye(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ye(r,a,c)}var ct={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),_=this.transformation.transform(a.max,c);return new he(f,_)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ye(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,_=a.lng-c.lng;if(f===0&&_===0)return r;var w=r.getSouthWest(),k=r.getNorthEast(),z=new ye(w.lat-f,w.lng-_),B=new ye(k.lat-f,k.lng-_);return new Te(z,B)}},Un=s({},ct,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,_=a.lat*c,w=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),z=w*w+Math.cos(f)*Math.cos(_)*k*k,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),gu=6378137,Fi={R:gu,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),_=Math.sin(f*a);return new q(this.R*r.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=gu*Math.PI;return new he([-r,-r],[r,r])}()};function zi(r,a,c,f){if(R(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}zi.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new q((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function oi(r,a,c,f){return new zi(r,a,c,f)}var Lr=s({},Un,{code:"EPSG:3857",projection:Fi,transformation:function(){var r=.5/(Math.PI*Fi.R);return oi(r,.5,-r,.5)}()}),sa=s({},Lr,{code:"EPSG:900913"});function Ts(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function oa(r,a){var c="",f,_,w,k,z,B;for(f=0,w=r.length;f<w;f++){for(z=r[f],_=0,k=z.length;_<k;_++)B=z[_],c+=(_?"L":"M")+B.x+" "+B.y;c+=a?re.svg?"z":"x":""}return c||"M0 0"}var aa=document.documentElement.style,Is="ActiveXObject"in window,_u=Is&&!document.addEventListener,Ps="msLaunchUri"in navigator&&!("documentMode"in document),Ss=cn("webkit"),vu=cn("android"),Cs=cn("android 2")||cn("android 3"),la=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yu=vu&&cn("Google")&&la<537&&!("AudioNode"in window),it=!!window.opera,mt=!Ps&&cn("chrome"),Or=cn("gecko")&&!Ss&&!it&&!Is,wu=!mt&&cn("safari"),ua=cn("phantom"),xu="OTransition"in aa,Dr=navigator.platform.indexOf("Win")===0,ca=Is&&"transition"in aa,ks="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Cs,As="MozPerspective"in aa,hd=!window.L_DISABLE_3D&&(ca||ks||As)&&!xu&&!ua,Mr=typeof orientation<"u"||cn("mobile"),ha=Mr&&Ss,Eu=Mr&&ks,da=!window.PointerEvent&&window.MSPointerEvent,Ui=!!(window.PointerEvent||da),bs="ontouchstart"in window||!!window.TouchEvent,fa=!window.L_NO_TOUCH&&(bs||Ui),ai=Mr&&it,Tu=Mr&&Or,Ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Iu=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",x,a),window.removeEventListener("testPassiveEventSupport",x,a)}catch{}return r}(),jr=function(){return!!document.createElement("canvas").getContext}(),Rs=!!(document.createElementNS&&Ts("svg").createSVGRect),xt=!!Rs&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pu=!Rs&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Vr=navigator.platform.indexOf("Mac")===0,Fr=navigator.platform.indexOf("Linux")===0;function cn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var re={ie:Is,ielt9:_u,edge:Ps,webkit:Ss,android:vu,android23:Cs,androidStock:yu,opera:it,chrome:mt,gecko:Or,safari:wu,phantom:ua,opera12:xu,win:Dr,ie3d:ca,webkit3d:ks,gecko3d:As,any3d:hd,mobile:Mr,mobileWebkit:ha,mobileWebkit3d:Eu,msPointer:da,pointer:Ui,touch:fa,touchNative:bs,mobileOpera:ai,mobileGecko:Tu,retina:Ns,passiveEvents:Iu,canvas:jr,svg:Rs,vml:Pu,inlineSvg:xt,mac:Vr,linux:Fr},li=re.msPointer?"MSPointerDown":"pointerdown",Su=re.msPointer?"MSPointerMove":"pointermove",Cu=re.msPointer?"MSPointerUp":"pointerup",zr=re.msPointer?"MSPointerCancel":"pointercancel",Ls={touchstart:li,touchmove:Su,touchend:Cu,touchcancel:zr},Os={touchstart:Ms,touchmove:Ds,touchend:Ds,touchcancel:Ds},Sn={},Cn=!1;function ku(r,a,c){return a==="touchstart"&&bu(),Os[a]?(c=Os[a].bind(this,c),r.addEventListener(Ls[a],c,!1),c):(console.warn("wrong event specified:",a),x)}function Au(r,a,c){if(!Ls[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Ls[a],c,!1)}function pa(r){Sn[r.pointerId]=r}function ma(r){Sn[r.pointerId]&&(Sn[r.pointerId]=r)}function ga(r){delete Sn[r.pointerId]}function bu(){Cn||(document.addEventListener(li,pa,!0),document.addEventListener(Su,ma,!0),document.addEventListener(Cu,ga,!0),document.addEventListener(zr,ga,!0),Cn=!0)}function Ds(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Sn)a.touches.push(Sn[c]);a.changedTouches=[a],r(a)}}function Ms(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),Ds(r,a)}function Nu(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var _a=200;function Ur(r,a){r.addEventListener("dblclick",a);var c=0,f;function _(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var k=Aa(w);if(!(k.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!k.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=_a?(f++,f===2&&a(Nu(w))):f=1,c=z}}}return r.addEventListener("click",_),{dblclick:a,simDblclick:_}}function ui(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Br=hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wr=hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),va=Wr==="webkitTransition"||Wr==="OTransition"?Wr+"End":"transitionend";function ya(r){return typeof r=="string"?document.getElementById(r):r}function Bi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Ie(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function je(r){var a=r.parentNode;a&&a.removeChild(r)}function Hr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ci(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Wi(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function wa(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=hn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function _e(r,a){if(r.classList!==void 0)for(var c=M(a),f=0,_=c.length;f<_;f++)r.classList.add(c[f]);else if(!wa(r,a)){var w=hn(r);xa(r,(w?w+" ":"")+a)}}function Ue(r,a){r.classList!==void 0?r.classList.remove(a):xa(r,O((" "+hn(r)+" ").replace(" "+a+" "," ")))}function xa(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function hn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Xe(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&js(r,a)}function js(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function hi(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Bn(r,a,c){var f=a||new q(0,0);r.style[Br]=(re.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function de(r,a){r._leaflet_pos=a,re.any3d?Bn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function dn(r){return r._leaflet_pos||new q(0,0)}var kn,An,Ea;if("onselectstart"in document)kn=function(){ae(window,"selectstart",$e)},An=function(){De(window,"selectstart",$e)};else{var Hi=hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kn=function(){if(Hi){var r=document.documentElement.style;Ea=r[Hi],r[Hi]="none"}},An=function(){Hi&&(document.documentElement.style[Hi]=Ea,Ea=void 0)}}function Ta(){ae(window,"dragstart",$e)}function Ia(){De(window,"dragstart",$e)}var Vs,Pa;function di(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Jt(),Vs=r,Pa=r.style.outlineStyle,r.style.outlineStyle="none",ae(window,"keydown",Jt))}function Jt(){Vs&&(Vs.style.outlineStyle=Pa,Vs=void 0,Pa=void 0,De(window,"keydown",Jt))}function Sa(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Fs(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Ru={__proto__:null,TRANSFORM:Br,TRANSITION:Wr,TRANSITION_END:va,get:ya,getStyle:Bi,create:Ie,remove:je,empty:Hr,toFront:ci,toBack:Wi,hasClass:wa,addClass:_e,removeClass:Ue,setClass:xa,getClass:hn,setOpacity:Xe,testProp:hi,setTransform:Bn,setPosition:de,getPosition:dn,get disableTextSelection(){return kn},get enableTextSelection(){return An},disableImageDrag:Ta,enableImageDrag:Ia,preventOutline:di,restoreOutline:Jt,getSizedParentNode:Sa,getScale:Fs};function ae(r,a,c,f){if(a&&typeof a=="object")for(var _ in a)Ca(r,_,a[_],c);else{a=M(a);for(var w=0,k=a.length;w<k;w++)Ca(r,a[w],c,f)}return this}var fn="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)Lu(r),delete r[fn];else if(a&&typeof a=="object")for(var _ in a)ka(r,_,a[_],c);else if(a=M(a),arguments.length===2)Lu(r,function(z){return H(a,z)!==-1});else for(var w=0,k=a.length;w<k;w++)ka(r,a[w],c,f);return this}function Lu(r,a){for(var c in r[fn]){var f=c.split(/\d/)[0];(!a||a(f))&&ka(r,f,null,null,c)}}var pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ca(r,a,c,f){var _=a+d(c)+(f?"_"+d(f):"");if(r[fn]&&r[fn][_])return this;var w=function(z){return c.call(f||r,z||window.event)},k=w;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?w=ku(r,a,w):re.touch&&a==="dblclick"?w=Ur(r,w):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(pn[a]||a,w,re.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,ba(r,z)&&k(z)},r.addEventListener(pn[a],w,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,w),r[fn]=r[fn]||{},r[fn][_]=w}function ka(r,a,c,f,_){_=_||a+d(c)+(f?"_"+d(f):"");var w=r[fn]&&r[fn][_];if(!w)return this;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?Au(r,a,w):re.touch&&a==="dblclick"?ui(r,w):"removeEventListener"in r?r.removeEventListener(pn[a]||a,w,!1):r.detachEvent("on"+a,w),r[fn][_]=null}function mn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function $i(r){return Ca(r,"wheel",mn),this}function qi(r){return ae(r,"mousedown touchstart dblclick contextmenu",mn),r._leaflet_disable_click=!0,this}function $e(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function en(r){return $e(r),mn(r),this}function Aa(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function zs(r,a){if(!a)return new q(r.clientX,r.clientY);var c=Fs(a),f=c.boundingClientRect;return new q((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Be=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ou(r){return re.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Be:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ba(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Du={__proto__:null,on:ae,off:De,stopPropagation:mn,disableScrollPropagation:$i,disableClickPropagation:qi,preventDefault:$e,stop:en,getPropagationPath:Aa,getMousePosition:zs,getWheelDelta:Ou,isExternalTarget:ba,addListener:ae,removeListener:De},Na=jt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=dn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),de(this._el,c),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),xe=jt.extend({options:{crs:Lr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=j(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wr&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,va,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(pe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),_=this.getSize().divideBy(2),w=r instanceof q?r:this.latLngToContainerPoint(r),k=w.subtract(_).multiplyBy(1-1/f),z=this.containerPointToLatLng(_.add(k));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Ne(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(r,!1,c.add(f));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:r.getCenter(),zoom:_};var w=f.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),_),z=this.project(r.getNorthEast(),_),B=this.unproject(k.add(z).divideBy(2).add(w),_);return{center:B,zoom:_}},fitBounds:function(r,a){if(r=Ne(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Na,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){_e(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!re.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),_=this.project(r),w=this.getSize(),k=this._zoom;r=pe(r),a=a===void 0?k:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(k,a),Z=_.distanceTo(f)||1,te=1.42,le=te*te;function we(st){var Yu=st?-1:1,jT=st?B:z,VT=B*B-z*z+Yu*le*le*Z*Z,FT=2*jT*le*Z,vd=VT/FT,Vg=Math.sqrt(vd*vd+1)-vd,zT=Vg<1e-9?-18:Math.log(Vg);return zT}function Ft(st){return(Math.exp(st)-Math.exp(-st))/2}function _t(st){return(Math.exp(st)+Math.exp(-st))/2}function _n(st){return Ft(st)/_t(st)}var qt=we(0);function Js(st){return z*(_t(qt)/_t(qt+te*st))}function LT(st){return z*(_t(qt)*_n(qt+te*st)-Ft(qt))/le}function OT(st){return 1-Math.pow(1-st,1.5)}var DT=Date.now(),Mg=(we(1)-qt)/te,MT=c.duration?1e3*c.duration:1e3*Mg*.8;function jg(){var st=(Date.now()-DT)/MT,Yu=OT(st)*Mg;st<=1?(this._flyToFrame=D(jg,this),this._move(this.unproject(f.add(_.subtract(f).multiplyBy(LT(Yu)/Z)),k),this.getScaleZoom(z/Js(Yu),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),jg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Ne(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Ne(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(r),k=this.getPixelBounds(),z=ve([k.min.add(c),k.max.subtract(f)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(z.getCenter()),te=z.extend(w).getSize().subtract(B);_.x+=Z.x<0?-te.x:te.x,_.y+=Z.y<0?-te.y:te.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),_=c.divideBy(2).round(),w=f.subtract(_);return!w.x&&!w.y?this:(r.animate&&r.pan?this.panBy(w):(r.pan&&this._rawPanBy(w),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ye(a,c),_=f.toBounds(r.coords.accuracy*2),w=this._locateOptions;if(w.setView){var k=this.getBoundsZoom(_);this.setView(f,w.maxZoom?Math.min(k,w.maxZoom):k)}var z={latlng:f,bounds:_,timestamp:r.timestamp};for(var B in r.coords)typeof r.coords[B]=="number"&&(z[B]=r.coords[B]);this.fire("locationfound",z)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)je(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Ie("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Te(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Ne(r),c=X(c||[0,0]);var f=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),k=r.getNorthWest(),z=r.getSouthEast(),B=this.getSize().subtract(c),Z=ve(this.project(z,f),this.project(k,f)).getSize(),te=re.any3d?this.options.zoomSnap:1,le=B.x/Z.x,we=B.y/Z.y,Ft=a?Math.max(le,we):Math.min(le,we);return f=this.getScaleZoom(Ft,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(_,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(pe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(pe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Ne(r))},distance:function(r,a){return this.options.crs.distance(pe(r),pe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(r)))},mouseEventToContainerPoint:function(r){return zs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ya(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,_e(r,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Bi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(r.markerPane,"leaflet-zoom-hide"),_e(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){de(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,c)._move(r,a)._moveEnd(_),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){de(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:ae;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,_=a==="mouseout"||a==="mouseover",w=r.target||r.srcElement,k=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(_&&!ba(w,r)||(c.push(f),_))||w===this._container)break;w=w.parentNode}return!c.length&&!k&&!_&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&di(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var _=this._findEventTargets(r,a);if(c){for(var w=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&w.push(c[k]);_=w.concat(_)}if(_.length){a==="contextmenu"&&$e(r);var z=_[0],B={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Z=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(r),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(k=0;k<_.length;k++)if(_[k].fire(a,B,!0),B.originalEvent._stopped||_[k].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return dn(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),_=this.getSize().divideBy(2),w=new he(f.subtract(_),f.add(_)),k=this._getBoundsOffset(w,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(f.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new he(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),_=f.min.subtract(r.min),w=f.max.subtract(r.max),k=this._rebound(_.x,-w.x),z=this._rebound(_.y,-w.y);return new q(k,z)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=re.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Br,f=this._proxy.style[c];Bn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Bn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),_=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Us(r,a){return new xe(r,a)}var $t=Ye.extend({options:{position:"topright"},initialize:function(r){j(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return _e(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Vt=function(r){return new $t(r)};xe.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ie("div",a+"control-container",this._container);function f(_,w){var k=a+_+" "+a+w;r[_+w]=Ie("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)je(this._controlCorners[r]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ra=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){j(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return $t.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Ie("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),qi(a),$i(a);var f=this._section=Ie("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ae(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ie("a",r+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),ae(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){$e(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ie("div",r+"-base",f),this._separator=Ie("div",r+"-separator",f),this._overlaysList=Ie("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,_){return this.options.sortFunction(f.layer,_.layer,f.name,_.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hr(this._baseLayersList),Hr(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,_=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,_+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&_>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ae(f,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+r.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(_);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],_=[];this._handlingClick=!0;for(var w=r.length-1;w>=0;w--)a=r[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||_.push(c);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),_=r.length-1;_>=0;_--)a=r[_],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ae(r,"click",$e),this.expand();var a=this;setTimeout(function(){De(r,"click",$e),a._preventClick=!1})}}),dd=function(r,a,c){return new Ra(r,a,c)},fi=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Ie("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,_){var w=Ie("a",c,f);return w.innerHTML=r,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),qi(w),ae(w,"click",en),ae(w,"click",_,this),ae(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Ue(this._zoomInButton,a),Ue(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(_e(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(_e(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fi,this.addControl(this.zoomControl))});var Mu=function(r){return new fi(r)},Bs=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Ie("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Ie("div",a,c)),r.imperial&&(this._iScale=Ie("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,_;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ws=function(r){return new Bs(r)},ju='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zi=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?ju+" ":"")+"Leaflet</a>"},initialize:function(r){j(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ie("div","leaflet-control-attribution"),qi(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new Zi().addTo(this)});var fd=function(r){return new Zi(r)};$t.Layers=Ra,$t.Zoom=fi,$t.Scale=Bs,$t.Attribution=Zi,Vt.layers=dd,Vt.zoom=Mu,Vt.scale=Ws,Vt.attribution=fd;var tn=Ye.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(r,a){return r.addHandler(a,this),this};var $r={Events:ut},La=re.touch?"touchstart mousedown":"mousedown",bn=jt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){j(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ae(this._dragStartTarget,La,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,La,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!wa(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){bn._dragging===this&&this.finishDrag();return}if(!(bn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(bn._dragging=this,this._preventOutline&&di(this._element),Ta(),kn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Sa(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=dn(this._element),this._parentScale=Fs(c);var f=r.type==="mousedown";ae(document,f?"mousemove":"touchmove",this._onMove,this),ae(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,$e(r),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),de(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Ia(),An();var a=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Hs(r,a,c){var f,_=[1,4,2,8],w,k,z,B,Z,te,le,we;for(w=0,te=r.length;w<te;w++)r[w]._code=Wn(r[w],a);for(z=0;z<4;z++){for(le=_[z],f=[],w=0,te=r.length,k=te-1;w<te;k=w++)B=r[w],Z=r[k],B._code&le?Z._code&le||(we=gt(Z,B,le,a,c),we._code=Wn(we,a),f.push(we)):(Z._code&le&&(we=gt(Z,B,le,a,c),we._code=Wn(we,a),f.push(we)),f.push(B));r=f}return r}function $s(r,a){var c,f,_,w,k,z,B,Z,te;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var le=pe([0,0]),we=Ne(r),Ft=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Ft<1700&&(le=qs(r));var _t=r.length,_n=[];for(c=0;c<_t;c++){var qt=pe(r[c]);_n.push(a.project(pe([qt.lat-le.lat,qt.lng-le.lng])))}for(z=B=Z=0,c=0,f=_t-1;c<_t;f=c++)_=_n[c],w=_n[f],k=_.y*w.x-w.y*_.x,B+=(_.x+w.x)*k,Z+=(_.y+w.y)*k,z+=k*3;z===0?te=_n[0]:te=[B/z,Z/z];var Js=a.unproject(X(te));return pe([Js.lat+le.lat,Js.lng+le.lng])}function qs(r){for(var a=0,c=0,f=0,_=0;_<r.length;_++){var w=pe(r[_]);a+=w.lat,c+=w.lng,f++}return pe([a/f,c/f])}var Zs={__proto__:null,clipPolygon:Hs,polygonCenter:$s,centroid:qs};function Oa(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Fu(r,c),r=Vu(r,c),r}function Da(r,a,c){return Math.sqrt(gn(r,a,c,!0))}function pi(r,a,c){return gn(r,a,c)}function Vu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,_=new f(c);_[0]=_[c-1]=1,Gs(r,_,a,0,c-1);var w,k=[];for(w=0;w<c;w++)_[w]&&k.push(r[w]);return k}function Gs(r,a,c,f,_){var w=0,k,z,B;for(z=f+1;z<=_-1;z++)B=gn(r[z],r[f],r[_],!0),B>w&&(k=z,w=B);w>c&&(a[k]=1,Gs(r,a,c,f,k),Gs(r,a,c,k,_))}function Fu(r,a){for(var c=[r[0]],f=1,_=0,w=r.length;f<w;f++)zu(r[f],r[_])>a&&(c.push(r[f]),_=f);return _<w-1&&c.push(r[w-1]),c}var Ma;function qr(r,a,c,f,_){var w=f?Ma:Wn(r,c),k=Wn(a,c),z,B,Z;for(Ma=k;;){if(!(w|k))return[r,a];if(w&k)return!1;z=w||k,B=gt(r,a,z,c,_),Z=Wn(B,c),z===w?(r=B,w=Z):(a=B,k=Z)}}function gt(r,a,c,f,_){var w=a.x-r.x,k=a.y-r.y,z=f.min,B=f.max,Z,te;return c&8?(Z=r.x+w*(B.y-r.y)/k,te=B.y):c&4?(Z=r.x+w*(z.y-r.y)/k,te=z.y):c&2?(Z=B.x,te=r.y+k*(B.x-r.x)/w):c&1&&(Z=z.x,te=r.y+k*(z.x-r.x)/w),new q(Z,te,_)}function Wn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function zu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function gn(r,a,c,f){var _=a.x,w=a.y,k=c.x-_,z=c.y-w,B=k*k+z*z,Z;return B>0&&(Z=((r.x-_)*k+(r.y-w)*z)/B,Z>1?(_=c.x,w=c.y):Z>0&&(_+=k*Z,w+=z*Z)),k=r.x-_,z=r.y-w,f?k*k+z*z:new q(_,w)}function u(r){return!R(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function m(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function v(r,a){var c,f,_,w,k,z,B,Z;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var te=pe([0,0]),le=Ne(r),we=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());we<1700&&(te=qs(r));var Ft=r.length,_t=[];for(c=0;c<Ft;c++){var _n=pe(r[c]);_t.push(a.project(pe([_n.lat-te.lat,_n.lng-te.lng])))}for(c=0,f=0;c<Ft-1;c++)f+=_t[c].distanceTo(_t[c+1])/2;if(f===0)Z=_t[0];else for(c=0,w=0;c<Ft-1;c++)if(k=_t[c],z=_t[c+1],_=k.distanceTo(z),w+=_,w>f){B=(w-f)/_,Z=[z.x-B*(z.x-k.x),z.y-B*(z.y-k.y)];break}var qt=a.unproject(X(Z));return pe([qt.lat+te.lat,qt.lng+te.lng])}var T={__proto__:null,simplify:Oa,pointToSegmentDistance:Da,closestPointOnSegment:pi,clipSegment:qr,_getEdgeIntersection:gt,_getBitCode:Wn,_sqClosestPointOnSegment:gn,isFlat:u,_flat:m,polylineCenter:v},F={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new he([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,_=this.R_MINOR/c,w=Math.sqrt(1-_*_),k=w*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),w/2);return f=-c*Math.log(Math.max(z,1e-10)),new q(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,_=Math.sqrt(1-f*f),w=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(w),z=0,B=.1,Z;z<15&&Math.abs(B)>1e-7;z++)Z=_*Math.sin(k),Z=Math.pow((1-Z)/(1+Z),_/2),B=Math.PI/2-2*Math.atan(w*Z)-k,k+=B;return new ye(k*a,r.x*a/c)}},ee={__proto__:null,LonLat:F,Mercator:W,SphericalMercator:Fi},Re=s({},Un,{code:"EPSG:3395",projection:W,transformation:function(){var r=.5/(Math.PI*W.R);return oi(r,.5,-r,.5)}()}),rt=s({},Un,{code:"EPSG:4326",projection:F,transformation:oi(1/180,1,-1/180,.5)}),Ce=s({},ct,{projection:F,transformation:oi(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ct.Earth=Un,ct.EPSG3395=Re,ct.EPSG3857=Lr,ct.EPSG900913=sa,ct.EPSG4326=rt,ct.Simple=Ce;var Me=jt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?R(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var _=this._zoomBoundLayers[f].options;r=_.minZoom===void 0?r:Math.min(r,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qe=Me.extend({initialize:function(r,a){j(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Gi=function(r,a){return new qe(r,a)},et=qe.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),qe.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),qe.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Te;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Ks=function(r,a){return new et(r,a)},Hn=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){j(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var _=X(f),w=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),w&&(r.style.marginLeft=-w.x+"px",r.style.marginTop=-w.y+"px"),_&&(r.style.width=_.x+"px",r.style.height=_.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return re.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function pT(r){return new Hn(r)}var ja=Hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ja.imagePath!="string"&&(ja.imagePath=this._detectIconPath()),(this.options.imagePath||ja.imagePath)+Hn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,_){var w=f.exec(c);return w&&w[_]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ie("div","leaflet-default-icon-path",document.body),a=Bi(r,"background-image")||Bi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),_g=tn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new bn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=dn(a._icon),k=c.getPixelBounds(),z=c.getPixelOrigin(),B=ve(k.min._subtract(z).add(_),k.max._subtract(z).subtract(_));if(!B.contains(w)){var Z=X((Math.max(B.max.x,w.x)-B.max.x)/(k.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(k.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(k.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(k.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),de(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=D(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=dn(a._icon),_=a._map.layerPointToLatLng(f);c&&de(c,f),a._latlng=_,r.latlng=_,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Uu=Me.extend({options:{icon:new ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){j(this,a),this._latlng=pe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),_e(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(c,"focus",this._panOnFocus,this);var _=r.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(_e(_,a),_.alt=""),this._shadow=_,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&de(this._icon,r),this._shadow&&de(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_g)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _g(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function mT(r,a){return new Uu(r,a)}var Ki=Me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return j(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bu=Ki.extend({options:{fill:!0,radius:10},initialize:function(r,a){j(this,a),this._latlng=pe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Ki.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new he(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gT(r,a){return new Bu(r,a)}var pd=Bu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),j(this,a),this._latlng=pe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Te(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Ki.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Un.distance){var _=Math.PI/180,w=this._mRadius/Un.R/_,k=c.project([a+w,r]),z=c.project([a-w,r]),B=k.add(z).divideBy(2),Z=c.unproject(B).lat,te=Math.acos((Math.cos(w*_)-Math.sin(a*_)*Math.sin(Z*_))/(Math.cos(a*_)*Math.cos(Z*_)))/_;(isNaN(te)||te===0)&&(te=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([Z,r-te]).x,this._radiusY=B.y-k.y}else{var le=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(le).x}this._updateBounds()}});function _T(r,a,c){return new pd(r,a,c)}var mi=Ki.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){j(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=gn,_,w,k=0,z=this._parts.length;k<z;k++)for(var B=this._parts[k],Z=1,te=B.length;Z<te;Z++){_=B[Z-1],w=B[Z];var le=f(r,_,w,!0);le<a&&(a=le,c=f(r,_,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=pe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Te,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,_=r.length;f<_;f++)c?(a[f]=pe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new q(r,r);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ye,_=r.length,w,k;if(f){for(k=[],w=0;w<_;w++)k[w]=this._map.latLngToLayerPoint(r[w]),c.extend(k[w]);a.push(k)}else for(w=0;w<_;w++)this._projectLatlngs(r[w],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,_,w,k,z,B;for(c=0,_=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,k=B.length;f<k-1;f++)z=qr(B[f],B[f+1],r,f,!0),z&&(a[_]=a[_]||[],a[_].push(z[0]),(z[1]!==B[f+1]||f===k-2)&&(a[_].push(z[1]),_++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Oa(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,_,w,k,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],f=0,k=z.length,_=k-1;f<k;_=f++)if(!(!a&&f===0)&&Da(r,z[_],z[f])<=B)return!0;return!1}});function vT(r,a){return new mi(r,a)}mi._flat=m;var Qs=mi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $s(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=mi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){mi.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(r=new he(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,_=this._rings.length,w;f<_;f++)w=Hs(this._rings[f],r,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,_,w,k,z,B,Z;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],k=0,Z=c.length,z=Z-1;k<Z;z=k++)f=c[k],_=c[z],f.y>r.y!=_.y>r.y&&r.x<(_.x-f.x)*(r.y-f.y)/(_.y-f.y)+f.x&&(a=!a);return a||mi.prototype._containsPoint.call(this,r,!0)}});function yT(r,a){return new Qs(r,a)}var gi=et.extend({initialize:function(r,a){j(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=R(r)?r:r.features,c,f,_;if(a){for(c=0,f=a.length;c<f;c++)_=a[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(r))return this;var k=Wu(r,w);return k?(k.feature=qu(r),k.defaultOptions=k.options,this.resetStyle(k),w.onEachFeature&&w.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Wu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,_=[],w=a&&a.pointToLayer,k=a&&a.coordsToLatLng||md,z,B,Z,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=k(f),vg(w,r,z,a);case"MultiPoint":for(Z=0,te=f.length;Z<te;Z++)z=k(f[Z]),_.push(vg(w,r,z,a));return new et(_);case"LineString":case"MultiLineString":return B=Hu(f,c.type==="LineString"?0:1,k),new mi(B,a);case"Polygon":case"MultiPolygon":return B=Hu(f,c.type==="Polygon"?1:2,k),new Qs(B,a);case"GeometryCollection":for(Z=0,te=c.geometries.length;Z<te;Z++){var le=Wu({geometry:c.geometries[Z],type:"Feature",properties:r.properties},a);le&&_.push(le)}return new et(_);case"FeatureCollection":for(Z=0,te=c.features.length;Z<te;Z++){var we=Wu(c.features[Z],a);we&&_.push(we)}return new et(_);default:throw new Error("Invalid GeoJSON object.")}}function vg(r,a,c,f){return r?r(a,c):new Uu(c,f&&f.markersInheritOptions&&f)}function md(r){return new ye(r[1],r[0],r[2])}function Hu(r,a,c){for(var f=[],_=0,w=r.length,k;_<w;_++)k=a?Hu(r[_],a-1,c):(c||md)(r[_]),f.push(k);return f}function gd(r,a){return r=pe(r),r.alt!==void 0?[I(r.lng,a),I(r.lat,a),I(r.alt,a)]:[I(r.lng,a),I(r.lat,a)]}function $u(r,a,c,f){for(var _=[],w=0,k=r.length;w<k;w++)_.push(a?$u(r[w],u(r[w])?0:a-1,c,f):gd(r[w],f));return!a&&c&&_.length>0&&_.push(_[0].slice()),_}function Ys(r,a){return r.feature?s({},r.feature,{geometry:a}):qu(a)}function qu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var _d={toGeoJSON:function(r){return Ys(this,{type:"Point",coordinates:gd(this.getLatLng(),r)})}};Uu.include(_d),pd.include(_d),Bu.include(_d),mi.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=$u(this._latlngs,a?1:0,!1,r);return Ys(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Qs.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=$u(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),Ys(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),qe.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Ys(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(r);if(c)f.push(w.geometry);else{var k=qu(w);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?Ys(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function yg(r,a){return new gi(r,a)}var wT=yg,Zu=Me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Ne(a),j(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ci(this._image),this},bringToBack:function(){return this._map&&Wi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Ne(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Ie("img");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=x,a.onmousemove=x,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Bn(this._image,c,a)},_reset:function(){var r=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();de(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),xT=function(r,a,c){return new Zu(r,a,c)},wg=Zu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Ie("video");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=x,a.onmousemove=x,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],_=0;_<c.length;_++)f.push(c[_].src);this._url=c.length>0?f:[a.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var k=Ie("source");k.src=this._url[w],a.appendChild(k)}}});function ET(r,a,c){return new wg(r,a,c)}var xg=Zu.extend({_initImage:function(){var r=this._image=this._url;_e(r,"leaflet-image-layer"),this._zoomAnimated&&_e(r,"leaflet-zoom-animated"),this.options.className&&_e(r,this.options.className),r.onselectstart=x,r.onmousemove=x}});function TT(r,a,c){return new xg(r,a,c)}var $n=Me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ye||R(r))?(this._latlng=pe(r),j(this,a)):(j(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Xe(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(l(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=pe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ci(this._container),this},bringToBack:function(){return this._map&&Wi(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?de(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(r,a,c,f){var _=a;return _ instanceof r||(_=new r(f).setContent(a)),c&&_.setLatLng(c),_}}),Me.include({_initOverlay:function(r,a,c,f){var _=c;return _ instanceof r?(j(_,f),_._source=this):(_=a&&!f?a:new r(f,this),_.setContent(c)),_}});var Gu=$n.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,$n.prototype.openOn.call(this,r)},onAdd:function(r){$n.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ki||this._source.on("preclick",mn))},onRemove:function(r){$n.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ki||this._source.off("preclick",mn))},getEvents:function(){var r=$n.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Ie("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ie("div",r+"-content-wrapper",a);if(this._contentNode=Ie("div",r+"-content",c),qi(a),$i(this._contentNode),ae(a,"contextmenu",mn),this._tipContainer=Ie("div",r+"-tip-container",a),this._tip=Ie("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ie("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ae(f,"click",function(_){$e(_),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&f>_?(a.height=_+"px",_e(r,w)):Ue(r,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();de(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Bi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,_=new q(this._containerLeft,-c-this._containerBottom);_._add(dn(this._container));var w=r.layerPointToContainerPoint(_),k=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||k),B=X(this.options.autoPanPaddingBottomRight||k),Z=r.getSize(),te=0,le=0;w.x+f+B.x>Z.x&&(te=w.x+f-Z.x+B.x),w.x-te-z.x<0&&(te=w.x-z.x),w.y+c+B.y>Z.y&&(le=w.y+c-Z.y+B.y),w.y-le-z.y<0&&(le=w.y-z.y),(te||le)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([te,le]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),IT=function(r,a){return new Gu(r,a)};xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(r,a,c){return this._initOverlay(Gu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Me.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Gu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){en(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Ki)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ku=$n.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){$n.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){$n.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=$n.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ie("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,_=this._container,w=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(r),z=this.options.direction,B=_.offsetWidth,Z=_.offsetHeight,te=X(this.options.offset),le=this._getAnchor();z==="top"?(a=B/2,c=Z):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=Z/2):z==="right"?(a=0,c=Z/2):z==="left"?(a=B,c=Z/2):k.x<w.x?(z="right",a=0,c=Z/2):(z="left",a=B+(te.x+le.x)*2,c=Z/2),r=r.subtract(X(a,c,!0)).add(te).add(le),Ue(_,"leaflet-tooltip-right"),Ue(_,"leaflet-tooltip-left"),Ue(_,"leaflet-tooltip-top"),Ue(_,"leaflet-tooltip-bottom"),_e(_,"leaflet-tooltip-"+z),de(_,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Xe(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),PT=function(r,a){return new Ku(r,a)};xe.include({openTooltip:function(r,a,c){return this._initOverlay(Ku,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Me.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ku,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ae(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ae(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Eg=Hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Hr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function ST(r){return new Eg(r)}Hn.Default=ja;var Va=Me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){j(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),je(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Wi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,_=a.length,w;f<_;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=r(c,+w));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Xe(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var _=this._tiles[f];if(!(!_.current||!_.loaded)){var w=Math.min(1,(r-_.loaded)/200);Xe(_.el,w),w<1?a=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(V(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(je(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],_=this._map;return f||(f=this._levels[r]={},f.el=Ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=_.project(_.unproject(_.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,_.getCenter(),_.getZoom()),x(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)je(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var _=Math.floor(r/2),w=Math.floor(a/2),k=c-1,z=new q(+_,+w);z.z=+k;var B=this._tileCoordsToKey(z),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),k>f?this._retainParent(_,w,k,f):!1)},_retainChildren:function(r,a,c,f){for(var _=2*r;_<2*r+2;_++)for(var w=2*a;w<2*a+2;w++){var k=new q(_,w);k.z=c+1;var z=this._tileCoordsToKey(k),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(_,w,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!f||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),_=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();re.any3d?Bn(r.el,_,f):de(r.el,_)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),_=a.project(r,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new he(_.subtract(w),_.add(w))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),_=this._pxBoundsToTileRange(f),w=_.getCenter(),k=[],z=this.options.keepBuffer,B=new he(_.getBottomLeft().subtract([z,-z]),_.getTopRight().add([z,-z]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var te=this._tiles[Z].coords;(te.z!==this._tileZoom||!B.contains(new q(te.x,te.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var le=_.min.y;le<=_.max.y;le++)for(var we=_.min.x;we<=_.max.x;we++){var Ft=new q(we,le);if(Ft.z=this._tileZoom,!!this._isValidTile(Ft)){var _t=this._tiles[this._tileCoordsToKey(Ft)];_t?_t.current=!0:k.push(Ft)}}if(k.sort(function(qt,Js){return qt.distanceTo(w)-Js.distanceTo(w)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(we=0;we<k.length;we++)this._addTile(k[we],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Ne(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),_=f.add(c),w=a.unproject(f,r.z),k=a.unproject(_,r.z);return[w,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Te(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(je(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){_e(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=x,r.onmousemove=x,re.ielt9&&this.options.opacity<1&&Xe(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),_=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(_),this.createTile.length<2&&D(l(this._tileReady,this,r,null,_)),de(_,c),this._tiles[f]={el:_,coords:r,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Xe(c.el,0),V(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(_e(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new q(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new he(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function CT(r){return new Va(r)}var Xs=Va.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=j(this,a),a.detectRetina&&re.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ae(c,"load",l(this._tileOnLoad,this,a,c)),ae(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:re.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){re.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=x,a.onerror=x,!a.complete)){a.src=Y;var c=this._tiles[r].coords;je(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),Va.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Va.prototype._tileReady.call(this,r,a,c)}});function Tg(r,a){return new Xs(r,a)}var Ig=Xs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=j(this,a);var _=a.detectRetina&&re.retina?2:1,w=this.getTileSize();c.width=w.x*_,c.height=w.y*_,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Xs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),_=f.min,w=f.max,k=(this._wmsVersion>=1.3&&this._crs===rt?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),z=Xs.prototype.getTileUrl.call(this,r);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function kT(r,a){return new Ig(r,a)}Xs.WMS=Ig,Tg.wms=kT;var _i=Me.extend({options:{padding:.1},initialize:function(r){j(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),w=f.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(r,a));re.any3d?Bn(this._container,w,c):de(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Pg=_i.extend({options:{tolerance:0},getEvents:function(){var r=_i.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ae(r,"mousemove",this._onMouseMove,this),ae(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,je(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=re.retina?2:1;de(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){_i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,_;for(_=0;_<a.length;_++){if(f=Number(a[_]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,_,w,k=r._parts,z=k.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,_=k[c].length;f<_;f++)w=k[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),_=(Math.max(Math.round(r._radiusY),1)||f)/f;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(a.x,a.y/_,f,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(_e(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Sg(r){return re.canvas?new Pg(r):null}var Fa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),AT={_initContainer:function(){this._container=Ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_i.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Fa("shape");_e(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Fa("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;je(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,_=r._container;_.stroked=!!f.stroke,_.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Fa("stroke")),_.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=R(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(_.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Fa("fill")),_.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(_.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){ci(r._container)},_bringToBack:function(r){Wi(r._container)}},Qu=re.vml?Fa:Ts,za=_i.extend({_initContainer:function(){this._container=Qu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),de(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Qu("path");r.options.className&&_e(a,r.options.className),r.options.interactive&&_e(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){je(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,oa(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,_="a"+c+","+f+" 0 1,0 ",w=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(r,w)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){ci(r._path)},_bringToBack:function(r){Wi(r._path)}});re.vml&&za.include(AT);function Cg(r){return re.svg||re.vml?new za(r):null}xe.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Sg(r)||Cg(r)}});var kg=Qs.extend({initialize:function(r,a){Qs.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Ne(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function bT(r,a){return new kg(r,a)}za.create=Qu,za.pointsToPath=oa,gi.geometryToLayer=Wu,gi.coordsToLatLng=md,gi.coordsToLatLngs=Hu,gi.latLngToCoords=gd,gi.latLngsToCoords=$u,gi.getFeature=Ys,gi.asFeature=qu,xe.mergeOptions({boxZoom:!0});var Ag=tn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kn(),Ta(),this._startPoint=this._map.mouseEventToContainerPoint(r),ae(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ie("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new he(this._point,this._startPoint),c=a.getSize();de(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(je(this._box),Ue(this._container,"leaflet-crosshair")),An(),Ia(),De(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",Ag),xe.mergeOptions({doubleClickZoom:!0});var bg=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,_=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(r.containerPoint,_)}});xe.addInitHook("addHandler","doubleClickZoom",bg),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ng=tn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new bn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ne(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,_=(f-a+c)%r+a-c,w=(f+a+c)%r-a-c,k=Math.abs(_+c)<Math.abs(w+c)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,z=_.multiplyBy(k/w),B=z.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(Z/B),le=Z/(c.inertiaDeceleration*k),we=te.multiplyBy(-le/2).round();!we.x&&!we.y?a.fire("moveend"):(we=a._limitOffset(we,a.options.maxBounds),D(function(){a.panBy(we,{duration:le,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",Ng),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rg=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ae(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,_;for(f=0,_=c.left.length;f<_;f++)a[c.left[f]]=[-1*r,0];for(f=0,_=c.right.length;f<_;f++)a[c.right[f]]=[r,0];for(f=0,_=c.down.length;f<_;f++)a[c.down[f]]=[0,r];for(f=0,_=c.up.length;f<_;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,_;for(f=0,_=c.zoomIn.length;f<_;f++)a[c.zoomIn[f]]=r;for(f=0,_=c.zoomOut.length;f<_;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(_)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;en(r)}}});xe.addInitHook("addHandler","keyboard",Rg),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lg=tn.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Ou(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),en(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(_/c)*c:_,k=r._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});xe.addInitHook("addHandler","scrollWheelZoom",Lg);var NT=600;xe.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var Og=tn.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",$e),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),NT),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",$e),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});xe.addInitHook("addHandler","tapHold",Og),xe.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Dg=tn.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),$e(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),_=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(k,this,!0),$e(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",Dg),xe.BoxZoom=Ag,xe.DoubleClickZoom=bg,xe.Drag=Ng,xe.Keyboard=Rg,xe.ScrollWheelZoom=Lg,xe.TapHold=Og,xe.TouchZoom=Dg,n.Bounds=he,n.Browser=re,n.CRS=ct,n.Canvas=Pg,n.Circle=pd,n.CircleMarker=Bu,n.Class=Ye,n.Control=$t,n.DivIcon=Eg,n.DivOverlay=$n,n.DomEvent=Du,n.DomUtil=Ru,n.Draggable=bn,n.Evented=jt,n.FeatureGroup=et,n.GeoJSON=gi,n.GridLayer=Va,n.Handler=tn,n.Icon=Hn,n.ImageOverlay=Zu,n.LatLng=ye,n.LatLngBounds=Te,n.Layer=Me,n.LayerGroup=qe,n.LineUtil=T,n.Map=xe,n.Marker=Uu,n.Mixin=$r,n.Path=Ki,n.Point=q,n.PolyUtil=Zs,n.Polygon=Qs,n.Polyline=mi,n.Popup=Gu,n.PosAnimation=Na,n.Projection=ee,n.Rectangle=kg,n.Renderer=_i,n.SVG=za,n.SVGOverlay=xg,n.TileLayer=Xs,n.Tooltip=Ku,n.Transformation=zi,n.Util=N,n.VideoOverlay=wg,n.bind=l,n.bounds=ve,n.canvas=Sg,n.circle=_T,n.circleMarker=gT,n.control=Vt,n.divIcon=ST,n.extend=s,n.featureGroup=Ks,n.geoJSON=yg,n.geoJson=wT,n.gridLayer=CT,n.icon=pT,n.imageOverlay=xT,n.latLng=pe,n.latLngBounds=Ne,n.layerGroup=Gi,n.map=Us,n.marker=mT,n.point=X,n.polygon=yT,n.polyline=vT,n.popup=IT,n.rectangle=bT,n.setOptions=j,n.stamp=d,n.svg=Cg,n.svgOverlay=TT,n.tileLayer=Tg,n.tooltip=PT,n.transformation=oi,n.version=i,n.videoOverlay=ET;var RT=window.L;n.noConflict=function(){return window.L=RT,this},window.L=n})})(Pp,Pp.exports);var ia=Pp.exports;const mu=yy(ia);function ud(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function cd(t,e){return e==null?function(i,s){const o=$.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=$.useRef();o.current||(o.current=t(i,s));const l=$.useRef(i),{instance:h}=o.current;return $.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function dT(t,e){$.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function fT(t){return function(n){const i=pg(),s=t(ld(n,i),i);return aT(i.map,n.attribution),mg(s.current,n.eventHandlers),dT(s.current,i),s}}function IL(t,e){const n=$.useRef();$.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function PL(t){return function(n){const i=pg(),s=t(ld(n,i),i);return mg(s.current,n.eventHandlers),dT(s.current,i),IL(s.current,n),s}}function SL(t,e){const n=cd(t,e),i=fT(n);return hT(i)}function CL(t,e){const n=cd(t),i=TL(n,e);return xL(i)}function kL(t,e){const n=cd(t,e),i=PL(n);return hT(i)}function AL(t,e){const n=cd(t,e),i=fT(n);return EL(i)}function bL(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}const NL=kL(function({center:e,children:n,...i},s){const o=new ia.Circle(e,i);return ud(o,lT(s,{overlayContainer:o}))},vL);function Sp(){return Sp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sp.apply(this,arguments)}function RL({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:g,...y},x){const[I]=$.useState({className:s,id:o,style:h}),[O,M]=$.useState(null);$.useImperativeHandle(x,()=>(O==null?void 0:O.map)??null,[O]);const j=$.useCallback(A=>{if(A!==null&&O===null){const P=new ia.Map(A,y);n!=null&&g!=null?P.setView(n,g):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),M(wL(P))}},[]);$.useEffect(()=>()=>{O==null||O.map.remove()},[O]);const U=O?wl.createElement(cT,{value:O},i):l??null;return wl.createElement("div",Sp({},I,{ref:j}),U)}const LL=$.forwardRef(RL),rf=SL(function({position:e,...n},i){const s=new ia.Marker(e,n);return ud(s,lT(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),sf=CL(function(e,n){const i=new ia.Popup(e,n.overlayContainer);return ud(i,n)},function(e,n,{position:i},s){$.useEffect(function(){const{instance:l}=e;function h(g){g.popup===l&&(l.update(),s(!0))}function d(g){g.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),OL=AL(function({url:e,...n},i){const s=new ia.TileLayer(e,ld(n,i));return ud(s,i)},function(e,n,i){bL(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),DL=[16.8661,96.1951],ML=13,jL="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",VL='&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>';delete mu.Icon.Default.prototype._getIconUrl;mu.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const FL=mu.divIcon({className:"",html:`<div style="
    width:36px; height:36px;
    background:#FF5A1F;
    border-radius:50% 50% 50% 0;
    transform:rotate(-45deg);
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.3);
    display:flex; align-items:center; justify-content:center;
  ">
    <span style="transform:rotate(45deg); font-size:16px;"></span>
  </div>`,iconSize:[36,36],iconAnchor:[18,36]}),zL=mu.divIcon({className:"",html:`<div style="
    width:32px; height:32px;
    background:#22c55e;
    border-radius:50%;
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
    display:flex; align-items:center; justify-content:center;
    font-size:14px;
  "></div>`,iconSize:[32,32],iconAnchor:[16,16]}),UL=mu.divIcon({className:"",html:`<div style="
    width:32px; height:32px;
    background:#ef4444;
    border-radius:50%;
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
    display:flex; align-items:center; justify-content:center;
    font-size:14px;
  "></div>`,iconSize:[32,32],iconAnchor:[16,16]});function ra({riders:t=[],pickupPoint:e=null,dropoffPoint:n=null,height:i="100%",zoom:s=ML,center:o=DL}){return p.jsxs(LL,{center:o,zoom:s,style:{height:i,width:"100%",borderRadius:"1rem"},zoomControl:!1,children:[p.jsx(OL,{url:jL,attribution:VL}),t.map(l=>l.currentLocation&&p.jsx(rf,{position:[l.currentLocation.lat,l.currentLocation.lng],icon:FL,children:p.jsx(sf,{children:p.jsxs("div",{className:"text-xs",children:[p.jsx("p",{className:"font-bold",children:l.name}),p.jsx("p",{className:"text-gray-500",children:l.isAvailable?" Available":" Busy"}),p.jsxs("p",{children:[" ",l.rating]})]})})},l.id)),e&&p.jsxs(p.Fragment,{children:[p.jsx(rf,{position:[e.lat,e.lng],icon:zL,children:p.jsx(sf,{children:p.jsxs("span",{className:"text-xs font-bold",children:[" ",e.address]})})}),p.jsx(NL,{center:[e.lat,e.lng],radius:200,pathOptions:{color:"#22c55e",fillColor:"#22c55e",fillOpacity:.1}})]}),n&&p.jsx(rf,{position:[n.lat,n.lng],icon:UL,children:p.jsx(sf,{children:p.jsxs("span",{className:"text-xs font-bold",children:[" ",n.address]})})})]})}const Ch={pending:"",accepted:"",picked_up:"",delivered:"",cancelled:""},gg={pending:"bg-yellow-100 text-yellow-700",accepted:"bg-blue-100 text-blue-700",picked_up:"bg-purple-100 text-purple-700",delivered:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"};function BL({order:t,onClick:e}){const n=i=>{const s=Math.floor((Date.now()-i)/6e4);return s<60?`${s} `:`${Math.floor(s/60)} `};return p.jsxs("div",{onClick:e,className:"card mb-3 cursor-pointer active:scale-[0.98] transition-transform animate-slide-up",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"text-xs text-gray-400 font-body",children:["#",t.id]}),p.jsxs("p",{className:"font-display font-bold text-base text-gray-800",children:[t.price.toLocaleString()," "]})]}),p.jsx("span",{className:`status-badge ${gg[t.status]}`,children:Ch[t.status]})]}),p.jsxs("div",{className:"space-y-2 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 flex-shrink-0"}),p.jsx("p",{className:"text-xs text-gray-600 font-body truncate",children:t.pickup.address})]}),p.jsx("div",{className:"ml-1 w-px h-3 bg-gray-200 ml-[3px]"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 flex-shrink-0"}),p.jsx("p",{className:"text-xs text-gray-600 font-body truncate",children:t.dropoff.address})]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[p.jsx("p",{className:"text-xs text-gray-400",children:n(t.createdAt)}),p.jsxs("p",{className:"text-xs text-gray-500",children:[t.distance," km"]})]})]})}const En=[{id:"ORD001",customerId:"user1",riderId:"rider1",status:"accepted",pickup:{address:" ",lat:16.8409,lng:96.1353},dropoff:{address:" ",lat:16.82,lng:96.16},price:3500,distance:4.2,note:"",createdAt:new Date(Date.now()-10*60*1e3)},{id:"ORD002",customerId:"user2",riderId:null,status:"pending",pickup:{address:" ",lat:16.85,lng:96.12},dropoff:{address:" ",lat:16.87,lng:96.19},price:5e3,distance:6.8,note:"",createdAt:new Date(Date.now()-2*60*1e3)},{id:"ORD003",customerId:"user3",riderId:"rider2",status:"delivered",pickup:{address:" ",lat:16.83,lng:96.17},dropoff:{address:" ",lat:16.9,lng:96.21},price:4200,distance:5.1,note:"",createdAt:new Date(Date.now()-60*60*1e3)}],Ci=[{id:"rider1",name:"",phone:"09250001111",isOnline:!0,isAvailable:!1,currentLocation:{lat:16.845,lng:96.14},rating:4.8,totalDeliveries:142,vehicleType:"bike"},{id:"rider2",name:"",phone:"09250002222",isOnline:!0,isAvailable:!0,currentLocation:{lat:16.86,lng:96.16},rating:4.6,totalDeliveries:98,vehicleType:"bike"},{id:"rider3",name:"",phone:"09250003333",isOnline:!1,isAvailable:!1,currentLocation:{lat:16.83,lng:96.18},rating:4.9,totalDeliveries:210,vehicleType:"car"}];function WL(){const{user:t}=na(),e=zn(),n=En.find(s=>s.status==="accepted"),i=Ci.filter(s=>s.isOnline);return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[p.jsxs("div",{className:"px-4 pt-4 pb-2 animate-slide-up",children:[p.jsx("p",{className:"text-gray-400 text-xs font-body",children:" "}),p.jsx("h2",{className:"text-xl font-display font-black text-dark",children:t==null?void 0:t.name})]}),p.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.05s"},children:p.jsxs("div",{className:"h-52 rounded-3xl overflow-hidden shadow-card relative",children:[p.jsx(ra,{riders:i,height:"100%"}),p.jsxs("div",{className:"absolute top-3 left-3 bg-white rounded-xl px-3 py-1.5 shadow-sm flex items-center gap-1.5",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),p.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[i.length," Riders Online"]})]})]})}),p.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>e("/customer/order"),className:"bg-primary-500 rounded-3xl p-4 text-left shadow-primary active:scale-95 transition-all",children:[p.jsx("span",{className:"text-3xl block mb-2",children:""}),p.jsx("p",{className:"text-white font-display font-bold text-sm",children:"Order "}),p.jsx("p",{className:"text-primary-200 text-xs font-body",children:""})]}),p.jsxs("button",{onClick:()=>e("/customer/track"),className:"bg-white rounded-3xl p-4 text-left shadow-card active:scale-95 transition-all",children:[p.jsx("span",{className:"text-3xl block mb-2",children:""}),p.jsx("p",{className:"text-dark font-display font-bold text-sm",children:"Track Order"}),p.jsx("p",{className:"text-gray-400 text-xs font-body",children:""})]})]})}),n&&p.jsxs("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.15s"},children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:"Active Order"}),p.jsxs("div",{className:"bg-primary-500 rounded-3xl p-4 text-white shadow-primary",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:["#",n.id]}),p.jsx("span",{className:"text-xs",children:" Rider "})]}),p.jsxs("p",{className:"text-xs text-primary-200 mb-1",children:[" ",n.pickup.address]}),p.jsxs("p",{className:"text-xs text-primary-200",children:[" ",n.dropoff.address]}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20 flex justify-between",children:[p.jsxs("span",{className:"text-sm font-display font-bold",children:[n.price.toLocaleString()," "]}),p.jsx("button",{onClick:()=>e("/customer/track"),className:"text-xs bg-white text-primary-500 font-bold px-3 py-1 rounded-full",children:"Track "})]})]})]}),p.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.2s"},children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Recent Orders"}),p.jsx("div",{className:"stagger",children:En.slice(0,3).map(s=>p.jsx(BL,{order:s,onClick:()=>e("/customer/track")},s.id))})]})]}),p.jsx(Es,{})]})}const HL="8485367356:AAEsrFAwoC6uNlLUdvCvMUmZ6gG3E-m3zCQ",$L="-1003210175584",qL=`https://api.telegram.org/bot${HL}`;async function ZL(t,e,n={}){try{const s=await(await fetch(`${qL}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t,text:e,parse_mode:"HTML",...n})})).json();if(!s.ok)throw new Error(s.description);return s}catch(i){return console.error("Telegram sendMessage error:",i),null}}async function GL(t){const e=`
 <b>Order  !</b>

 <b>Order #${t.id}</b>

 Customer: ${t.customerId}
 From: ${t.pickup.address}
 To: ${t.dropoff.address}
 Price: ${t.price.toLocaleString()} 
 Distance: ${t.distance} km
 Time: ${new Date().toLocaleString("my-MM")}

 Status: <b>Pending - Rider </b>
  `.trim();return await ZL($L,e,{reply_markup:{inline_keyboard:[[{text:" Dashboard ",url:"https://gobike.mm/admin"}]]}})}const _y=[{address:" ",lat:16.8409,lng:96.1353},{address:" ",lat:16.85,lng:96.12},{address:" ",lat:16.82,lng:96.16},{address:" ",lat:16.87,lng:96.19},{address:" ",lat:16.88,lng:96.11},{address:" ",lat:16.86,lng:96.13},{address:" ",lat:16.89,lng:96.15},{address:" ",lat:16.81,lng:96.17},{address:" ",lat:16.79,lng:96.18},{address:" ",lat:16.91,lng:96.16},{address:" ",lat:16.87,lng:96.14},{address:" ",lat:16.83,lng:96.15},{address:" ",lat:16.84,lng:96.125},{address:" ",lat:16.9,lng:96.09},{address:" ",lat:16.855,lng:96.145}],vy=[{value:"document",label:" "},{value:"food",label:" "},{value:"clothes",label:" "},{value:"medicine",label:" "},{value:"electronic",label:" "},{value:"other",label:" "}],KL=(t,e)=>{if(!t||!e)return 0;const n=Math.sqrt(Math.pow((t.lat-e.lat)*111,2)+Math.pow((t.lng-e.lng)*111,2));return Math.round(n*800+1500)};function QL(){var C;const t=zn(),{user:e}=na(),[n,i]=$.useState(1),[s,o]=$.useState(null),[l,h]=$.useState(null),[d,g]=$.useState(""),[y,x]=$.useState(""),[I,O]=$.useState((e==null?void 0:e.phone)||""),[M,j]=$.useState(""),[U,A]=$.useState(!1),[P,R]=$.useState(!1),H=KL(s,l),Y=async()=>{A(!0);try{const E=await rL(HR($o,"orders"),{customerId:e.uid,customerName:e.name,customerPhone:I,itemType:d,itemValue:Number(y),pickup:{address:s.address,lat:s.lat,lng:s.lng},dropoff:{address:l.address,lat:l.lat,lng:l.lng},deliveryFee:H,note:M,status:"pending",riderId:null,riderName:null,createdAt:Sh(),updatedAt:Sh()});await GL({id:E.id,customerId:e.uid,customerName:e.name,customerPhone:I,pickup:s,dropoff:l,price:H,itemType:d,note:M}),R(!0),setTimeout(()=>t("/customer"),2500)}catch{alert("Order   ")}finally{A(!1)}};if(P)return p.jsxs("div",{className:"min-h-screen bg-surface flex items-center justify-center flex-col gap-4 px-6",children:[p.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-4xl animate-bounce",children:""}),p.jsx("h2",{className:"text-2xl font-display font-black text-dark",children:"Order !"}),p.jsx("p",{className:"text-gray-400 text-sm text-center font-body",children:"Rider   "}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),p.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),p.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]});const J=["","",""];return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Order "}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-28",children:[p.jsxs("div",{className:"px-4 py-4",children:[p.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(E=>p.jsxs("div",{className:"flex items-center flex-1",children:[p.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold transition-all
                  ${n>=E?"bg-primary-500 text-white":"bg-gray-200 text-gray-400"}`,children:E}),E<3&&p.jsx("div",{className:`flex-1 h-1 mx-1 rounded transition-all ${n>E?"bg-primary-500":"bg-gray-200"}`})]},E))}),p.jsx("div",{className:"flex justify-between mt-1",children:J.map(E=>p.jsx("span",{className:"text-[10px] text-gray-400",children:E},E))})]}),p.jsx("div",{className:"px-4 mb-4",children:p.jsx("div",{className:"h-44 rounded-3xl overflow-hidden shadow-card",children:p.jsx(ra,{pickupPoint:s,dropoffPoint:l,height:"100%"})})}),n===1&&p.jsxs("div",{className:"px-4 animate-slide-up space-y-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:" "}),p.jsx("div",{className:"space-y-2",children:_y.map(E=>p.jsx("button",{onClick:()=>o(E),className:`w-full card text-left active:scale-[0.98] transition-all
                      ${(s==null?void 0:s.address)===E.address?"border-2 border-primary-500 bg-primary-50":""}`,children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsx("span",{className:"text-sm font-body text-gray-700",children:E.address}),(s==null?void 0:s.address)===E.address&&p.jsx("span",{className:"ml-auto text-primary-500",children:""})]})},E.address))})]}),s&&p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:" "}),p.jsx("div",{className:"space-y-2",children:_y.filter(E=>E.address!==(s==null?void 0:s.address)).map(E=>p.jsx("button",{onClick:()=>h(E),className:`w-full card text-left active:scale-[0.98] transition-all
                        ${(l==null?void 0:l.address)===E.address?"border-2 border-primary-500 bg-primary-50":""}`,children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsx("span",{className:"text-sm font-body text-gray-700",children:E.address}),(l==null?void 0:l.address)===E.address&&p.jsx("span",{className:"ml-auto text-primary-500",children:""})]})},E.address))})]})]}),n===2&&p.jsxs("div",{className:"px-4 animate-slide-up space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-2 block uppercase tracking-wider",children:" "}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:vy.map(E=>p.jsx("button",{onClick:()=>g(E.value),className:`card text-left text-sm py-3 active:scale-[0.98] transition-all
                      ${d===E.value?"border-2 border-primary-500 bg-primary-50":""}`,children:E.label},E.value))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:"  ()"}),p.jsx("input",{type:"number",placeholder:" - 50000",value:y,onChange:E=>x(E.target.value),className:"input-field"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:"  "}),p.jsx("input",{type:"tel",placeholder:"09xxxxxxxx",value:I,onChange:E=>O(E.target.value),className:"input-field"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:" "}),p.jsx("textarea",{rows:3,placeholder:"...",value:M,onChange:E=>j(E.target.value),className:"input-field resize-none"})]})]}),n===3&&p.jsx("div",{className:"px-4 animate-slide-up",children:p.jsxs("div",{className:"card mb-4 space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:""}),p.jsx("p",{className:"text-sm font-semibold",children:s==null?void 0:s.address})]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 ml-4"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:""}),p.jsx("p",{className:"text-sm font-semibold",children:l==null?void 0:l.address})]})]}),p.jsxs("div",{className:"border-t border-gray-100 pt-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400",children:""}),p.jsx("span",{className:"font-semibold",children:(C=vy.find(E=>E.value===d))==null?void 0:C.label})]}),p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400",children:""}),p.jsxs("span",{className:"font-semibold",children:[Number(y).toLocaleString()," "]})]}),p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400",children:""}),p.jsx("span",{className:"font-semibold",children:I})]}),p.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-100",children:[p.jsx("span",{className:"text-gray-500 font-semibold",children:"Delivery Fee"}),p.jsxs("span",{className:"text-xl font-display font-black text-primary-500",children:[H.toLocaleString()," "]})]})]})]})})]}),p.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-4 pb-8",children:[n===1&&p.jsx("button",{onClick:()=>i(2),disabled:!s||!l,className:"btn-primary disabled:opacity-50",children:" "}),n===2&&p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>i(1),className:"flex-1 py-4 rounded-2xl border border-gray-200 font-bold text-gray-500",children:" "}),p.jsx("button",{onClick:()=>i(3),disabled:!d||!y||!I,className:"flex-[2] btn-primary disabled:opacity-50",children:" "})]}),n===3&&p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>i(2),className:"flex-1 py-4 rounded-2xl border border-gray-200 font-bold text-gray-500",children:" "}),p.jsx("button",{onClick:Y,disabled:U,className:"flex-[2] btn-primary disabled:opacity-50",children:U?"...":` Order  (${H.toLocaleString()} )`})]})]})]})}const of=["pending","accepted","picked_up","delivered"];function YL(){const t=En[0],e=Ci[0],[n,i]=$.useState(e.currentLocation);$.useEffect(()=>{const o=setInterval(()=>{i(l=>({lat:l.lat+(Math.random()-.5)*.001,lng:l.lng+(Math.random()-.5)*.001}))},3e3);return()=>clearInterval(o)},[]);const s=of.indexOf(t.status);return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Track Order"}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[p.jsxs("div",{className:"h-64 relative",children:[p.jsx(ra,{riders:[{...e,currentLocation:n}],pickupPoint:t.pickup,dropoffPoint:t.dropoff,height:"100%"}),p.jsxs("div",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"}),"LIVE"]})]}),p.jsx("div",{className:"px-4 -mt-4 relative z-10",children:p.jsxs("div",{className:"card animate-slide-up",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"text-xs text-gray-400",children:["Order #",t.id]}),p.jsxs("p",{className:"text-lg font-display font-black text-dark",children:[t.price.toLocaleString()," "]})]}),p.jsx("span",{className:`status-badge ${gg[t.status]}`,children:Ch[t.status]})]}),p.jsx("div",{className:"flex items-center justify-between mb-4",children:of.map((o,l)=>p.jsxs("div",{className:"flex items-center flex-1",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm border-2 transition-all
                      ${l<=s?"bg-primary-500 border-primary-500 text-white":"bg-white border-gray-200 text-gray-400"}`,children:l<=s?"":l+1}),p.jsx("p",{className:"text-[9px] text-gray-400 mt-1 text-center w-14",children:Ch[o]})]}),l<of.length-1&&p.jsx("div",{className:`flex-1 h-0.5 mx-1 mb-4 transition-all ${l<s?"bg-primary-500":"bg-gray-200"}`})]},o))})]})}),p.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.1s"},children:p.jsx("div",{className:"card",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-display font-bold text-dark text-sm",children:e.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:[" ",e.rating,"  ",e.totalDeliveries," deliveries"]})]}),p.jsx("a",{href:`tel:${e.phone}`,className:"w-10 h-10 bg-primary-500 rounded-2xl flex items-center justify-center text-white shadow-primary",children:""})]})})}),p.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.15s"},children:p.jsxs("div",{className:"card",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Route"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Pickup"}),p.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t.pickup.address})]})]}),p.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[p.jsx("div",{className:"w-px h-6 bg-gray-200"}),p.jsxs("span",{className:"text-xs text-gray-400",children:[t.distance," km"]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Dropoff"}),p.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t.dropoff.address})]})]})]})]})})]}),p.jsx(Es,{})]})}function XL(){const{user:t}=na(),e=zn(),[n,i]=$.useState(!0),s=En.filter(l=>l.status==="pending"),o=Ci[0];return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[p.jsx("div",{className:`px-4 py-4 ${n?"bg-dark":"bg-gray-700"} transition-colors`,children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 text-xs font-body",children:" "}),p.jsx("h2",{className:"text-lg font-display font-black text-white",children:t==null?void 0:t.name}),p.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p.jsxs("span",{className:"text-yellow-400 text-xs",children:[" ",o.rating]}),p.jsx("span",{className:"text-gray-500 text-xs",children:""}),p.jsxs("span",{className:"text-gray-400 text-xs",children:[o.totalDeliveries," deliveries"]})]})]}),p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("button",{onClick:()=>i(!n),className:`relative w-14 h-8 rounded-full transition-colors ${n?"bg-green-500":"bg-gray-500"}`,children:p.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n?"translate-x-7":"translate-x-1"}`})}),p.jsx("span",{className:`text-[10px] font-bold ${n?"text-green-400":"text-gray-400"}`,children:n?"ONLINE":"OFFLINE"})]})]})}),p.jsx("div",{className:"px-4 mt-4 mb-4 animate-slide-up",children:p.jsx("div",{className:"h-44 rounded-3xl overflow-hidden shadow-card",children:p.jsx(ra,{riders:n?[o]:[],height:"100%"})})}),p.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.05s"},children:p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{icon:"",value:"5",label:" Orders"},{icon:"",value:"22,500",label:" ()"},{icon:"",value:"4.8",label:"Rating"}].map(l=>p.jsxs("div",{className:"card text-center",children:[p.jsx("p",{className:"text-xl mb-1",children:l.icon}),p.jsx("p",{className:"font-display font-black text-dark text-base",children:l.value}),p.jsx("p",{className:"text-[10px] text-gray-400 font-body",children:l.label})]},l.label))})}),n&&p.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.1s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Available Orders"}),p.jsxs("span",{className:"bg-primary-100 text-primary-600 text-xs font-bold px-2 py-0.5 rounded-full",children:[s.length," new"]})]}),s.length===0?p.jsxs("div",{className:"card text-center py-8",children:[p.jsx("p",{className:"text-3xl mb-2",children:""}),p.jsx("p",{className:"text-gray-400 text-sm font-body",children:"Order "})]}):p.jsx("div",{className:"space-y-3 stagger",children:s.map(l=>p.jsxs("div",{className:"card animate-slide-up",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"text-xs text-gray-400",children:["#",l.id]}),p.jsxs("p",{className:"font-display font-black text-dark",children:[l.price.toLocaleString()," "]})]}),p.jsxs("span",{className:"text-xs text-gray-400",children:[l.distance," km"]})]}),p.jsxs("div",{className:"space-y-1.5 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),p.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.pickup.address})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),p.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.dropoff.address})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{className:"flex-1 py-2.5 rounded-xl bg-gray-100 text-gray-600 text-xs font-bold",children:" Reject"}),p.jsx("button",{onClick:()=>e("/rider/delivery"),className:"flex-1 py-2.5 rounded-xl bg-primary-500 text-white text-xs font-bold shadow-primary",children:" Accept"})]})]},l.id))})]}),!n&&p.jsxs("div",{className:"px-4 py-8 text-center animate-fade-in",children:[p.jsx("p",{className:"text-5xl mb-3",children:""}),p.jsx("p",{className:"text-gray-400 font-body text-sm",children:"Offline mode - Orders "}),p.jsx("button",{onClick:()=>i(!0),className:"mt-4 btn-primary w-auto px-8 inline-block",children:"Online "})]})]}),p.jsx(Es,{})]})}const Qa=[{key:"accepted",icon:"",label:"Order ",action:""},{key:"picked_up",icon:"",label:"",action:""},{key:"delivered",icon:"",label:"",action:null}];function JL(){const t=zn(),e=En[0],n=Ci[0],[i,s]=$.useState(0),[o,l]=$.useState(n.currentLocation);$.useEffect(()=>{const y=setInterval(()=>{l(x=>({lat:x.lat+(Math.random()-.5)*.001,lng:x.lng+(Math.random()-.5)*.001}))},2e3);return()=>clearInterval(y)},[]);const h=Qa[i],d=i===Qa.length-1,g=()=>{i<Qa.length-1&&s(i+1)};return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Active Delivery"}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-28",children:[p.jsxs("div",{className:"h-56 relative",children:[p.jsx(ra,{riders:[{...n,currentLocation:o}],pickupPoint:e.pickup,dropoffPoint:e.dropoff,height:"100%"}),p.jsxs("div",{className:"absolute top-3 left-3 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"}),"GPS Active"]})]}),p.jsx("div",{className:"px-4 -mt-4 relative z-10",children:p.jsxs("div",{className:`card animate-slide-up ${d?"border-2 border-green-400":""}`,children:[p.jsxs("div",{className:"text-center py-2",children:[p.jsx("span",{className:"text-4xl",children:h.icon}),p.jsx("p",{className:"font-display font-black text-dark text-lg mt-2",children:h.label})]}),p.jsx("div",{className:"flex items-center justify-center gap-2 my-4",children:Qa.map((y,x)=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all
                    ${x<=i?"bg-primary-500 border-primary-500 text-white":"bg-white border-gray-200 text-gray-400"}`,children:x<i?"":x+1}),x<Qa.length-1&&p.jsx("div",{className:`w-8 h-0.5 transition-all ${x<i?"bg-primary-500":"bg-gray-200"}`})]},y.key))})]})}),p.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.05s"},children:p.jsxs("div",{className:"card",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("p",{className:"text-xs text-gray-400",children:["#",e.id]}),p.jsxs("p",{className:"font-display font-black text-primary-500",children:[e.price.toLocaleString()," "]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Pickup"}),p.jsx("p",{className:"text-xs font-semibold text-gray-700",children:e.pickup.address})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Dropoff"}),p.jsx("p",{className:"text-xs font-semibold text-gray-700",children:e.dropoff.address})]})]})]}),e.note&&p.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[p.jsx("p",{className:"text-xs text-gray-400",children:""}),p.jsx("p",{className:"text-xs text-gray-600",children:e.note})]})]})})]}),p.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-4 pb-8",children:d?p.jsx("button",{onClick:()=>t("/rider"),className:"w-full bg-green-500 text-white font-display font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all",children:" Delivery ! Dashboard "}):p.jsxs("button",{onClick:g,className:"btn-primary",children:[h.action," "]})})]})}function e2(){const{user:t}=na(),[e,n]=$.useState({coinBalance:5e3,totalEarned:25e3,totalCommission:2500,isLowBalance:!1}),[i,s]=$.useState([{id:"t1",type:"topup",amount:5e3,commission:0,netAmount:5e3,note:"Admin top-up",balanceAfter:5e3,createdAt:new Date(Date.now()-2*60*60*1e3)},{id:"t2",type:"commission",amount:3500,commission:350,netAmount:3150,note:"Order #ORD001 - 10% commission",balanceAfter:4650,createdAt:new Date(Date.now()-30*60*1e3)},{id:"t3",type:"commission",amount:5e3,commission:500,netAmount:4500,note:"Order #ORD002 - 10% commission",balanceAfter:4150,createdAt:new Date(Date.now()-10*60*1e3)}]),o=l=>{const h=Math.floor((Date.now()-l)/6e4);return h<60?`${h} `:`${Math.floor(h/60)} `};return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Wallet"}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[e.isLowBalance&&p.jsxs("div",{className:"mx-4 mt-4 bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center gap-2 animate-slide-up",children:[p.jsx("span",{className:"text-xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-bold text-red-600",children:"Coin !"}),p.jsx("p",{className:"text-xs text-red-400",children:"Admin  coin  "})]})]}),p.jsx("div",{className:"px-4 mt-4 animate-slide-up",children:p.jsxs("div",{className:"bg-dark rounded-3xl p-5 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-500 rounded-full opacity-10 blur-2xl -translate-y-1/2 translate-x-1/2"}),p.jsx("p",{className:"text-gray-400 text-xs font-body mb-1",children:"  Coin"}),p.jsxs("p",{className:"text-4xl font-display font-black text-white",children:[e.coinBalance.toLocaleString(),p.jsx("span",{className:"text-primary-400 text-lg ml-1",children:""})]}),p.jsxs("div",{className:"flex gap-4 mt-4 pt-4 border-t border-white/10",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:" "}),p.jsxs("p",{className:"text-sm font-display font-bold text-green-400",children:["+",e.totalEarned.toLocaleString()," "]})]}),p.jsx("div",{className:"w-px bg-white/10"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Commission "}),p.jsxs("p",{className:"text-sm font-display font-bold text-red-400",children:["-",e.totalCommission.toLocaleString()," "]})]})]})]})}),p.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.05s"},children:p.jsxs("div",{className:"card flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Commission Rate"}),p.jsxs("p",{className:"text-xs text-gray-400",children:["Delivery  ",p.jsx("span",{className:"text-primary-500 font-bold",children:"10%"})," "]})]})]})}),p.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"card",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Commission "}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[3e3,5e3,8e3,1e4,15e3,2e4].map(l=>p.jsxs("div",{className:"bg-surface rounded-xl p-2 text-center",children:[p.jsx("p",{className:"text-xs text-gray-500",children:l.toLocaleString()}),p.jsxs("p",{className:"text-xs font-bold text-red-500",children:["-",(l*.1).toLocaleString()]}),p.jsxs("p",{className:"text-xs font-bold text-green-600",children:["=",(l*.9).toLocaleString()]})]},l))}),p.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[p.jsx("span",{className:"text-[10px] text-gray-400",children:"Delivery "}),p.jsx("span",{className:"text-[10px] text-red-400",children:"Commission (10%)"}),p.jsx("span",{className:"text-[10px] text-green-500",children:" (90%)"})]})]})}),p.jsxs("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.15s"},children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Transaction History"}),p.jsx("div",{className:"space-y-2 stagger",children:i.map(l=>p.jsx("div",{className:"card animate-slide-up",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center text-xl
                    ${l.type==="topup"?"bg-green-100":"bg-red-100"}`,children:l.type==="topup"?"":""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-xs font-semibold text-dark",children:l.note}),p.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:o(l.createdAt)})]}),p.jsx("div",{className:"text-right",children:l.type==="topup"?p.jsxs("p",{className:"text-sm font-display font-black text-green-500",children:["+",l.amount.toLocaleString()]}):p.jsxs("div",{children:[p.jsxs("p",{className:"text-xs font-bold text-red-500",children:["-",l.commission.toLocaleString()," "]}),p.jsxs("p",{className:"text-[10px] text-gray-400",children:[": ",l.balanceAfter.toLocaleString()]})]})})]})},l.id))})]})]}),p.jsx(Es,{})]})}function t2(){const t=zn(),e=Ci.filter(o=>o.isOnline).length,n=En.reduce((o,l)=>o+l.price,0),i=En.filter(o=>o.status==="pending").length,s=[{icon:"",value:e,total:Ci.length,label:"Riders Online",color:"bg-green-50 text-green-600"},{icon:"",value:En.length,label:"Total Orders",color:"bg-blue-50 text-blue-600"},{icon:"",value:i,label:"Pending",color:"bg-yellow-50 text-yellow-600"},{icon:"",value:`${(n/1e3).toFixed(0)}K`,label:"Revenue ()",color:"bg-primary-50 text-primary-600"}];return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[p.jsxs("div",{className:"bg-dark px-4 pt-4 pb-6 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-500 rounded-full opacity-10 blur-2xl -translate-y-1/2 translate-x-1/2"}),p.jsx("p",{className:"text-gray-400 text-xs font-body",children:"Admin Panel "}),p.jsx("h2",{className:"text-xl font-display font-black text-white",children:"Overview Dashboard"})]}),p.jsx("div",{className:"px-4 -mt-3 relative z-10 mb-4",children:p.jsx("div",{className:"grid grid-cols-2 gap-3 stagger",children:s.map(o=>p.jsxs("div",{className:"card animate-slide-up",children:[p.jsx("div",{className:`w-10 h-10 rounded-2xl ${o.color} flex items-center justify-center text-xl mb-2`,children:o.icon}),p.jsxs("p",{className:"font-display font-black text-2xl text-dark",children:[o.value,o.total&&p.jsxs("span",{className:"text-gray-300 text-base font-normal",children:["/",o.total]})]}),p.jsx("p",{className:"text-xs text-gray-400 font-body",children:o.label})]},o.label))})}),p.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>t("/admin/map"),className:"card flex items-center gap-3 active:scale-95 transition-all",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-xl",children:""}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Live Map"}),p.jsx("p",{className:"text-xs text-gray-400",children:"Riders "})]})]}),p.jsxs("button",{onClick:()=>t("/admin/riders"),className:"card flex items-center gap-3 active:scale-95 transition-all",children:[p.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-2xl flex items-center justify-center text-xl",children:""}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Riders"}),p.jsx("p",{className:"text-xs text-gray-400",children:""})]})]})]})}),p.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.15s"},children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Recent Orders"}),p.jsx("button",{onClick:()=>t("/admin/orders"),className:"text-xs text-primary-500 font-semibold",children:"All "})]}),p.jsx("div",{className:"space-y-2 stagger",children:En.map(o=>p.jsx("div",{className:"card animate-slide-up",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsxs("p",{className:"text-xs font-bold text-dark",children:["#",o.id]}),p.jsx("span",{className:`status-badge ${gg[o.status]}`,children:Ch[o.status]})]}),p.jsxs("p",{className:"text-xs text-gray-400 truncate",children:[o.pickup.address,"  ",o.dropoff.address]})]}),p.jsx("p",{className:"text-sm font-display font-black text-primary-500 ml-2",children:o.price.toLocaleString()})]})},o.id))})]}),p.jsxs("div",{className:"px-4 mt-4 animate-slide-up",style:{animationDelay:"0.2s"},children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Riders Status"}),p.jsx("div",{className:"space-y-2 stagger",children:Ci.map(o=>p.jsx("div",{className:"card animate-slide-up",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-lg",children:""}),p.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white ${o.isOnline?"bg-green-500":"bg-gray-400"}`})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-semibold text-dark",children:o.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:[" ",o.rating,"  ",o.totalDeliveries," trips"]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:`text-xs font-bold ${o.isOnline?"text-green-500":"text-gray-400"}`,children:o.isOnline?" Online":" Offline"}),p.jsx("p",{className:"text-xs text-gray-400",children:o.isAvailable?"Available":"Busy"})]})]})},o.id))})]})]}),p.jsx(Es,{})]})}function n2(){const t=Ci.filter(e=>e.isOnline);return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Live Map"}),p.jsxs("div",{className:"flex-1 flex flex-col pb-16",children:[p.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 bg-white border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),p.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[t.length," Online Riders"]})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200"}),p.jsxs("span",{className:"text-xs text-gray-500",children:[" ",En.filter(e=>e.status==="accepted").length," Active Orders"]})]}),p.jsx("div",{className:"flex-1 px-3 py-3",children:p.jsx(ra,{riders:t,pickupPoint:En[0].pickup,dropoffPoint:En[0].dropoff,height:"100%",zoom:12})}),p.jsxs("div",{className:"px-4 py-2 flex items-center gap-4 bg-white border-t border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-primary-500"}),p.jsx("span",{className:"text-[10px] text-gray-500",children:"Rider"})]}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),p.jsx("span",{className:"text-[10px] text-gray-500",children:"Pickup"})]}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),p.jsx("span",{className:"text-[10px] text-gray-500",children:"Dropoff"})]})]})]}),p.jsx(Es,{})]})}const i2=Ci.map((t,e)=>({...t,coinBalance:[4150,850,12e3][e],totalEarned:[25e3,8e3,45e3][e],totalCommission:[2500,800,4500][e],isLowBalance:[!1,!0,!1][e]}));function r2(){const[t,e]=$.useState(i2),[n,i]=$.useState(null),[s,o]=$.useState(""),[l,h]=$.useState(""),[d,g]=$.useState(!1),[y,x]=$.useState(""),I=[5e3,1e4,2e4,5e4],O=async()=>{!n||!s||(g(!0),setTimeout(()=>{e(M=>M.map(j=>j.id===n.id?{...j,coinBalance:j.coinBalance+parseInt(s),isLowBalance:!1}:j)),x(`${n.name}  ${parseInt(s).toLocaleString()}  `),i(null),o(""),h(""),g(!1),setTimeout(()=>x(""),3e3)},800))};return p.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[p.jsx(Vi,{title:"Wallet Management"}),p.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[y&&p.jsxs("div",{className:"mx-4 mt-4 bg-green-50 border border-green-200 rounded-2xl p-3 flex items-center gap-2 animate-slide-up",children:[p.jsx("span",{children:""}),p.jsx("p",{className:"text-xs font-bold text-green-600",children:y})]}),p.jsx("div",{className:"px-4 mt-4 mb-4",children:p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{className:"card",children:[p.jsx("p",{className:"text-2xl font-display font-black text-dark",children:t.filter(M=>M.isLowBalance).length}),p.jsx("p",{className:"text-xs text-red-500 font-semibold",children:" Low Balance"})]}),p.jsxs("div",{className:"card",children:[p.jsx("p",{className:"text-2xl font-display font-black text-dark",children:t.reduce((M,j)=>M+j.coinBalance,0).toLocaleString()}),p.jsx("p",{className:"text-xs text-gray-400",children:"Total Coins ()"})]})]})}),p.jsxs("div",{className:"px-4",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Riders Wallet"}),p.jsx("div",{className:"space-y-3 stagger",children:t.map(M=>p.jsxs("div",{className:`card animate-slide-up border-2 ${M.isLowBalance?"border-red-200":"border-transparent"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-lg",children:""}),M.isLowBalance&&p.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-[8px] text-white font-bold",children:"!"})})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-display font-bold text-dark",children:M.name}),p.jsx("p",{className:"text-xs text-gray-400",children:M.phone})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:`text-base font-display font-black ${M.isLowBalance?"text-red-500":"text-dark"}`,children:M.coinBalance.toLocaleString()}),p.jsx("p",{className:"text-[10px] text-gray-400",children:""})]})]}),p.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-400 mb-3",children:[p.jsxs("span",{children:[" : ",M.totalEarned.toLocaleString()]}),p.jsxs("span",{children:[" Commission: ",M.totalCommission.toLocaleString()]})]}),p.jsx("button",{onClick:()=>i(M),className:`w-full py-2.5 rounded-xl text-xs font-bold transition-all
                    ${M.isLowBalance?"bg-red-500 text-white shadow-sm":"bg-primary-500 text-white shadow-primary"}`,children:" Coin "})]},M.id))})]})]}),n&&p.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:p.jsxs("div",{className:"bg-white w-full rounded-t-3xl p-5 animate-slide-up",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-400",children:"Coin "}),p.jsx("p",{className:"font-display font-black text-dark text-lg",children:n.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:[": ",p.jsxs("span",{className:"font-bold text-primary-500",children:[n.coinBalance.toLocaleString()," "]})]})]}),p.jsx("button",{onClick:()=>i(null),className:"text-gray-400 text-2xl",children:""})]}),p.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:I.map(M=>p.jsxs("button",{onClick:()=>o(String(M)),className:`py-2 rounded-xl text-xs font-bold border-2 transition-all
                    ${s===String(M)?"border-primary-500 bg-primary-500 text-white":"border-gray-200 text-gray-600"}`,children:[(M/1e3).toFixed(0),"K"]},M))}),p.jsx("input",{type:"number",placeholder:"Amount ()",value:s,onChange:M=>o(M.target.value),className:"input-field mb-3"}),p.jsx("input",{type:"text",placeholder:" (optional)",value:l,onChange:M=>h(M.target.value),className:"input-field mb-4"}),s&&p.jsxs("div",{className:"bg-green-50 rounded-xl p-3 mb-4 text-center",children:[p.jsx("p",{className:"text-xs text-gray-500",children:" "}),p.jsxs("p",{className:"text-xl font-display font-black text-green-600",children:[(n.coinBalance+parseInt(s||0)).toLocaleString()," "]})]}),p.jsx("button",{onClick:O,disabled:!s||d,className:"btn-primary",children:d?"...":` ${parseInt(s||0).toLocaleString()}  `})]})}),p.jsx(Es,{})]})}function s2(){return p.jsx(uL,{children:p.jsx(uC,{basename:"/Gobike26",children:p.jsxs(oC,{children:[p.jsx(zt,{path:"/",element:p.jsx(cL,{})}),p.jsx(zt,{path:"/signup",element:p.jsx(hL,{})}),p.jsx(zt,{path:"/login",element:p.jsx(dL,{})}),p.jsx(zt,{path:"/gobike-admin-2024",element:p.jsx(fL,{})}),p.jsx(zt,{path:"/customer",element:p.jsx(WL,{})}),p.jsx(zt,{path:"/customer/order",element:p.jsx(QL,{})}),p.jsx(zt,{path:"/customer/track",element:p.jsx(YL,{})}),p.jsx(zt,{path:"/rider",element:p.jsx(XL,{})}),p.jsx(zt,{path:"/rider/delivery",element:p.jsx(JL,{})}),p.jsx(zt,{path:"/rider/wallet",element:p.jsx(e2,{})}),p.jsx(zt,{path:"/admin",element:p.jsx(t2,{})}),p.jsx(zt,{path:"/admin/map",element:p.jsx(n2,{})}),p.jsx(zt,{path:"/admin/wallet",element:p.jsx(r2,{})}),p.jsx(zt,{path:"*",element:p.jsx(rC,{to:"/",replace:!0})})]})})})}af.createRoot(document.getElementById("root")).render(p.jsx(wl.StrictMode,{children:p.jsx(s2,{})}));
