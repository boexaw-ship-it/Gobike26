function mI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var gI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var By={exports:{}},Oh={},Wy={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),_I=Symbol.for("react.portal"),vI=Symbol.for("react.fragment"),yI=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),wI=Symbol.for("react.provider"),EI=Symbol.for("react.context"),TI=Symbol.for("react.forward_ref"),II=Symbol.for("react.suspense"),PI=Symbol.for("react.memo"),SI=Symbol.for("react.lazy"),n_=Symbol.iterator;function CI(t){return t===null||typeof t!="object"?null:(t=n_&&t[n_]||t["@@iterator"],typeof t=="function"?t:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$y=Object.assign,qy={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=qy,this.updater=n||Hy}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gy(){}Gy.prototype=Qo.prototype;function Bp(t,e,n){this.props=t,this.context=e,this.refs=qy,this.updater=n||Hy}var Wp=Bp.prototype=new Gy;Wp.constructor=Bp;$y(Wp,Qo.prototype);Wp.isPureReactComponent=!0;var i_=Array.isArray,Zy=Object.prototype.hasOwnProperty,Hp={current:null},Ky={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Zy.call(e,i)&&!Ky.hasOwnProperty(i)&&(r[i]=e[i]);var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){for(var d=Array(h),g=0;g<h;g++)d[g]=arguments[g+2];r.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)r[i]===void 0&&(r[i]=h[i]);return{$$typeof:tu,type:t,key:o,ref:l,props:r,_owner:Hp.current}}function AI(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $p(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function kI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var r_=/\/+/g;function Nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kI(""+t.key):e.toString(36)}function Sc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case tu:case _I:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Nd(l,0):i,i_(r)?(n="",t!=null&&(n=t.replace(r_,"$&/")+"/"),Sc(r,e,n,"",function(g){return g})):r!=null&&($p(r)&&(r=AI(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(r_,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",i_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Nd(o,h);l+=Sc(o,e,n,d,r)}else if(d=CI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Nd(o,h++),l+=Sc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function rc(t,e,n){if(t==null)return t;var i=[],r=0;return Sc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function bI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Cc={transition:null},NI={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Hp};function Yy(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:rc,forEach:function(t,e,n){rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rc(t,function(){e++}),e},toArray:function(t){return rc(t,function(e){return e})||[]},only:function(t){if(!$p(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Qo;Ee.Fragment=vI;Ee.Profiler=xI;Ee.PureComponent=Bp;Ee.StrictMode=yI;Ee.Suspense=II;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI;Ee.act=Yy;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=$y({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Hp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Zy.call(e,d)&&!Ky.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var g=0;g<d;g++)h[g]=arguments[g+2];i.children=h}return{$$typeof:tu,type:t.type,key:r,ref:o,props:i,_owner:l}};Ee.createContext=function(t){return t={$$typeof:EI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wI,_context:t},t.Consumer=t};Ee.createElement=Qy;Ee.createFactory=function(t){var e=Qy.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:TI,render:t}};Ee.isValidElement=$p;Ee.lazy=function(t){return{$$typeof:SI,_payload:{_status:-1,_result:t},_init:bI}};Ee.memo=function(t,e){return{$$typeof:PI,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};Ee.unstable_act=Yy;Ee.useCallback=function(t,e){return $t.current.useCallback(t,e)};Ee.useContext=function(t){return $t.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return $t.current.useEffect(t,e)};Ee.useId=function(){return $t.current.useId()};Ee.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return $t.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};Ee.useRef=function(t){return $t.current.useRef(t)};Ee.useState=function(t){return $t.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return $t.current.useTransition()};Ee.version="18.3.1";Wy.exports=Ee;var H=Wy.exports;const Il=Uy(H),RI=mI({__proto__:null,default:Il},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI=H,OI=Symbol.for("react.element"),DI=Symbol.for("react.fragment"),MI=Object.prototype.hasOwnProperty,jI=LI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VI={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)MI.call(e,i)&&!VI.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:OI,type:t,key:o,ref:l,props:r,_owner:jI.current}}Oh.Fragment=DI;Oh.jsx=Xy;Oh.jsxs=Xy;By.exports=Oh;var f=By.exports,yf={},Jy={exports:{}},cn={},e0={exports:{}},t0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ue){var X=q.length;q.push(ue);e:for(;0<X;){var he=X-1>>>1,ve=q[he];if(0<r(ve,ue))q[he]=ue,q[X]=ve,X=he;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ue=q[0],X=q.pop();if(X!==ue){q[0]=X;e:for(var he=0,ve=q.length,Te=ve>>>1;he<Te;){var Ne=2*(he+1)-1,ye=q[Ne],pe=Ne+1,ht=q[pe];if(0>r(ye,X))pe<ve&&0>r(ht,ye)?(q[he]=ht,q[pe]=X,he=pe):(q[he]=ye,q[Ne]=X,he=Ne);else if(pe<ve&&0>r(ht,X))q[he]=ht,q[pe]=X,he=pe;else break e}}return ue}function r(q,ue){var X=q.sortIndex-ue.sortIndex;return X!==0?X:q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],g=[],y=1,x=null,E=3,A=!1,D=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(q){for(var ue=n(g);ue!==null;){if(ue.callback===null)i(g);else if(ue.startTime<=q)i(g),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(g)}}function $(q){if(j=!1,O(q),!D)if(n(d)!==null)D=!0,ct(Y);else{var ue=n(g);ue!==null&&zt($,ue.startTime-q)}}function Y(q,ue){D=!1,j&&(j=!1,k(T),T=-1),A=!0;var X=E;try{for(O(ue),x=n(d);x!==null&&(!(x.expirationTime>ue)||q&&!M());){var he=x.callback;if(typeof he=="function"){x.callback=null,E=x.priorityLevel;var ve=he(x.expirationTime<=ue);ue=t.unstable_now(),typeof ve=="function"?x.callback=ve:x===n(d)&&i(d),O(ue)}else i(d);x=n(d)}if(x!==null)var Te=!0;else{var Ne=n(g);Ne!==null&&zt($,Ne.startTime-ue),Te=!1}return Te}finally{x=null,E=X,A=!1}}var J=!1,C=null,T=-1,S=5,N=-1;function M(){return!(t.unstable_now()-N<S)}function V(){if(C!==null){var q=t.unstable_now();N=q;var ue=!0;try{ue=C(!0,q)}finally{ue?R():(J=!1,C=null)}}else J=!1}var R;if(typeof P=="function")R=function(){P(V)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,ai=Ye.port2;Ye.port1.onmessage=V,R=function(){ai.postMessage(null)}}else R=function(){U(V,0)};function ct(q){C=q,J||(J=!0,R())}function zt(q,ue){T=U(function(){q(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,ct(Y))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var X=E;E=ue;try{return q()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ue){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=E;E=q;try{return ue()}finally{E=X}},t.unstable_scheduleCallback=function(q,ue,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,q={id:y++,callback:ue,priorityLevel:q,startTime:X,expirationTime:ve,sortIndex:-1},X>he?(q.sortIndex=X,e(g,q),n(d)===null&&q===n(g)&&(j?(k(T),T=-1):j=!0,zt($,X-he))):(q.sortIndex=ve,e(d,q),D||A||(D=!0,ct(Y))),q},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(q){var ue=E;return function(){var X=E;E=ue;try{return q.apply(this,arguments)}finally{E=X}}}})(t0);e0.exports=t0;var FI=e0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=H,un=FI;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,Pl={};function Ts(t,e){Do(t,e),Do(t+"Capture",e)}function Do(t,e){for(Pl[t]=e,t=0;t<e.length;t++)n0.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=Object.prototype.hasOwnProperty,UI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s_={},o_={};function BI(t){return xf.call(o_,t)?!0:xf.call(s_,t)?!1:UI.test(t)?o_[t]=!0:(s_[t]=!0,!1)}function WI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HI(t,e,n,i){if(e===null||typeof e>"u"||WI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function Gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qp,Gp);kt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qp,Gp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qp,Gp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,i){var r=kt.hasOwnProperty(e)?kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HI(e,n,r,i)&&(n=null),i||r===null?BI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fi=zI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=Symbol.for("react.element"),ho=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),r0=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),s0=Symbol.for("react.offscreen"),a_=Symbol.iterator;function Ha(t){return t===null||typeof t!="object"?null:(t=a_&&t[a_]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Rd;function el(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Ld=!1;function Od(t,e){if(!t||Ld)return"";Ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var r=g.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,h=o.length-1;1<=l&&0<=h&&r[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(r[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||r[l]!==o[h]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?el(t):""}function $I(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function If(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fo:return"Fragment";case ho:return"Portal";case wf:return"Profiler";case Kp:return"StrictMode";case Ef:return"Suspense";case Tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r0:return(t.displayName||"Context")+".Consumer";case i0:return(t._context.displayName||"Context")+".Provider";case Qp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yp:return e=t.displayName||null,e!==null?e:If(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return If(t(e))}catch{}}return null}function qI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return If(e);case 8:return e===Kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GI(t){var e=o0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oc(t){t._valueTracker||(t._valueTracker=GI(t))}function a0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=o0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function l_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l0(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function Sf(t,e){l0(t,e);var n=Sr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cf(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function u_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cf(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tl=Array.isArray;function Po(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function c_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(tl(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function u0(t,e){var n=Sr(e.value),i=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function h_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ac,h0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ac=ac||document.createElement("div"),ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZI=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){ZI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function d0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function f0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=d0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var KI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bf(t,e){if(e){if(KI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Nf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function Xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lf=null,So=null,Co=null;function d_(t){if(t=ru(t)){if(typeof Lf!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Fh(e),Lf(t.stateNode,t.type,e))}}function p0(t){So?Co?Co.push(t):Co=[t]:So=t}function m0(){if(So){var t=So,e=Co;if(Co=So=null,d_(t),e)for(t=0;t<e.length;t++)d_(e[t])}}function g0(t,e){return t(e)}function _0(){}var Dd=!1;function v0(t,e,n){if(Dd)return t(e,n);Dd=!0;try{return g0(t,e,n)}finally{Dd=!1,(So!==null||Co!==null)&&(_0(),m0())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var i=Fh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Of=!1;if(bi)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Of=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Of=!1}function QI(t,e,n,i,r,o,l,h,d){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(y){this.onError(y)}}var hl=!1,Zc=null,Kc=!1,Df=null,YI={onError:function(t){hl=!0,Zc=t}};function XI(t,e,n,i,r,o,l,h,d){hl=!1,Zc=null,QI.apply(YI,arguments)}function JI(t,e,n,i,r,o,l,h,d){if(XI.apply(this,arguments),hl){if(hl){var g=Zc;hl=!1,Zc=null}else throw Error(Q(198));Kc||(Kc=!0,Df=g)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f_(t){if(Is(t)!==t)throw Error(Q(188))}function eP(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return f_(r),t;if(o===i)return f_(r),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,h=r.child;h;){if(h===n){l=!0,n=r,i=o;break}if(h===i){l=!0,i=r,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=r;break}if(h===i){l=!0,i=o,n=r;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function x0(t){return t=eP(t),t!==null?w0(t):null}function w0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w0(t);if(e!==null)return e;t=t.sibling}return null}var E0=un.unstable_scheduleCallback,p_=un.unstable_cancelCallback,tP=un.unstable_shouldYield,nP=un.unstable_requestPaint,nt=un.unstable_now,iP=un.unstable_getCurrentPriorityLevel,Jp=un.unstable_ImmediatePriority,T0=un.unstable_UserBlockingPriority,Qc=un.unstable_NormalPriority,rP=un.unstable_LowPriority,I0=un.unstable_IdlePriority,Dh=null,ei=null;function sP(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Dh,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:lP,oP=Math.log,aP=Math.LN2;function lP(t){return t>>>=0,t===0?32:31-(oP(t)/aP|0)|0}var lc=64,uc=4194304;function nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~r;h!==0?i=nl(h):(o&=l,o!==0&&(i=nl(o)))}else l=n&~r,l!==0?i=nl(l):o!==0&&(i=nl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-jn(e),r=1<<n,i|=t[n],e&=~r;return i}function uP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-jn(o),h=1<<l,d=r[l];d===-1?(!(h&n)||h&i)&&(r[l]=uP(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Mf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P0(){var t=lc;return lc<<=1,!(lc&4194240)&&(lc=64),t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function hP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-jn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function em(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-jn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Le=0;function S0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C0,tm,A0,k0,b0,jf=!1,cc=[],fr=null,pr=null,mr=null,Al=new Map,kl=new Map,ir=[],dP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m_(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(e.pointerId)}}function qa(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ru(e),e!==null&&tm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fP(t,e,n,i,r){switch(e){case"focusin":return fr=qa(fr,t,e,n,i,r),!0;case"dragenter":return pr=qa(pr,t,e,n,i,r),!0;case"mouseover":return mr=qa(mr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Al.set(o,qa(Al.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,kl.set(o,qa(kl.get(o)||null,t,e,n,i,r)),!0}return!1}function N0(t){var e=ns(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=y0(n),e!==null){t.blockedOn=e,b0(t.priority,function(){A0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Rf=i,n.target.dispatchEvent(i),Rf=null}else return e=ru(n),e!==null&&tm(e),t.blockedOn=n,!1;e.shift()}return!0}function g_(t,e,n){Ac(t)&&n.delete(e)}function pP(){jf=!1,fr!==null&&Ac(fr)&&(fr=null),pr!==null&&Ac(pr)&&(pr=null),mr!==null&&Ac(mr)&&(mr=null),Al.forEach(g_),kl.forEach(g_)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,pP)))}function bl(t){function e(r){return Ga(r,t)}if(0<cc.length){Ga(cc[0],t);for(var n=1;n<cc.length;n++){var i=cc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(fr!==null&&Ga(fr,t),pr!==null&&Ga(pr,t),mr!==null&&Ga(mr,t),Al.forEach(e),kl.forEach(e),n=0;n<ir.length;n++)i=ir[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ir.length&&(n=ir[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&ir.shift()}var Ao=Fi.ReactCurrentBatchConfig,Xc=!0;function mP(t,e,n,i){var r=Le,o=Ao.transition;Ao.transition=null;try{Le=1,nm(t,e,n,i)}finally{Le=r,Ao.transition=o}}function gP(t,e,n,i){var r=Le,o=Ao.transition;Ao.transition=null;try{Le=4,nm(t,e,n,i)}finally{Le=r,Ao.transition=o}}function nm(t,e,n,i){if(Xc){var r=Vf(t,e,n,i);if(r===null)qd(t,e,i,Jc,n),m_(t,i);else if(fP(r,t,e,n,i))i.stopPropagation();else if(m_(t,i),e&4&&-1<dP.indexOf(t)){for(;r!==null;){var o=ru(r);if(o!==null&&C0(o),o=Vf(t,e,n,i),o===null&&qd(t,e,i,Jc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else qd(t,e,i,null,n)}}var Jc=null;function Vf(t,e,n,i){if(Jc=null,t=Xp(i),t=ns(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jc=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iP()){case Jp:return 1;case T0:return 4;case Qc:case rP:return 16;case I0:return 536870912;default:return 16}default:return 16}}var ur=null,im=null,kc=null;function L0(){if(kc)return kc;var t,e=im,n=e.length,i,r="value"in ur?ur.value:ur.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return kc=r.slice(t,1<i?1-i:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hc(){return!0}function __(){return!1}function hn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hc:__,this.isPropagationStopped=__,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rm=hn(Yo),iu=Ke({},Yo,{view:0,detail:0}),_P=hn(iu),jd,Vd,Za,Mh=Ke({},iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(jd=t.screenX-Za.screenX,Vd=t.screenY-Za.screenY):Vd=jd=0,Za=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:Vd}}),v_=hn(Mh),vP=Ke({},Mh,{dataTransfer:0}),yP=hn(vP),xP=Ke({},iu,{relatedTarget:0}),Fd=hn(xP),wP=Ke({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),EP=hn(wP),TP=Ke({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IP=hn(TP),PP=Ke({},Yo,{data:0}),y_=hn(PP),SP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AP[t])?!!e[t]:!1}function sm(){return kP}var bP=Ke({},iu,{key:function(t){if(t.key){var e=SP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NP=hn(bP),RP=Ke({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x_=hn(RP),LP=Ke({},iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),OP=hn(LP),DP=Ke({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),MP=hn(DP),jP=Ke({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VP=hn(jP),FP=[9,13,27,32],om=bi&&"CompositionEvent"in window,dl=null;bi&&"documentMode"in document&&(dl=document.documentMode);var zP=bi&&"TextEvent"in window&&!dl,O0=bi&&(!om||dl&&8<dl&&11>=dl),w_=" ",E_=!1;function D0(t,e){switch(t){case"keyup":return FP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var po=!1;function UP(t,e){switch(t){case"compositionend":return M0(e);case"keypress":return e.which!==32?null:(E_=!0,w_);case"textInput":return t=e.data,t===w_&&E_?null:t;default:return null}}function BP(t,e){if(po)return t==="compositionend"||!om&&D0(t,e)?(t=L0(),kc=im=ur=null,po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O0&&e.locale!=="ko"?null:e.data;default:return null}}var WP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WP[t.type]:e==="textarea"}function j0(t,e,n,i){p0(i),e=eh(e,"onChange"),0<e.length&&(n=new rm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var fl=null,Nl=null;function HP(t){Z0(t,0)}function jh(t){var e=_o(t);if(a0(e))return t}function $P(t,e){if(t==="change")return e}var V0=!1;if(bi){var zd;if(bi){var Ud="oninput"in document;if(!Ud){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Ud=typeof I_.oninput=="function"}zd=Ud}else zd=!1;V0=zd&&(!document.documentMode||9<document.documentMode)}function P_(){fl&&(fl.detachEvent("onpropertychange",F0),Nl=fl=null)}function F0(t){if(t.propertyName==="value"&&jh(Nl)){var e=[];j0(e,Nl,t,Xp(t)),v0(HP,e)}}function qP(t,e,n){t==="focusin"?(P_(),fl=e,Nl=n,fl.attachEvent("onpropertychange",F0)):t==="focusout"&&P_()}function GP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jh(Nl)}function ZP(t,e){if(t==="click")return jh(e)}function KP(t,e){if(t==="input"||t==="change")return jh(e)}function QP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:QP;function Rl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!xf.call(e,r)||!Un(t[r],e[r]))return!1}return!0}function S_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C_(t,e){var n=S_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S_(n)}}function z0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U0(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function am(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YP(t){var e=U0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z0(n.ownerDocument.documentElement,n)){if(i!==null&&am(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=C_(n,o);var l=C_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XP=bi&&"documentMode"in document&&11>=document.documentMode,mo=null,Ff=null,pl=null,zf=!1;function A_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zf||mo==null||mo!==Gc(i)||(i=mo,"selectionStart"in i&&am(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pl&&Rl(pl,i)||(pl=i,i=eh(Ff,"onSelect"),0<i.length&&(e=new rm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mo)))}function dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},Bd={},B0={};bi&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Vh(t){if(Bd[t])return Bd[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B0)return Bd[t]=e[n];return t}var W0=Vh("animationend"),H0=Vh("animationiteration"),$0=Vh("animationstart"),q0=Vh("transitionend"),G0=new Map,k_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){G0.set(t,e),Ts(e,[t])}for(var Wd=0;Wd<k_.length;Wd++){var Hd=k_[Wd],JP=Hd.toLowerCase(),eS=Hd[0].toUpperCase()+Hd.slice(1);Rr(JP,"on"+eS)}Rr(W0,"onAnimationEnd");Rr(H0,"onAnimationIteration");Rr($0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(q0,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function b_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,JI(i,e,void 0,t),t.currentTarget=null}function Z0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,g=h.currentTarget;if(h=h.listener,d!==o&&r.isPropagationStopped())break e;b_(r,h,g),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,g=h.currentTarget,h=h.listener,d!==o&&r.isPropagationStopped())break e;b_(r,h,g),o=d}}}if(Kc)throw t=Df,Kc=!1,Df=null,t}function Fe(t,e){var n=e[$f];n===void 0&&(n=e[$f]=new Set);var i=t+"__bubble";n.has(i)||(K0(e,t,2,!1),n.add(i))}function $d(t,e,n){var i=0;e&&(i|=4),K0(n,t,i,e)}var fc="_reactListening"+Math.random().toString(36).slice(2);function Ll(t){if(!t[fc]){t[fc]=!0,n0.forEach(function(n){n!=="selectionchange"&&(tS.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fc]||(e[fc]=!0,$d("selectionchange",!1,e))}}function K0(t,e,n,i){switch(R0(e)){case 1:var r=mP;break;case 4:r=gP;break;default:r=nm}n=r.bind(null,e,n,t),r=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===r||h.nodeType===8&&h.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;h!==null;){if(l=ns(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}v0(function(){var g=o,y=Xp(n),x=[];e:{var E=G0.get(t);if(E!==void 0){var A=rm,D=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":A=NP;break;case"focusin":D="focus",A=Fd;break;case"focusout":D="blur",A=Fd;break;case"beforeblur":case"afterblur":A=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=v_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=yP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=OP;break;case W0:case H0:case $0:A=EP;break;case q0:A=MP;break;case"scroll":A=_P;break;case"wheel":A=VP;break;case"copy":case"cut":case"paste":A=IP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=x_}var j=(e&4)!==0,U=!j&&t==="scroll",k=j?E!==null?E+"Capture":null:E;j=[];for(var P=g,O;P!==null;){O=P;var $=O.stateNode;if(O.tag===5&&$!==null&&(O=$,k!==null&&($=Cl(P,k),$!=null&&j.push(Ol(P,$,O)))),U)break;P=P.return}0<j.length&&(E=new A(E,D,null,n,y),x.push({event:E,listeners:j}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",E&&n!==Rf&&(D=n.relatedTarget||n.fromElement)&&(ns(D)||D[Ni]))break e;if((A||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,A?(D=n.relatedTarget||n.toElement,A=g,D=D?ns(D):null,D!==null&&(U=Is(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(A=null,D=g),A!==D)){if(j=v_,$="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(j=x_,$="onPointerLeave",k="onPointerEnter",P="pointer"),U=A==null?E:_o(A),O=D==null?E:_o(D),E=new j($,P+"leave",A,n,y),E.target=U,E.relatedTarget=O,$=null,ns(y)===g&&(j=new j(k,P+"enter",D,n,y),j.target=O,j.relatedTarget=U,$=j),U=$,A&&D)t:{for(j=A,k=D,P=0,O=j;O;O=ao(O))P++;for(O=0,$=k;$;$=ao($))O++;for(;0<P-O;)j=ao(j),P--;for(;0<O-P;)k=ao(k),O--;for(;P--;){if(j===k||k!==null&&j===k.alternate)break t;j=ao(j),k=ao(k)}j=null}else j=null;A!==null&&N_(x,E,A,j,!1),D!==null&&U!==null&&N_(x,U,D,j,!0)}}e:{if(E=g?_o(g):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var Y=$P;else if(T_(E))if(V0)Y=KP;else{Y=GP;var J=qP}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Y=ZP);if(Y&&(Y=Y(t,g))){j0(x,Y,n,y);break e}J&&J(t,E,g),t==="focusout"&&(J=E._wrapperState)&&J.controlled&&E.type==="number"&&Cf(E,"number",E.value)}switch(J=g?_o(g):window,t){case"focusin":(T_(J)||J.contentEditable==="true")&&(mo=J,Ff=g,pl=null);break;case"focusout":pl=Ff=mo=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,A_(x,n,y);break;case"selectionchange":if(XP)break;case"keydown":case"keyup":A_(x,n,y)}var C;if(om)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else po?D0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(O0&&n.locale!=="ko"&&(po||T!=="onCompositionStart"?T==="onCompositionEnd"&&po&&(C=L0()):(ur=y,im="value"in ur?ur.value:ur.textContent,po=!0)),J=eh(g,T),0<J.length&&(T=new y_(T,t,null,n,y),x.push({event:T,listeners:J}),C?T.data=C:(C=M0(n),C!==null&&(T.data=C)))),(C=zP?UP(t,n):BP(t,n))&&(g=eh(g,"onBeforeInput"),0<g.length&&(y=new y_("onBeforeInput","beforeinput",null,n,y),x.push({event:y,listeners:g}),y.data=C))}Z0(x,e)})}function Ol(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Cl(t,n),o!=null&&i.unshift(Ol(t,o,r)),o=Cl(t,e),o!=null&&i.push(Ol(t,o,r))),t=t.return}return i}function ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N_(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,g=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&g!==null&&(h=g,r?(d=Cl(n,o),d!=null&&l.unshift(Ol(n,d,h))):r||(d=Cl(n,o),d!=null&&l.push(Ol(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var nS=/\r\n?/g,iS=/\u0000|\uFFFD/g;function R_(t){return(typeof t=="string"?t:""+t).replace(nS,`
`).replace(iS,"")}function pc(t,e,n){if(e=R_(e),R_(t)!==e&&n)throw Error(Q(425))}function th(){}var Uf=null,Bf=null;function Wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,sS=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(t){return L_.resolve(null).then(t).catch(oS)}:Hf;function oS(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),bl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);bl(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function O_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Xo,Dl="__reactProps$"+Xo,Ni="__reactContainer$"+Xo,$f="__reactEvents$"+Xo,aS="__reactListeners$"+Xo,lS="__reactHandles$"+Xo;function ns(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ni]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=O_(t);t!==null;){if(n=t[Xn])return n;t=O_(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[Xn]||t[Ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Fh(t){return t[Dl]||null}var qf=[],vo=-1;function Lr(t){return{current:t}}function Ue(t){0>vo||(t.current=qf[vo],qf[vo]=null,vo--)}function Ve(t,e){vo++,qf[vo]=t.current,t.current=e}var Cr={},Vt=Lr(Cr),Xt=Lr(!1),cs=Cr;function Mo(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function nh(){Ue(Xt),Ue(Vt)}function D_(t,e,n){if(Vt.current!==Cr)throw Error(Q(168));Ve(Vt,e),Ve(Xt,n)}function Q0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Q(108,qI(t)||"Unknown",r));return Ke({},n,i)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,cs=Vt.current,Ve(Vt,t),Ve(Xt,Xt.current),!0}function M_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=Q0(t,e,cs),i.__reactInternalMemoizedMergedChildContext=t,Ue(Xt),Ue(Vt),Ve(Vt,t)):Ue(Xt),Ve(Xt,n)}var wi=null,zh=!1,Zd=!1;function Y0(t){wi===null?wi=[t]:wi.push(t)}function uS(t){zh=!0,Y0(t)}function Or(){if(!Zd&&wi!==null){Zd=!0;var t=0,e=Le;try{var n=wi;for(Le=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}wi=null,zh=!1}catch(r){throw wi!==null&&(wi=wi.slice(t+1)),E0(Jp,Or),r}finally{Le=e,Zd=!1}}return null}var yo=[],xo=0,rh=null,sh=0,wn=[],En=0,hs=null,Ei=1,Ti="";function Jr(t,e){yo[xo++]=sh,yo[xo++]=rh,rh=t,sh=e}function X0(t,e,n){wn[En++]=Ei,wn[En++]=Ti,wn[En++]=hs,hs=t;var i=Ei;t=Ti;var r=32-jn(i)-1;i&=~(1<<r),n+=1;var o=32-jn(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Ei=1<<32-jn(e)+r|n<<r|i,Ti=o+t}else Ei=1<<o|n<<r|i,Ti=t}function lm(t){t.return!==null&&(Jr(t,1),X0(t,1,0))}function um(t){for(;t===rh;)rh=yo[--xo],yo[xo]=null,sh=yo[--xo],yo[xo]=null;for(;t===hs;)hs=wn[--En],wn[En]=null,Ti=wn[--En],wn[En]=null,Ei=wn[--En],wn[En]=null}var ln=null,on=null,He=!1,Mn=null;function J0(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,on=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:Ei,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,on=null,!0):!1;default:return!1}}function Gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zf(t){if(He){var e=on;if(e){var n=e;if(!j_(t,e)){if(Gf(t))throw Error(Q(418));e=gr(n.nextSibling);var i=ln;e&&j_(t,e)?J0(i,n):(t.flags=t.flags&-4097|2,He=!1,ln=t)}}else{if(Gf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,He=!1,ln=t}}}function V_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function mc(t){if(t!==ln)return!1;if(!He)return V_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wf(t.type,t.memoizedProps)),e&&(e=on)){if(Gf(t))throw ex(),Error(Q(418));for(;e;)J0(t,e),e=gr(e.nextSibling)}if(V_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=ln?gr(t.stateNode.nextSibling):null;return!0}function ex(){for(var t=on;t;)t=gr(t.nextSibling)}function jo(){on=ln=null,He=!1}function cm(t){Mn===null?Mn=[t]:Mn.push(t)}var cS=Fi.ReactCurrentBatchConfig;function Ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=r.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function gc(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F_(t){var e=t._init;return e(t._payload)}function tx(t){function e(k,P){if(t){var O=k.deletions;O===null?(k.deletions=[P],k.flags|=16):O.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function r(k,P){return k=xr(k,P),k.index=0,k.sibling=null,k}function o(k,P,O){return k.index=O,t?(O=k.alternate,O!==null?(O=O.index,O<P?(k.flags|=2,P):O):(k.flags|=2,P)):(k.flags|=1048576,P)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,P,O,$){return P===null||P.tag!==6?(P=tf(O,k.mode,$),P.return=k,P):(P=r(P,O),P.return=k,P)}function d(k,P,O,$){var Y=O.type;return Y===fo?y(k,P,O.props.children,$,O.key):P!==null&&(P.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===tr&&F_(Y)===P.type)?($=r(P,O.props),$.ref=Ka(k,P,O),$.return=k,$):($=jc(O.type,O.key,O.props,null,k.mode,$),$.ref=Ka(k,P,O),$.return=k,$)}function g(k,P,O,$){return P===null||P.tag!==4||P.stateNode.containerInfo!==O.containerInfo||P.stateNode.implementation!==O.implementation?(P=nf(O,k.mode,$),P.return=k,P):(P=r(P,O.children||[]),P.return=k,P)}function y(k,P,O,$,Y){return P===null||P.tag!==7?(P=as(O,k.mode,$,Y),P.return=k,P):(P=r(P,O),P.return=k,P)}function x(k,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return P=tf(""+P,k.mode,O),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sc:return O=jc(P.type,P.key,P.props,null,k.mode,O),O.ref=Ka(k,null,P),O.return=k,O;case ho:return P=nf(P,k.mode,O),P.return=k,P;case tr:var $=P._init;return x(k,$(P._payload),O)}if(tl(P)||Ha(P))return P=as(P,k.mode,O,null),P.return=k,P;gc(k,P)}return null}function E(k,P,O,$){var Y=P!==null?P.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:h(k,P,""+O,$);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case sc:return O.key===Y?d(k,P,O,$):null;case ho:return O.key===Y?g(k,P,O,$):null;case tr:return Y=O._init,E(k,P,Y(O._payload),$)}if(tl(O)||Ha(O))return Y!==null?null:y(k,P,O,$,null);gc(k,O)}return null}function A(k,P,O,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number")return k=k.get(O)||null,h(P,k,""+$,Y);if(typeof $=="object"&&$!==null){switch($.$$typeof){case sc:return k=k.get($.key===null?O:$.key)||null,d(P,k,$,Y);case ho:return k=k.get($.key===null?O:$.key)||null,g(P,k,$,Y);case tr:var J=$._init;return A(k,P,O,J($._payload),Y)}if(tl($)||Ha($))return k=k.get(O)||null,y(P,k,$,Y,null);gc(P,$)}return null}function D(k,P,O,$){for(var Y=null,J=null,C=P,T=P=0,S=null;C!==null&&T<O.length;T++){C.index>T?(S=C,C=null):S=C.sibling;var N=E(k,C,O[T],$);if(N===null){C===null&&(C=S);break}t&&C&&N.alternate===null&&e(k,C),P=o(N,P,T),J===null?Y=N:J.sibling=N,J=N,C=S}if(T===O.length)return n(k,C),He&&Jr(k,T),Y;if(C===null){for(;T<O.length;T++)C=x(k,O[T],$),C!==null&&(P=o(C,P,T),J===null?Y=C:J.sibling=C,J=C);return He&&Jr(k,T),Y}for(C=i(k,C);T<O.length;T++)S=A(C,k,T,O[T],$),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?T:S.key),P=o(S,P,T),J===null?Y=S:J.sibling=S,J=S);return t&&C.forEach(function(M){return e(k,M)}),He&&Jr(k,T),Y}function j(k,P,O,$){var Y=Ha(O);if(typeof Y!="function")throw Error(Q(150));if(O=Y.call(O),O==null)throw Error(Q(151));for(var J=Y=null,C=P,T=P=0,S=null,N=O.next();C!==null&&!N.done;T++,N=O.next()){C.index>T?(S=C,C=null):S=C.sibling;var M=E(k,C,N.value,$);if(M===null){C===null&&(C=S);break}t&&C&&M.alternate===null&&e(k,C),P=o(M,P,T),J===null?Y=M:J.sibling=M,J=M,C=S}if(N.done)return n(k,C),He&&Jr(k,T),Y;if(C===null){for(;!N.done;T++,N=O.next())N=x(k,N.value,$),N!==null&&(P=o(N,P,T),J===null?Y=N:J.sibling=N,J=N);return He&&Jr(k,T),Y}for(C=i(k,C);!N.done;T++,N=O.next())N=A(C,k,T,N.value,$),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?T:N.key),P=o(N,P,T),J===null?Y=N:J.sibling=N,J=N);return t&&C.forEach(function(V){return e(k,V)}),He&&Jr(k,T),Y}function U(k,P,O,$){if(typeof O=="object"&&O!==null&&O.type===fo&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case sc:e:{for(var Y=O.key,J=P;J!==null;){if(J.key===Y){if(Y=O.type,Y===fo){if(J.tag===7){n(k,J.sibling),P=r(J,O.props.children),P.return=k,k=P;break e}}else if(J.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===tr&&F_(Y)===J.type){n(k,J.sibling),P=r(J,O.props),P.ref=Ka(k,J,O),P.return=k,k=P;break e}n(k,J);break}else e(k,J);J=J.sibling}O.type===fo?(P=as(O.props.children,k.mode,$,O.key),P.return=k,k=P):($=jc(O.type,O.key,O.props,null,k.mode,$),$.ref=Ka(k,P,O),$.return=k,k=$)}return l(k);case ho:e:{for(J=O.key;P!==null;){if(P.key===J)if(P.tag===4&&P.stateNode.containerInfo===O.containerInfo&&P.stateNode.implementation===O.implementation){n(k,P.sibling),P=r(P,O.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=nf(O,k.mode,$),P.return=k,k=P}return l(k);case tr:return J=O._init,U(k,P,J(O._payload),$)}if(tl(O))return D(k,P,O,$);if(Ha(O))return j(k,P,O,$);gc(k,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,P!==null&&P.tag===6?(n(k,P.sibling),P=r(P,O),P.return=k,k=P):(n(k,P),P=tf(O,k.mode,$),P.return=k,k=P),l(k)):n(k,P)}return U}var Vo=tx(!0),nx=tx(!1),oh=Lr(null),ah=null,wo=null,hm=null;function dm(){hm=wo=ah=null}function fm(t){var e=oh.current;Ue(oh),t._currentValue=e}function Kf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){ah=t,hm=wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(hm!==t)if(t={context:t,memoizedValue:e,next:null},wo===null){if(ah===null)throw Error(Q(308));wo=t,ah.dependencies={lanes:0,firstContext:t}}else wo=wo.next=t;return e}var is=null;function pm(t){is===null?is=[t]:is.push(t)}function ix(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,pm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function mm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ri(t,n)}return r=i.interleaved,r===null?(e.next=e,pm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ri(t,n)}function Nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,em(t,n)}}function z_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lh(t,e,n,i){var r=t.updateQueue;nr=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var d=h,g=d.next;d.next=null,l===null?o=g:l.next=g,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=g:h.next=g,y.lastBaseUpdate=d))}if(o!==null){var x=r.baseState;l=0,y=g=d=null,h=o;do{var E=h.lane,A=h.eventTime;if((i&E)===E){y!==null&&(y=y.next={eventTime:A,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,j=h;switch(E=e,A=n,j.tag){case 1:if(D=j.payload,typeof D=="function"){x=D.call(A,x,E);break e}x=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=j.payload,E=typeof D=="function"?D.call(A,x,E):D,E==null)break e;x=Ke({},x,E);break e;case 2:nr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=r.effects,E===null?r.effects=[h]:E.push(h))}else A={eventTime:A,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(g=y=A,d=x):y=y.next=A,l|=E;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;E=h,h=E.next,E.next=null,r.lastBaseUpdate=E,r.shared.pending=null}}while(!0);if(y===null&&(d=x),r.baseState=d,r.firstBaseUpdate=g,r.lastBaseUpdate=y,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);fs|=l,t.lanes=l,t.memoizedState=x}}function U_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Q(191,r));r.call(i)}}}var su={},ti=Lr(su),Ml=Lr(su),jl=Lr(su);function rs(t){if(t===su)throw Error(Q(174));return t}function gm(t,e){switch(Ve(jl,e),Ve(Ml,t),Ve(ti,su),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kf(e,t)}Ue(ti),Ve(ti,e)}function Fo(){Ue(ti),Ue(Ml),Ue(jl)}function sx(t){rs(jl.current);var e=rs(ti.current),n=kf(e,t.type);e!==n&&(Ve(Ml,t),Ve(ti,n))}function _m(t){Ml.current===t&&(Ue(ti),Ue(Ml))}var Ge=Lr(0);function uh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kd=[];function vm(){for(var t=0;t<Kd.length;t++)Kd[t]._workInProgressVersionPrimary=null;Kd.length=0}var Rc=Fi.ReactCurrentDispatcher,Qd=Fi.ReactCurrentBatchConfig,ds=0,Ze=null,dt=null,xt=null,ch=!1,ml=!1,Vl=0,hS=0;function Nt(){throw Error(Q(321))}function ym(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function xm(t,e,n,i,r,o){if(ds=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?mS:gS,t=n(i,r),ml){o=0;do{if(ml=!1,Vl=0,25<=o)throw Error(Q(301));o+=1,xt=dt=null,e.updateQueue=null,Rc.current=_S,t=n(i,r)}while(ml)}if(Rc.current=hh,e=dt!==null&&dt.next!==null,ds=0,xt=dt=Ze=null,ch=!1,e)throw Error(Q(300));return t}function wm(){var t=Vl!==0;return Vl=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ze.memoizedState=xt=t:xt=xt.next=t,xt}function Cn(){if(dt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=xt===null?Ze.memoizedState:xt.next;if(e!==null)xt=e,dt=t;else{if(t===null)throw Error(Q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},xt===null?Ze.memoizedState=xt=t:xt=xt.next=t}return xt}function Fl(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=Cn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=dt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var h=l=null,d=null,g=o;do{var y=g.lane;if((ds&y)===y)d!==null&&(d=d.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var x={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};d===null?(h=d=x,l=i):d=d.next=x,Ze.lanes|=y,fs|=y}g=g.next}while(g!==null&&g!==o);d===null?l=i:d.next=h,Un(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Ze.lanes|=o,fs|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xd(t){var e=Cn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Un(o,e.memoizedState)||(Yt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ox(){}function ax(t,e){var n=Ze,i=Cn(),r=e(),o=!Un(i.memoizedState,r);if(o&&(i.memoizedState=r,Yt=!0),i=i.queue,Em(cx.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,zl(9,ux.bind(null,n,i,r,e),void 0,null),wt===null)throw Error(Q(349));ds&30||lx(n,e,r)}return r}function lx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ux(t,e,n,i){e.value=n,e.getSnapshot=i,hx(e)&&dx(t)}function cx(t,e,n){return n(function(){hx(e)&&dx(t)})}function hx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function dx(t){var e=Ri(t,1);e!==null&&Vn(e,t,1,-1)}function B_(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=pS.bind(null,Ze,t),[e.memoizedState,t]}function zl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fx(){return Cn().memoizedState}function Lc(t,e,n,i){var r=Yn();Ze.flags|=t,r.memoizedState=zl(1|e,n,void 0,i===void 0?null:i)}function Uh(t,e,n,i){var r=Cn();i=i===void 0?null:i;var o=void 0;if(dt!==null){var l=dt.memoizedState;if(o=l.destroy,i!==null&&ym(i,l.deps)){r.memoizedState=zl(e,n,o,i);return}}Ze.flags|=t,r.memoizedState=zl(1|e,n,o,i)}function W_(t,e){return Lc(8390656,8,t,e)}function Em(t,e){return Uh(2048,8,t,e)}function px(t,e){return Uh(4,2,t,e)}function mx(t,e){return Uh(4,4,t,e)}function gx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _x(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,gx.bind(null,e,t),n)}function Tm(){}function vx(t,e){var n=Cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ym(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function yx(t,e){var n=Cn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ym(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function xx(t,e,n){return ds&21?(Un(n,e)||(n=P0(),Ze.lanes|=n,fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function dS(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var i=Qd.transition;Qd.transition={};try{t(!1),e()}finally{Le=n,Qd.transition=i}}function wx(){return Cn().memoizedState}function fS(t,e,n){var i=yr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ex(t))Tx(e,n);else if(n=ix(t,e,n,i),n!==null){var r=Ht();Vn(n,t,i,r),Ix(n,e,i)}}function pS(t,e,n){var i=yr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ex(t))Tx(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(r.hasEagerState=!0,r.eagerState=h,Un(h,l)){var d=e.interleaved;d===null?(r.next=r,pm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=ix(t,e,r,i),n!==null&&(r=Ht(),Vn(n,t,i,r),Ix(n,e,i))}}function Ex(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function Tx(t,e){ml=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ix(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,em(t,n)}}var hh={readContext:Sn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},mS={readContext:Sn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:W_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lc(4194308,4,gx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lc(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fS.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:B_,useDebugValue:Tm,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=B_(!1),e=t[0];return t=dS.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,r=Yn();if(He){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),wt===null)throw Error(Q(349));ds&30||lx(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,W_(cx.bind(null,i,o,t),[t]),i.flags|=2048,zl(9,ux.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Yn(),e=wt.identifierPrefix;if(He){var n=Ti,i=Ei;n=(i&~(1<<32-jn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gS={readContext:Sn,useCallback:vx,useContext:Sn,useEffect:Em,useImperativeHandle:_x,useInsertionEffect:px,useLayoutEffect:mx,useMemo:yx,useReducer:Yd,useRef:fx,useState:function(){return Yd(Fl)},useDebugValue:Tm,useDeferredValue:function(t){var e=Cn();return xx(e,dt.memoizedState,t)},useTransition:function(){var t=Yd(Fl)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:wx,unstable_isNewReconciler:!1},_S={readContext:Sn,useCallback:vx,useContext:Sn,useEffect:Em,useImperativeHandle:_x,useInsertionEffect:px,useLayoutEffect:mx,useMemo:yx,useReducer:Xd,useRef:fx,useState:function(){return Xd(Fl)},useDebugValue:Tm,useDeferredValue:function(t){var e=Cn();return dt===null?e.memoizedState=t:xx(e,dt.memoizedState,t)},useTransition:function(){var t=Xd(Fl)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:wx,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bh={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ht(),r=yr(t),o=Ci(i,r);o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,r),e!==null&&(Vn(e,t,r,i),Nc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ht(),r=yr(t),o=Ci(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=_r(t,o,r),e!==null&&(Vn(e,t,r,i),Nc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),i=yr(t),r=Ci(n,i);r.tag=2,e!=null&&(r.callback=e),e=_r(t,r,i),e!==null&&(Vn(e,t,i,n),Nc(e,t,i))}};function H_(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,i)||!Rl(r,o):!0}function Px(t,e,n){var i=!1,r=Cr,o=e.contextType;return typeof o=="object"&&o!==null?o=Sn(o):(r=Jt(e)?cs:Vt.current,i=e.contextTypes,o=(i=i!=null)?Mo(t,r):Cr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function $_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bh.enqueueReplaceState(e,e.state,null)}function Yf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},mm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Sn(o):(o=Jt(e)?cs:Vt.current,r.context=Mo(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bh.enqueueReplaceState(r,r.state,null),lh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e){try{var n="",i=e;do n+=$I(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vS=typeof WeakMap=="function"?WeakMap:Map;function Sx(t,e,n){n=Ci(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fh||(fh=!0,lp=i),Xf(t,e)},n}function Cx(t,e,n){n=Ci(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Xf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xf(t,e),typeof i!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function q_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vS;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function G_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Z_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ci(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var yS=Fi.ReactCurrentOwner,Yt=!1;function Wt(t,e,n,i){e.child=t===null?nx(e,null,n,i):Vo(e,t.child,n,i)}function K_(t,e,n,i,r){n=n.render;var o=e.ref;return ko(e,r),i=xm(t,e,n,i,o,r),n=wm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Li(t,e,r)):(He&&n&&lm(e),e.flags|=1,Wt(t,e,i,r),e.child)}function Q_(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Ax(t,e,o,i,r)):(t=jc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(l,i)&&t.ref===e.ref)return Li(t,e,r)}return e.flags|=1,t=xr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Ax(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Rl(o,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Li(t,e,r)}return Jf(t,e,n,i,r)}function kx(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(To,sn),sn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(To,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ve(To,sn),sn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ve(To,sn),sn|=i;return Wt(t,e,r,n),e.child}function bx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jf(t,e,n,i,r){var o=Jt(n)?cs:Vt.current;return o=Mo(e,o),ko(e,r),n=xm(t,e,n,i,o,r),i=wm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Li(t,e,r)):(He&&i&&lm(e),e.flags|=1,Wt(t,e,n,r),e.child)}function Y_(t,e,n,i,r){if(Jt(n)){var o=!0;ih(e)}else o=!1;if(ko(e,r),e.stateNode===null)Oc(t,e),Px(e,n,i),Yf(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,g=n.contextType;typeof g=="object"&&g!==null?g=Sn(g):(g=Jt(n)?cs:Vt.current,g=Mo(e,g));var y=n.getDerivedStateFromProps,x=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==g)&&$_(e,l,i,g),nr=!1;var E=e.memoizedState;l.state=E,lh(e,i,l,r),d=e.memoizedState,h!==i||E!==d||Xt.current||nr?(typeof y=="function"&&(Qf(e,n,y,i),d=e.memoizedState),(h=nr||H_(e,n,h,i,E,d,g))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=g,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,rx(t,e),h=e.memoizedProps,g=e.type===e.elementType?h:On(e.type,h),l.props=g,x=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Sn(d):(d=Jt(n)?cs:Vt.current,d=Mo(e,d));var A=n.getDerivedStateFromProps;(y=typeof A=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==x||E!==d)&&$_(e,l,i,d),nr=!1,E=e.memoizedState,l.state=E,lh(e,i,l,r);var D=e.memoizedState;h!==x||E!==D||Xt.current||nr?(typeof A=="function"&&(Qf(e,n,A,i),D=e.memoizedState),(g=nr||H_(e,n,g,i,E,D,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=g):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return ep(t,e,n,i,o,r)}function ep(t,e,n,i,r,o){bx(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&M_(e,n,!1),Li(t,e,o);i=e.stateNode,yS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Vo(e,t.child,null,o),e.child=Vo(e,null,h,o)):Wt(t,e,h,o),e.memoizedState=i.state,r&&M_(e,n,!0),e.child}function Nx(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),gm(t,e.containerInfo)}function X_(t,e,n,i,r){return jo(),cm(r),e.flags|=256,Wt(t,e,n,i),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rx(t,e,n){var i=e.pendingProps,r=Ge.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(r&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ve(Ge,r&1),t===null)return Zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=$h(l,i,0,null),t=as(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=np(n),e.memoizedState=tp,t):Im(e,l));if(r=t.memoizedState,r!==null&&(h=r.dehydrated,h!==null))return xS(t,e,l,i,h,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,h=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=xr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),h!==null?o=xr(h,o):(o=as(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?np(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=tp,i}return o=t.child,t=o.sibling,i=xr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Im(t,e){return e=$h({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _c(t,e,n,i){return i!==null&&cm(i),Vo(e,t.child,null,n),t=Im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xS(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Jd(Error(Q(422))),_c(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=$h({mode:"visible",children:i.children},r,0,null),o=as(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Vo(e,t.child,null,l),e.child.memoizedState=np(l),e.memoizedState=tp,o);if(!(e.mode&1))return _c(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=Jd(o,i,void 0),_c(t,e,l,i)}if(h=(l&t.childLanes)!==0,Yt||h){if(i=wt,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ri(t,r),Vn(i,t,r,-1))}return bm(),i=Jd(Error(Q(421))),_c(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=LS.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,on=gr(r.nextSibling),ln=e,He=!0,Mn=null,t!==null&&(wn[En++]=Ei,wn[En++]=Ti,wn[En++]=hs,Ei=t.id,Ti=t.overflow,hs=e),e=Im(e,i.children),e.flags|=4096,e)}function J_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Kf(t.return,e,n)}function ef(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Lx(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J_(t,n,e);else if(t.tag===19)J_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ve(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&uh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ef(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&uh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ef(e,!0,n,null,o);break;case"together":ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wS(t,e,n){switch(e.tag){case 3:Nx(e),jo();break;case 5:sx(e);break;case 1:Jt(e.type)&&ih(e);break;case 4:gm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ve(oh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ve(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?Rx(t,e,n):(Ve(Ge,Ge.current&1),t=Li(t,e,n),t!==null?t.sibling:null);Ve(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Lx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ve(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,kx(t,e,n)}return Li(t,e,n)}var Ox,ip,Dx,Mx;Ox=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ip=function(){};Dx=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,rs(ti.current);var o=null;switch(n){case"input":r=Pf(t,r),i=Pf(t,i),o=[];break;case"select":r=Ke({},r,{value:void 0}),i=Ke({},i,{value:void 0}),o=[];break;case"textarea":r=Af(t,r),i=Af(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=th)}bf(n,i);var l;n=null;for(g in r)if(!i.hasOwnProperty(g)&&r.hasOwnProperty(g)&&r[g]!=null)if(g==="style"){var h=r[g];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Pl.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in i){var d=i[g];if(h=r!=null?r[g]:void 0,i.hasOwnProperty(g)&&d!==h&&(d!=null||h!=null))if(g==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(g,n)),n=d;else g==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(g,d)):g==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(g,""+d):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(g)?(d!=null&&g==="onScroll"&&Fe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(g,d))}n&&(o=o||[]).push("style",n);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};Mx=function(t,e,n,i){n!==i&&(e.flags|=4)};function Qa(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ES(t,e,n){var i=e.pendingProps;switch(um(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Jt(e.type)&&nh(),Rt(e),null;case 3:return i=e.stateNode,Fo(),Ue(Xt),Ue(Vt),vm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(hp(Mn),Mn=null))),ip(t,e),Rt(e),null;case 5:_m(e);var r=rs(jl.current);if(n=e.type,t!==null&&e.stateNode!=null)Dx(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Rt(e),null}if(t=rs(ti.current),mc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Xn]=e,i[Dl]=o,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(r=0;r<il.length;r++)Fe(il[r],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":l_(i,o),Fe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",i);break;case"textarea":c_(i,o),Fe("invalid",i)}bf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&pc(i.textContent,h,t),r=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&pc(i.textContent,h,t),r=["children",""+h]):Pl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Fe("scroll",i)}switch(n){case"input":oc(i),u_(i,o,!0);break;case"textarea":oc(i),h_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=th)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Xn]=e,t[Dl]=i,Ox(t,e,!1,!1),e.stateNode=t;e:{switch(l=Nf(n,i),n){case"dialog":Fe("cancel",t),Fe("close",t),r=i;break;case"iframe":case"object":case"embed":Fe("load",t),r=i;break;case"video":case"audio":for(r=0;r<il.length;r++)Fe(il[r],t);r=i;break;case"source":Fe("error",t),r=i;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),r=i;break;case"details":Fe("toggle",t),r=i;break;case"input":l_(t,i),r=Pf(t,i),Fe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ke({},i,{value:void 0}),Fe("invalid",t);break;case"textarea":c_(t,i),r=Af(t,i),Fe("invalid",t);break;default:r=i}bf(n,r),h=r;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?f0(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&h0(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Sl(t,d):typeof d=="number"&&Sl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Fe("scroll",t):d!=null&&Zp(t,o,d,l))}switch(n){case"input":oc(t),u_(t,i,!1);break;case"textarea":oc(t),h_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Sr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Po(t,!!i.multiple,o,!1):i.defaultValue!=null&&Po(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)Mx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=rs(jl.current),rs(ti.current),mc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Xn]=e,(o=i.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:pc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Xn]=e,e.stateNode=i}return Rt(e),null;case 13:if(Ue(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&on!==null&&e.mode&1&&!(e.flags&128))ex(),jo(),e.flags|=98560,o=!1;else if(o=mc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Xn]=e}else jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),o=!1}else Mn!==null&&(hp(Mn),Mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ft===0&&(ft=3):bm())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return Fo(),ip(t,e),t===null&&Ll(e.stateNode.containerInfo),Rt(e),null;case 10:return fm(e.type._context),Rt(e),null;case 17:return Jt(e.type)&&nh(),Rt(e),null;case 19:if(Ue(Ge),o=e.memoizedState,o===null)return Rt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Qa(o,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=uh(t),l!==null){for(e.flags|=128,Qa(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>Uo&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304)}else{if(!i)if(t=uh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Rt(e),null}else 2*nt()-o.renderingStartTime>Uo&&n!==1073741824&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ge.current,Ve(Ge,i?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return km(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sn&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function TS(t,e){switch(um(e),e.tag){case 1:return Jt(e.type)&&nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fo(),Ue(Xt),Ue(Vt),vm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _m(e),null;case 13:if(Ue(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ge),null;case 4:return Fo(),null;case 10:return fm(e.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var vc=!1,Dt=!1,IS=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function rp(t,e,n){try{n()}catch(i){Je(t,e,i)}}var ev=!1;function PS(t,e){if(Uf=Xc,t=U0(),am(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,g=0,y=0,x=t,E=null;t:for(;;){for(var A;x!==n||r!==0&&x.nodeType!==3||(h=l+r),x!==o||i!==0&&x.nodeType!==3||(d=l+i),x.nodeType===3&&(l+=x.nodeValue.length),(A=x.firstChild)!==null;)E=x,x=A;for(;;){if(x===t)break t;if(E===n&&++g===r&&(h=l),E===o&&++y===i&&(d=l),(A=x.nextSibling)!==null)break;x=E,E=x.parentNode}x=A}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bf={focusedElem:t,selectionRange:n},Xc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var j=D.memoizedProps,U=D.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?j:On(e.type,j),U);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch($){Je(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return D=ev,ev=!1,D}function gl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&rp(e,n,o)}r=r.next}while(r!==i)}}function Wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jx(t){var e=t.alternate;e!==null&&(t.alternate=null,jx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[Dl],delete e[$f],delete e[aS],delete e[lS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vx(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function op(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=th));else if(i!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}function ap(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}var It=null,Dn=!1;function Ji(t,e,n){for(n=n.child;n!==null;)Fx(t,e,n),n=n.sibling}function Fx(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Dh,n)}catch{}switch(n.tag){case 5:Dt||Eo(n,e);case 6:var i=It,r=Dn;It=null,Ji(t,e,n),It=i,Dn=r,It!==null&&(Dn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Dn?(t=It,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),bl(t)):Gd(It,n.stateNode));break;case 4:i=It,r=Dn,It=n.stateNode.containerInfo,Dn=!0,Ji(t,e,n),It=i,Dn=r;break;case 0:case 11:case 14:case 15:if(!Dt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&rp(n,e,l),r=r.next}while(r!==i)}Ji(t,e,n);break;case 1:if(!Dt&&(Eo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}Ji(t,e,n);break;case 21:Ji(t,e,n);break;case 22:n.mode&1?(Dt=(i=Dt)||n.memoizedState!==null,Ji(t,e,n),Dt=i):Ji(t,e,n);break;default:Ji(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IS),e.forEach(function(i){var r=OS.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:It=h.stateNode,Dn=!1;break e;case 3:It=h.stateNode.containerInfo,Dn=!0;break e;case 4:It=h.stateNode.containerInfo,Dn=!0;break e}h=h.return}if(It===null)throw Error(Q(160));Fx(o,l,r),It=null,Dn=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(g){Je(r,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zx(e,t),e=e.sibling}function zx(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Qn(t),i&4){try{gl(3,t,t.return),Wh(3,t)}catch(j){Je(t,t.return,j)}try{gl(5,t,t.return)}catch(j){Je(t,t.return,j)}}break;case 1:Ln(e,t),Qn(t),i&512&&n!==null&&Eo(n,n.return);break;case 5:if(Ln(e,t),Qn(t),i&512&&n!==null&&Eo(n,n.return),t.flags&32){var r=t.stateNode;try{Sl(r,"")}catch(j){Je(t,t.return,j)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&l0(r,o),Nf(h,l);var g=Nf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],x=d[l+1];y==="style"?f0(r,x):y==="dangerouslySetInnerHTML"?h0(r,x):y==="children"?Sl(r,x):Zp(r,y,x,g)}switch(h){case"input":Sf(r,o);break;case"textarea":u0(r,o);break;case"select":var E=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?Po(r,!!o.multiple,A,!1):E!==!!o.multiple&&(o.defaultValue!=null?Po(r,!!o.multiple,o.defaultValue,!0):Po(r,!!o.multiple,o.multiple?[]:"",!1))}r[Dl]=o}catch(j){Je(t,t.return,j)}}break;case 6:if(Ln(e,t),Qn(t),i&4){if(t.stateNode===null)throw Error(Q(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(j){Je(t,t.return,j)}}break;case 3:if(Ln(e,t),Qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{bl(e.containerInfo)}catch(j){Je(t,t.return,j)}break;case 4:Ln(e,t),Qn(t);break;case 13:Ln(e,t),Qn(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Cm=nt())),i&4&&nv(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(g=Dt)||y,Ln(e,t),Dt=g):Ln(e,t),Qn(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(ie=t,y=t.child;y!==null;){for(x=ie=y;ie!==null;){switch(E=ie,A=E.child,E.tag){case 0:case 11:case 14:case 15:gl(4,E,E.return);break;case 1:Eo(E,E.return);var D=E.stateNode;if(typeof D.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(j){Je(i,n,j)}}break;case 5:Eo(E,E.return);break;case 22:if(E.memoizedState!==null){rv(x);continue}}A!==null?(A.return=E,ie=A):rv(x)}y=y.sibling}e:for(y=null,x=t;;){if(x.tag===5){if(y===null){y=x;try{r=x.stateNode,g?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=x.stateNode,d=x.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=d0("display",l))}catch(j){Je(t,t.return,j)}}}else if(x.tag===6){if(y===null)try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(j){Je(t,t.return,j)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;y===x&&(y=null),x=x.return}y===x&&(y=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ln(e,t),Qn(t),i&4&&nv(t);break;case 21:break;default:Ln(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vx(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Sl(r,""),i.flags&=-33);var o=tv(t);ap(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,h=tv(t);op(t,h,l);break;default:throw Error(Q(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SS(t,e,n){ie=t,Ux(t)}function Ux(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||vc;if(!l){var h=r.alternate,d=h!==null&&h.memoizedState!==null||Dt;h=vc;var g=Dt;if(vc=l,(Dt=d)&&!g)for(ie=r;ie!==null;)l=ie,d=l.child,l.tag===22&&l.memoizedState!==null?sv(r):d!==null?(d.return=l,ie=d):sv(r);for(;o!==null;)ie=o,Ux(o),o=o.sibling;ie=r,vc=h,Dt=g}iv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ie=o):iv(t)}}function iv(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Wh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:On(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&U_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}U_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var x=y.dehydrated;x!==null&&bl(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Dt||e.flags&512&&sp(e)}catch(E){Je(e,e.return,E)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function rv(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function sv(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wh(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){Je(e,r,d)}}var o=e.return;try{sp(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{sp(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){ie=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ie=h;break}ie=e.return}}var CS=Math.ceil,dh=Fi.ReactCurrentDispatcher,Pm=Fi.ReactCurrentOwner,Pn=Fi.ReactCurrentBatchConfig,ke=0,wt=null,at=null,Ct=0,sn=0,To=Lr(0),ft=0,Ul=null,fs=0,Hh=0,Sm=0,_l=null,Kt=null,Cm=0,Uo=1/0,xi=null,fh=!1,lp=null,vr=null,yc=!1,cr=null,ph=0,vl=0,up=null,Dc=-1,Mc=0;function Ht(){return ke&6?nt():Dc!==-1?Dc:Dc=nt()}function yr(t){return t.mode&1?ke&2&&Ct!==0?Ct&-Ct:cS.transition!==null?(Mc===0&&(Mc=P0()),Mc):(t=Le,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function Vn(t,e,n,i){if(50<vl)throw vl=0,up=null,Error(Q(185));nu(t,n,i),(!(ke&2)||t!==wt)&&(t===wt&&(!(ke&2)&&(Hh|=n),ft===4&&rr(t,Ct)),en(t,i),n===1&&ke===0&&!(e.mode&1)&&(Uo=nt()+500,zh&&Or()))}function en(t,e){var n=t.callbackNode;cP(t,e);var i=Yc(t,t===wt?Ct:0);if(i===0)n!==null&&p_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&p_(n),e===1)t.tag===0?uS(ov.bind(null,t)):Y0(ov.bind(null,t)),sS(function(){!(ke&6)&&Or()}),n=null;else{switch(S0(i)){case 1:n=Jp;break;case 4:n=T0;break;case 16:n=Qc;break;case 536870912:n=I0;break;default:n=Qc}n=Kx(n,Bx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bx(t,e){if(Dc=-1,Mc=0,ke&6)throw Error(Q(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var i=Yc(t,t===wt?Ct:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=mh(t,i);else{e=i;var r=ke;ke|=2;var o=Hx();(wt!==t||Ct!==e)&&(xi=null,Uo=nt()+500,os(t,e));do try{bS();break}catch(h){Wx(t,h)}while(!0);dm(),dh.current=o,ke=r,at!==null?e=0:(wt=null,Ct=0,e=ft)}if(e!==0){if(e===2&&(r=Mf(t),r!==0&&(i=r,e=cp(t,r))),e===1)throw n=Ul,os(t,0),rr(t,i),en(t,nt()),n;if(e===6)rr(t,i);else{if(r=t.current.alternate,!(i&30)&&!AS(r)&&(e=mh(t,i),e===2&&(o=Mf(t),o!==0&&(i=o,e=cp(t,o))),e===1))throw n=Ul,os(t,0),rr(t,i),en(t,nt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:es(t,Kt,xi);break;case 3:if(rr(t,i),(i&130023424)===i&&(e=Cm+500-nt(),10<e)){if(Yc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ht(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Hf(es.bind(null,t,Kt,xi),e);break}es(t,Kt,xi);break;case 4:if(rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-jn(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*CS(i/1960))-i,10<i){t.timeoutHandle=Hf(es.bind(null,t,Kt,xi),i);break}es(t,Kt,xi);break;case 5:es(t,Kt,xi);break;default:throw Error(Q(329))}}}return en(t,nt()),t.callbackNode===n?Bx.bind(null,t):null}function cp(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=mh(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&hp(e)),t}function hp(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function AS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Un(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~Sm,e&=~Hh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),i=1<<n;t[n]=-1,e&=~i}}function ov(t){if(ke&6)throw Error(Q(327));bo();var e=Yc(t,0);if(!(e&1))return en(t,nt()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var i=Mf(t);i!==0&&(e=i,n=cp(t,i))}if(n===1)throw n=Ul,os(t,0),rr(t,e),en(t,nt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,Kt,xi),en(t,nt()),null}function Am(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Uo=nt()+500,zh&&Or())}}function ps(t){cr!==null&&cr.tag===0&&!(ke&6)&&bo();var e=ke;ke|=1;var n=Pn.transition,i=Le;try{if(Pn.transition=null,Le=1,t)return t()}finally{Le=i,Pn.transition=n,ke=e,!(ke&6)&&Or()}}function km(){sn=To.current,Ue(To)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rS(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(um(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nh();break;case 3:Fo(),Ue(Xt),Ue(Vt),vm();break;case 5:_m(i);break;case 4:Fo();break;case 13:Ue(Ge);break;case 19:Ue(Ge);break;case 10:fm(i.type._context);break;case 22:case 23:km()}n=n.return}if(wt=t,at=t=xr(t.current,null),Ct=sn=e,ft=0,Ul=null,Sm=Hh=fs=0,Kt=_l=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}is=null}return t}function Wx(t,e){do{var n=at;try{if(dm(),Rc.current=hh,ch){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ch=!1}if(ds=0,xt=dt=Ze=null,ml=!1,Vl=0,Pm.current=null,n===null||n.return===null){ft=1,Ul=e,at=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=Ct,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d,y=h,x=y.tag;if(!(y.mode&1)&&(x===0||x===11||x===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var A=G_(l);if(A!==null){A.flags&=-257,Z_(A,l,h,o,e),A.mode&1&&q_(o,g,e),e=A,d=g;var D=e.updateQueue;if(D===null){var j=new Set;j.add(d),e.updateQueue=j}else D.add(d);break e}else{if(!(e&1)){q_(o,g,e),bm();break e}d=Error(Q(426))}}else if(He&&h.mode&1){var U=G_(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Z_(U,l,h,o,e),cm(zo(d,h));break e}}o=d=zo(d,h),ft!==4&&(ft=2),_l===null?_l=[o]:_l.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=Sx(o,d,e);z_(o,k);break e;case 1:h=d;var P=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(vr===null||!vr.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var $=Cx(o,h,e);z_(o,$);break e}}o=o.return}while(o!==null)}qx(n)}catch(Y){e=Y,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Hx(){var t=dh.current;return dh.current=hh,t===null?hh:t}function bm(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(fs&268435455)&&!(Hh&268435455)||rr(wt,Ct)}function mh(t,e){var n=ke;ke|=2;var i=Hx();(wt!==t||Ct!==e)&&(xi=null,os(t,e));do try{kS();break}catch(r){Wx(t,r)}while(!0);if(dm(),ke=n,dh.current=i,at!==null)throw Error(Q(261));return wt=null,Ct=0,ft}function kS(){for(;at!==null;)$x(at)}function bS(){for(;at!==null&&!tP();)$x(at)}function $x(t){var e=Zx(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?qx(t):at=e,Pm.current=null}function qx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TS(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=ES(n,e,sn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function es(t,e,n){var i=Le,r=Pn.transition;try{Pn.transition=null,Le=1,NS(t,e,n,i)}finally{Pn.transition=r,Le=i}return null}function NS(t,e,n,i){do bo();while(cr!==null);if(ke&6)throw Error(Q(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(hP(t,o),t===wt&&(at=wt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,Kx(Qc,function(){return bo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pn.transition,Pn.transition=null;var l=Le;Le=1;var h=ke;ke|=4,Pm.current=null,PS(t,n),zx(n,t),YP(Bf),Xc=!!Uf,Bf=Uf=null,t.current=n,SS(n),nP(),ke=h,Le=l,Pn.transition=o}else t.current=n;if(yc&&(yc=!1,cr=t,ph=r),o=t.pendingLanes,o===0&&(vr=null),sP(n.stateNode),en(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fh)throw fh=!1,t=lp,lp=null,t;return ph&1&&t.tag!==0&&bo(),o=t.pendingLanes,o&1?t===up?vl++:(vl=0,up=t):vl=0,Or(),null}function bo(){if(cr!==null){var t=S0(ph),e=Pn.transition,n=Le;try{if(Pn.transition=null,Le=16>t?16:t,cr===null)var i=!1;else{if(t=cr,cr=null,ph=0,ke&6)throw Error(Q(331));var r=ke;for(ke|=4,ie=t.current;ie!==null;){var o=ie,l=o.child;if(ie.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var g=h[d];for(ie=g;ie!==null;){var y=ie;switch(y.tag){case 0:case 11:case 15:gl(8,y,o)}var x=y.child;if(x!==null)x.return=y,ie=x;else for(;ie!==null;){y=ie;var E=y.sibling,A=y.return;if(jx(y),y===g){ie=null;break}if(E!==null){E.return=A,ie=E;break}ie=A}}}var D=o.alternate;if(D!==null){var j=D.child;if(j!==null){D.child=null;do{var U=j.sibling;j.sibling=null,j=U}while(j!==null)}}ie=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ie=l;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gl(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ie=k;break e}ie=o.return}}var P=t.current;for(ie=P;ie!==null;){l=ie;var O=l.child;if(l.subtreeFlags&2064&&O!==null)O.return=l,ie=O;else e:for(l=P;ie!==null;){if(h=ie,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Wh(9,h)}}catch(Y){Je(h,h.return,Y)}if(h===l){ie=null;break e}var $=h.sibling;if($!==null){$.return=h.return,ie=$;break e}ie=h.return}}if(ke=r,Or(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Dh,t)}catch{}i=!0}return i}finally{Le=n,Pn.transition=e}}return!1}function av(t,e,n){e=zo(n,e),e=Sx(t,e,1),t=_r(t,e,1),e=Ht(),t!==null&&(nu(t,1,e),en(t,e))}function Je(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vr===null||!vr.has(i))){t=zo(n,t),t=Cx(e,t,1),e=_r(e,t,1),t=Ht(),e!==null&&(nu(e,1,t),en(e,t));break}}e=e.return}}function RS(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Ct&n)===n&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>nt()-Cm?os(t,0):Sm|=n),en(t,e)}function Gx(t,e){e===0&&(t.mode&1?(e=uc,uc<<=1,!(uc&130023424)&&(uc=4194304)):e=1);var n=Ht();t=Ri(t,e),t!==null&&(nu(t,e,n),en(t,n))}function LS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gx(t,n)}function OS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),Gx(t,n)}var Zx;Zx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,wS(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,He&&e.flags&1048576&&X0(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Oc(t,e),t=e.pendingProps;var r=Mo(e,Vt.current);ko(e,n),r=xm(null,e,i,t,r,n);var o=wm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,ih(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mm(e),r.updater=Bh,e.stateNode=r,r._reactInternals=e,Yf(e,i,t,n),e=ep(null,e,i,!0,o,n)):(e.tag=0,He&&o&&lm(e),Wt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Oc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=MS(i),t=On(i,t),r){case 0:e=Jf(null,e,i,t,n);break e;case 1:e=Y_(null,e,i,t,n);break e;case 11:e=K_(null,e,i,t,n);break e;case 14:e=Q_(null,e,i,On(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:On(i,r),Jf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:On(i,r),Y_(t,e,i,r,n);case 3:e:{if(Nx(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,r=o.element,rx(t,e),lh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=zo(Error(Q(423)),e),e=X_(t,e,i,n,r);break e}else if(i!==r){r=zo(Error(Q(424)),e),e=X_(t,e,i,n,r);break e}else for(on=gr(e.stateNode.containerInfo.firstChild),ln=e,He=!0,Mn=null,n=nx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),i===r){e=Li(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return sx(e),t===null&&Zf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,Wf(i,r)?l=null:o!==null&&Wf(i,o)&&(e.flags|=32),bx(t,e),Wt(t,e,l,n),e.child;case 6:return t===null&&Zf(e),null;case 13:return Rx(t,e,n);case 4:return gm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Vo(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:On(i,r),K_(t,e,i,r,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,Ve(oh,i._currentValue),i._currentValue=l,o!==null)if(Un(o.value,l)){if(o.children===r.children&&!Xt.current){e=Li(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ci(-1,n&-n),d.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?d.next=d:(d.next=y.next,y.next=d),g.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Kf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Kf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Wt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ko(e,n),r=Sn(r),i=i(r),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,r=On(i,e.pendingProps),r=On(i.type,r),Q_(t,e,i,r,n);case 15:return Ax(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:On(i,r),Oc(t,e),e.tag=1,Jt(i)?(t=!0,ih(e)):t=!1,ko(e,n),Px(e,i,r),Yf(e,i,r,n),ep(null,e,i,!0,t,n);case 19:return Lx(t,e,n);case 22:return kx(t,e,n)}throw Error(Q(156,e.tag))};function Kx(t,e){return E0(t,e)}function DS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,i){return new DS(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MS(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qp)return 11;if(t===Yp)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jc(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Nm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case fo:return as(n.children,r,o,e);case Kp:l=8,r|=8;break;case wf:return t=Tn(12,n,e,r|2),t.elementType=wf,t.lanes=o,t;case Ef:return t=Tn(13,n,e,r),t.elementType=Ef,t.lanes=o,t;case Tf:return t=Tn(19,n,e,r),t.elementType=Tf,t.lanes=o,t;case s0:return $h(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i0:l=10;break e;case r0:l=9;break e;case Qp:l=11;break e;case Yp:l=14;break e;case tr:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Tn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function as(t,e,n,i){return t=Tn(7,t,i,e),t.lanes=n,t}function $h(t,e,n,i){return t=Tn(22,t,i,e),t.elementType=s0,t.lanes=n,t.stateNode={isHidden:!1},t}function tf(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function nf(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jS(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Rm(t,e,n,i,r,o,l,h,d){return t=new jS(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Tn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mm(o),t}function VS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ho,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Qx(t){if(!t)return Cr;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Jt(n))return Q0(t,n,e)}return e}function Yx(t,e,n,i,r,o,l,h,d){return t=Rm(n,i,!0,t,r,o,l,h,d),t.context=Qx(null),n=t.current,i=Ht(),r=yr(n),o=Ci(i,r),o.callback=e??null,_r(n,o,r),t.current.lanes=r,nu(t,r,i),en(t,i),t}function qh(t,e,n,i){var r=e.current,o=Ht(),l=yr(r);return n=Qx(n),e.context===null?e.context=n:e.pendingContext=n,e=Ci(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=_r(r,e,l),t!==null&&(Vn(t,r,l,o),Nc(t,r,l)),l}function gh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lm(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function FS(){return null}var Xx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Om(t){this._internalRoot=t}Gh.prototype.render=Om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));qh(t,e,null,null)};Gh.prototype.unmount=Om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){qh(null,t,null,null)}),e[Ni]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=k0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ir.length&&e!==0&&e<ir[n].priority;n++);ir.splice(n,0,t),n===0&&N0(t)}};function Dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uv(){}function zS(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var g=gh(l);o.call(g)}}var l=Yx(e,i,t,0,null,!1,!1,"",uv);return t._reactRootContainer=l,t[Ni]=l.current,Ll(t.nodeType===8?t.parentNode:t),ps(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var h=i;i=function(){var g=gh(d);h.call(g)}}var d=Rm(t,0,!1,null,null,!1,!1,"",uv);return t._reactRootContainer=d,t[Ni]=d.current,Ll(t.nodeType===8?t.parentNode:t),ps(function(){qh(e,d,n,i)}),d}function Kh(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var h=r;r=function(){var d=gh(l);h.call(d)}}qh(e,l,t,r)}else l=zS(n,e,t,r,i);return gh(l)}C0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nl(e.pendingLanes);n!==0&&(em(e,n|1),en(e,nt()),!(ke&6)&&(Uo=nt()+500,Or()))}break;case 13:ps(function(){var i=Ri(t,1);if(i!==null){var r=Ht();Vn(i,t,1,r)}}),Lm(t,1)}};tm=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Ht();Vn(e,t,134217728,n)}Lm(t,134217728)}};A0=function(t){if(t.tag===13){var e=yr(t),n=Ri(t,e);if(n!==null){var i=Ht();Vn(n,t,e,i)}Lm(t,e)}};k0=function(){return Le};b0=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};Lf=function(t,e,n){switch(e){case"input":if(Sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Fh(i);if(!r)throw Error(Q(90));a0(i),Sf(i,r)}}}break;case"textarea":u0(t,n);break;case"select":e=n.value,e!=null&&Po(t,!!n.multiple,e,!1)}};g0=Am;_0=ps;var US={usingClientEntryPoint:!1,Events:[ru,_o,Fh,p0,m0,Am]},Ya={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BS={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||FS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{Dh=xc.inject(BS),ei=xc}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=US;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(e))throw Error(Q(200));return VS(t,e,null,n)};cn.createRoot=function(t,e){if(!Dm(t))throw Error(Q(299));var n=!1,i="",r=Xx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Rm(t,1,!1,null,null,n,!1,i,r),t[Ni]=e.current,Ll(t.nodeType===8?t.parentNode:t),new Om(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=x0(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return ps(t)};cn.hydrate=function(t,e,n){if(!Zh(e))throw Error(Q(200));return Kh(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!Dm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=Xx;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Yx(e,null,t,1,n??null,r,!1,o,l),t[Ni]=e.current,Ll(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gh(e)};cn.render=function(t,e,n){if(!Zh(e))throw Error(Q(200));return Kh(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(Q(40));return t._reactRootContainer?(ps(function(){Kh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ni]=null})}),!0):!1};cn.unstable_batchedUpdates=Am;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Zh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Kh(t,e,n,!1,i)};cn.version="18.3.1-next-f1338f8080-20240426";function Jx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jx)}catch(t){console.error(t)}}Jx(),Jy.exports=cn;var ew=Jy.exports,cv=ew;yf.createRoot=cv.createRoot,yf.hydrateRoot=cv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bl.apply(this,arguments)}var hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hr||(hr={}));const hv="popstate";function WS(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:l,hash:h}=i.location;return dp("",{pathname:o,search:l,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:tw(r)}return $S(e,n,null,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HS(){return Math.random().toString(36).substr(2,8)}function dv(t,e){return{usr:t.state,key:t.key,idx:e}}function dp(t,e,n,i){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:n,key:e&&e.key||i||HS()})}function tw(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function $S(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,h=hr.Pop,d=null,g=y();g==null&&(g=0,l.replaceState(Bl({},l.state,{idx:g}),""));function y(){return(l.state||{idx:null}).idx}function x(){h=hr.Pop;let U=y(),k=U==null?null:U-g;g=U,d&&d({action:h,location:j.location,delta:k})}function E(U,k){h=hr.Push;let P=dp(j.location,U,k);g=y()+1;let O=dv(P,g),$=j.createHref(P);try{l.pushState(O,"",$)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;r.location.assign($)}o&&d&&d({action:h,location:j.location,delta:1})}function A(U,k){h=hr.Replace;let P=dp(j.location,U,k);g=y();let O=dv(P,g),$=j.createHref(P);l.replaceState(O,"",$),o&&d&&d({action:h,location:j.location,delta:0})}function D(U){let k=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof U=="string"?U:tw(U);return P=P.replace(/ $/,"%20"),ut(k,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,k)}let j={get action(){return h},get location(){return t(r,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(hv,x),d=U,()=>{r.removeEventListener(hv,x),d=null}},createHref(U){return e(r,U)},createURL:D,encodeLocation(U){let k=D(U);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:E,replace:A,go(U){return l.go(U)}};return j}var fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fv||(fv={}));function qS(t,e,n){return n===void 0&&(n="/"),GS(t,e,n)}function GS(t,e,n,i){let r=typeof e=="string"?Jo(e):e,o=rw(r.pathname||"/",n);if(o==null)return null;let l=nw(t);ZS(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let g=oC(o);h=iC(l[d],g)}return h}function nw(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ut(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let g=ls([i,d.relativePath]),y=n.concat(d);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),nw(o.children,e,y,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:tC(g,o.index),routesMeta:y})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of iw(o.path))r(o,l,d)}),e}function iw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=iw(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function ZS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const KS=/^:[\w-]+$/,QS=3,YS=2,XS=1,JS=10,eC=-2,pv=t=>t==="*";function tC(t,e){let n=t.split("/"),i=n.length;return n.some(pv)&&(i+=eC),e&&(i+=YS),n.filter(r=>!pv(r)).reduce((r,o)=>r+(KS.test(o)?QS:o===""?XS:JS),i)}function nC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function iC(t,e,n){let{routesMeta:i}=t,r={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],g=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",x=rC({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},y),E=d.route;if(!x)return null;Object.assign(r,x.params),l.push({params:r,pathname:ls([o,x.pathname]),pathnameBase:hC(ls([o,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(o=ls([o,x.pathnameBase]))}return l}function rC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=sC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((g,y,x)=>{let{paramName:E,isOptional:A}=y;if(E==="*"){let j=h[x]||"";l=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const D=h[x];return A&&!D?g[E]=void 0:g[E]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:l,pattern:t}}function sC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function oC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lC=t=>aC.test(t);function uC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Jo(t):t,o;if(n)if(lC(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Mm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=mv(n.substring(1),"/"):o=mv(n,e)}else o=e;return{pathname:o,search:dC(i),hash:fC(r)}}function mv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function rf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sw(t,e){let n=cC(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function ow(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Jo(t):(r=Bl({},t),ut(!r.pathname||!r.pathname.includes("?"),rf("?","pathname","search",r)),ut(!r.pathname||!r.pathname.includes("#"),rf("#","pathname","hash",r)),ut(!r.search||!r.search.includes("#"),rf("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=n;else{let x=e.length-1;if(!i&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),x-=1;r.pathname=E.join("/")}h=x>=0?e[x]:"/"}let d=uC(r,h),g=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(g||y)&&(d.pathname+="/"),d}const ls=t=>t.join("/").replace(/\/\/+/g,"/"),hC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aw=["post","put","patch","delete"];new Set(aw);const mC=["get",...aw];new Set(mC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wl.apply(this,arguments)}const jm=H.createContext(null),gC=H.createContext(null),ou=H.createContext(null),Qh=H.createContext(null),Ps=H.createContext({outlet:null,matches:[],isDataRoute:!1}),lw=H.createContext(null);function au(){return H.useContext(Qh)!=null}function Yh(){return au()||ut(!1),H.useContext(Qh).location}function uw(t){H.useContext(ou).static||H.useLayoutEffect(t)}function dn(){let{isDataRoute:t}=H.useContext(Ps);return t?kC():_C()}function _C(){au()||ut(!1);let t=H.useContext(jm),{basename:e,future:n,navigator:i}=H.useContext(ou),{matches:r}=H.useContext(Ps),{pathname:o}=Yh(),l=JSON.stringify(sw(r,n.v7_relativeSplatPath)),h=H.useRef(!1);return uw(()=>{h.current=!0}),H.useCallback(function(g,y){if(y===void 0&&(y={}),!h.current)return;if(typeof g=="number"){i.go(g);return}let x=ow(g,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ls([e,x.pathname])),(y.replace?i.replace:i.push)(x,y.state,y)},[e,i,l,o,t])}function vC(t,e){return yC(t,e)}function yC(t,e,n,i){au()||ut(!1);let{navigator:r}=H.useContext(ou),{matches:o}=H.useContext(Ps),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let g=Yh(),y;if(e){var x;let U=typeof e=="string"?Jo(e):e;d==="/"||(x=U.pathname)!=null&&x.startsWith(d)||ut(!1),y=U}else y=g;let E=y.pathname||"/",A=E;if(d!=="/"){let U=d.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=qS(t,{pathname:A}),j=IC(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:ls([d,r.encodeLocation?r.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:ls([d,r.encodeLocation?r.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&j?H.createElement(Qh.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:hr.Pop}},j):j}function xC(){let t=AC(),e=pC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:r},n):null,null)}const wC=H.createElement(xC,null);class EC extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(Ps.Provider,{value:this.props.routeContext},H.createElement(lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TC(t){let{routeContext:e,match:n,children:i}=t,r=H.useContext(jm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Ps.Provider,{value:e},i)}function IC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(r=n)==null?void 0:r.errors;if(h!=null){let y=l.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);y>=0||ut(!1),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:E,errors:A}=n,D=x.route.loader&&E[x.route.id]===void 0&&(!A||A[x.route.id]===void 0);if(x.route.lazy||D){d=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,x,E)=>{let A,D=!1,j=null,U=null;n&&(A=h&&x.route.id?h[x.route.id]:void 0,j=x.route.errorElement||wC,d&&(g<0&&E===0?(bC("route-fallback"),D=!0,U=null):g===E&&(D=!0,U=x.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,E+1)),P=()=>{let O;return A?O=j:D?O=U:x.route.Component?O=H.createElement(x.route.Component,null):x.route.element?O=x.route.element:O=y,H.createElement(TC,{match:x,routeContext:{outlet:y,matches:k,isDataRoute:n!=null},children:O})};return n&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?H.createElement(EC,{location:n.location,revalidation:n.revalidation,component:j,error:A,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}var cw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cw||{}),hw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hw||{});function PC(t){let e=H.useContext(jm);return e||ut(!1),e}function SC(t){let e=H.useContext(gC);return e||ut(!1),e}function CC(t){let e=H.useContext(Ps);return e||ut(!1),e}function dw(t){let e=CC(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function AC(){var t;let e=H.useContext(lw),n=SC(),i=dw();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function kC(){let{router:t}=PC(cw.UseNavigateStable),e=dw(hw.UseNavigateStable),n=H.useRef(!1);return uw(()=>{n.current=!0}),H.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Wl({fromRouteId:e},o)))},[t,e])}const gv={};function bC(t,e,n){gv[t]||(gv[t]=!0)}function NC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function RC(t){let{to:e,replace:n,state:i,relative:r}=t;au()||ut(!1);let{future:o,static:l}=H.useContext(ou),{matches:h}=H.useContext(Ps),{pathname:d}=Yh(),g=dn(),y=ow(e,sw(h,o.v7_relativeSplatPath),d,r==="path"),x=JSON.stringify(y);return H.useEffect(()=>g(JSON.parse(x),{replace:n,state:i,relative:r}),[g,x,r,n,i]),null}function Tt(t){ut(!1)}function LC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=hr.Pop,navigator:o,static:l=!1,future:h}=t;au()&&ut(!1);let d=e.replace(/^\/*/,"/"),g=H.useMemo(()=>({basename:d,navigator:o,static:l,future:Wl({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=Jo(i));let{pathname:y="/",search:x="",hash:E="",state:A=null,key:D="default"}=i,j=H.useMemo(()=>{let U=rw(y,d);return U==null?null:{location:{pathname:U,search:x,hash:E,state:A,key:D},navigationType:r}},[d,y,x,E,A,D,r]);return j==null?null:H.createElement(ou.Provider,{value:g},H.createElement(Qh.Provider,{children:n,value:j}))}function OC(t){let{children:e,location:n}=t;return vC(fp(e),n)}new Promise(()=>{});function fp(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(i,r)=>{if(!H.isValidElement(i))return;let o=[...e,r];if(i.type===H.Fragment){n.push.apply(n,fp(i.props.children,o));return}i.type!==Tt&&ut(!1),!i.props.index||!i.props.children||ut(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=fp(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const DC="6";try{window.__reactRouterVersion=DC}catch{}const MC="startTransition",_v=RI[MC];function jC(t){let{basename:e,children:n,future:i,window:r}=t,o=H.useRef();o.current==null&&(o.current=WS({window:r,v5Compat:!0}));let l=o.current,[h,d]=H.useState({action:l.action,location:l.location}),{v7_startTransition:g}=i||{},y=H.useCallback(x=>{g&&_v?_v(()=>d(x)):d(x)},[d,g]);return H.useLayoutEffect(()=>l.listen(y),[l,y]),H.useEffect(()=>NC(i),[i]),H.createElement(LC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var vv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vv||(vv={}));var yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yv||(yv={}));var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},VC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],h=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},pw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,h=l?t[r+1]:0,d=r+2<t.length,g=d?t[r+2]:0,y=o>>2,x=(o&3)<<4|h>>4;let E=(h&15)<<2|g>>6,A=g&63;d||(A=64,l||(E=64)),i.push(n[y],n[x],n[E],n[A])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const g=r<t.length?n[t.charAt(r)]:64;++r;const x=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||h==null||g==null||x==null)throw new FC;const E=o<<2|h>>4;if(i.push(E),g!==64){const A=h<<4&240|g>>2;if(i.push(A),x!==64){const D=g<<6&192|x;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zC=function(t){const e=fw(t);return pw.encodeByteArray(e,!0)},_h=function(t){return zC(t).replace(/\./g,"")},mw=function(t){try{return pw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=()=>UC().__FIREBASE_DEFAULTS__,WC=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mw(t[1]);return e&&JSON.parse(e)},Xh=()=>{try{return BC()||WC()||HC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gw=t=>{var e,n;return(n=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$C=t=>{const e=gw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_w=()=>{var t;return(t=Xh())===null||t===void 0?void 0:t.config},vw=t=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_h(JSON.stringify(n)),_h(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function KC(){var t;const e=(t=Xh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JC(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eA(){return!KC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tA(){try{return typeof indexedDB=="object"}catch{return!1}}function nA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="FirebaseError";class zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=iA,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?rA(o,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new zi(r,h,i)}}function rA(t,e){return t.replace(sA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const sA=/\{\$([^}]+)}/g;function oA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(wv(o)&&wv(l)){if(!vh(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function sl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aA(t,e){const n=new lA(t,e);return n.subscribe.bind(n)}class lA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=sf),r.error===void 0&&(r.error=sf),r.complete===void 0&&(r.complete=sf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class ms{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new qC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dA(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(t){return t===ts?void 0:t}function dA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const pA={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},mA=Se.INFO,gA={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},_A=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=gA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=mA,this._logHandler=_A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const vA=(t,e)=>e.some(n=>t instanceof n);let Ev,Tv;function yA(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xA(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yw=new WeakMap,pp=new WeakMap,xw=new WeakMap,of=new WeakMap,Fm=new WeakMap;function wA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(wr(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&yw.set(n,t)}).catch(()=>{}),Fm.set(e,t),e}function EA(t){if(pp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});pp.set(t,e)}let mp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TA(t){mp=t(mp)}function IA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(af(this),e,...n);return xw.set(i,e.sort?e.sort():[e]),wr(i)}:xA().includes(t)?function(...e){return t.apply(af(this),e),wr(yw.get(this))}:function(...e){return wr(t.apply(af(this),e))}}function PA(t){return typeof t=="function"?IA(t):(t instanceof IDBTransaction&&EA(t),vA(t,yA())?new Proxy(t,mp):t)}function wr(t){if(t instanceof IDBRequest)return wA(t);if(of.has(t))return of.get(t);const e=PA(t);return e!==t&&(of.set(t,e),Fm.set(e,t)),e}const af=t=>Fm.get(t);function SA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),h=wr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(wr(l.result),d.oldVersion,d.newVersion,wr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const CA=["get","getKey","getAll","getAllKeys","count"],AA=["put","add","delete","clear"],lf=new Map;function Iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=AA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CA.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let g=d.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),r&&d.done]))[0]};return lf.set(e,o),o}TA(t=>({...t,get:(e,n,i)=>Iv(e,n)||t.get(e,n,i),has:(e,n)=>!!Iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function bA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gp="@firebase/app",Pv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Vm("@firebase/app"),NA="@firebase/app-compat",RA="@firebase/analytics-compat",LA="@firebase/analytics",OA="@firebase/app-check-compat",DA="@firebase/app-check",MA="@firebase/auth",jA="@firebase/auth-compat",VA="@firebase/database",FA="@firebase/data-connect",zA="@firebase/database-compat",UA="@firebase/functions",BA="@firebase/functions-compat",WA="@firebase/installations",HA="@firebase/installations-compat",$A="@firebase/messaging",qA="@firebase/messaging-compat",GA="@firebase/performance",ZA="@firebase/performance-compat",KA="@firebase/remote-config",QA="@firebase/remote-config-compat",YA="@firebase/storage",XA="@firebase/storage-compat",JA="@firebase/firestore",e1="@firebase/vertexai-preview",t1="@firebase/firestore-compat",n1="firebase",i1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",r1={[gp]:"fire-core",[NA]:"fire-core-compat",[LA]:"fire-analytics",[RA]:"fire-analytics-compat",[DA]:"fire-app-check",[OA]:"fire-app-check-compat",[MA]:"fire-auth",[jA]:"fire-auth-compat",[VA]:"fire-rtdb",[FA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[UA]:"fire-fn",[BA]:"fire-fn-compat",[WA]:"fire-iid",[HA]:"fire-iid-compat",[$A]:"fire-fcm",[qA]:"fire-fcm-compat",[GA]:"fire-perf",[ZA]:"fire-perf-compat",[KA]:"fire-rc",[QA]:"fire-rc-compat",[YA]:"fire-gcs",[XA]:"fire-gcs-compat",[JA]:"fire-fst",[t1]:"fire-fst-compat",[e1]:"fire-vertex","fire-js":"fire-js",[n1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,s1=new Map,vp=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bo(t){const e=t.name;if(vp.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,t);for(const n of yh.values())Sv(n,t);for(const n of s1.values())Sv(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new lu("app","Firebase",o1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=i1;function ww(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:_p,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Er.create("bad-app-name",{appName:String(r)});if(n||(n=_w()),!n)throw Er.create("no-options");const o=yh.get(r);if(o){if(vh(n,o.options)&&vh(i,o.config))return o;throw Er.create("duplicate-app",{appName:r})}const l=new fA(r);for(const d of vp.values())l.addComponent(d);const h=new a1(n,i,l);return yh.set(r,h),h}function Ew(t=_p){const e=yh.get(t);if(!e&&t===_p&&_w())return ww();if(!e)throw Er.create("no-app",{appName:t});return e}function Tr(t,e,n){var i;let r=(i=r1[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(h.join(" "));return}Bo(new ms(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebase-heartbeat-database",u1=1,Hl="firebase-heartbeat-store";let uf=null;function Tw(){return uf||(uf=SA(l1,u1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),uf}async function c1(t){try{const n=(await Tw()).transaction(Hl),i=await n.objectStore(Hl).get(Iw(t));return await n.done,i}catch(e){if(e instanceof zi)Oi.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function Cv(t,e){try{const i=(await Tw()).transaction(Hl,"readwrite");await i.objectStore(Hl).put(e,Iw(t)),await i.done}catch(n){if(n instanceof zi)Oi.warn(n.message);else{const i=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(i.message)}}}function Iw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=1024,d1=30*24*60*60*1e3;class f1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Av();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=d1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Oi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Av(),{heartbeatsToSend:i,unsentEntries:r}=p1(this._heartbeatsCache.heartbeats),o=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Oi.warn(n),""}}}function Av(){return new Date().toISOString().substring(0,10)}function p1(t,e=h1){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),kv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),kv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class m1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tA()?nA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kv(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){Bo(new ms("platform-logger",e=>new kA(e),"PRIVATE")),Bo(new ms("heartbeat",e=>new f1(e),"PRIVATE")),Tr(gp,Pv,t),Tr(gp,Pv,"esm2017"),Tr("fire-js","")}g1("");function Um(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _1=Pw,Sw=new lu("auth","Firebase",Pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Vm("@firebase/auth");function v1(t,...e){xh.logLevel<=Se.WARN&&xh.warn(`Auth (${ea}): ${t}`,...e)}function Vc(t,...e){xh.logLevel<=Se.ERROR&&xh.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw Bm(t,...e)}function ni(t,...e){return Bm(t,...e)}function Cw(t,e,n){const i=Object.assign(Object.assign({},_1()),{[e]:n});return new lu("auth","Firebase",i).create(e,{appName:t.name})}function Ai(t){return Cw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Sw.create(t,...e)}function ce(t,e,...n){if(!t)throw Bm(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vc(e),new Error(e)}function Di(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function y1(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y1()||YC()||"connection"in navigator)?navigator.onLine:!0}function w1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||XC()}get(){return x1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){Di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new cu(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mr(t,e,n,i,r={}){return kw(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=uu(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:d},o);return QC()||(g.referrerPolicy="no-referrer"),Aw.fetch()(bw(t,t.config.apiHost,n,h),g)})}async function kw(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},E1),e);try{const r=new P1(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw wc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,g]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw wc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw wc(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Cw(t,y,g);Bn(t,y)}}catch(r){if(r instanceof zi)throw r;Bn(t,"network-request-failed",{message:String(r)})}}async function hu(t,e,n,i,r={}){const o=await Mr(t,e,n,i,r);return"mfaPendingCredential"in o&&Bn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function bw(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Wm(t.config,r):`${t.config.apiScheme}://${r}`}function I1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ni(this.auth,"network-request-failed")),T1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ni(t,e,i);return r.customData._tokenResponse=n,r}function Nv(t){return t!==void 0&&t.enterprise!==void 0}class S1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return I1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function C1(t,e){return Mr(t,"GET","/v2/recaptchaConfig",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(t,e){return Mr(t,"POST","/v1/accounts:delete",e)}async function Nw(t,e){return Mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k1(t,e=!1){const n=mt(t),i=await n.getIdToken(e),r=Hm(i);ce(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:yl(cf(r.auth_time)),issuedAtTime:yl(cf(r.iat)),expirationTime:yl(cf(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function cf(t){return Number(t)*1e3}function Hm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const r=mw(n);return r?JSON.parse(r):(Vc("Failed to decode base64 JWT payload"),null)}catch(r){return Vc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Rv(t){const e=Hm(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zi&&b1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function b1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await $l(t,Nw(n,{idToken:i}));ce(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Rw(o.providerUserInfo):[],h=L1(t.providerData,l),d=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),y=d?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new xp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,x)}async function R1(t){const e=mt(t);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Rw(t){return t.map(e=>{var{providerId:n}=e,i=Um(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(t,e){const n=await kw(t,{},async()=>{const i=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=bw(t,r,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Aw.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D1(t,e){return Mr(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await O1(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new No;return i&&(ce(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(ce(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pi{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new N1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k1(this,e)}reload(){return R1(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await wh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await $l(this,A1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,h,d,g,y;const x=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(r=n.email)!==null&&r!==void 0?r:void 0,A=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,j=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(g=n.createdAt)!==null&&g!==void 0?g:void 0,P=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:O,emailVerified:$,isAnonymous:Y,providerData:J,stsTokenManager:C}=n;ce(O&&C,e,"internal-error");const T=No.fromJSON(this.name,C);ce(typeof O=="string",e,"internal-error"),er(x,e.name),er(E,e.name),ce(typeof $=="boolean",e,"internal-error"),ce(typeof Y=="boolean",e,"internal-error"),er(A,e.name),er(D,e.name),er(j,e.name),er(U,e.name),er(k,e.name),er(P,e.name);const S=new Pi({uid:O,auth:e,email:E,emailVerified:$,displayName:x,isAnonymous:Y,photoURL:D,phoneNumber:A,tenantId:j,stsTokenManager:T,createdAt:k,lastLoginAt:P});return J&&Array.isArray(J)&&(S.providerData=J.map(N=>Object.assign({},N))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,n,i=!1){const r=new No;r.updateFromServerResponse(n);const o=new Pi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await wh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ce(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Rw(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new No;h.updateFromIdToken(i);const d=new Pi({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new xp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,g),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;function Si(t){Di(t instanceof Function,"Expected a class definition");let e=Lv.get(t);return e?(Di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Lw.type="NONE";const Ov=Lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ro{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Fc(this.userKey,r.apiKey,o),this.fullPersistenceKey=Fc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ro(Si(Ov),e,i);const r=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=r[0]||Si(Ov);const l=Fc(i,e.config.apiKey,e.name);let h=null;for(const g of n)try{const y=await g._get(l);if(y){const x=Pi._fromJSON(e,y);g!==o&&(h=x),o=g;break}}catch{}const d=r.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ro(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(l)}catch{}})),new Ro(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fw(e))return"Blackberry";if(zw(e))return"Webos";if(Dw(e))return"Safari";if((e.includes("chrome/")||Mw(e))&&!e.includes("edge/"))return"Chrome";if(Vw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ow(t=Ft()){return/firefox\//i.test(t)}function Dw(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mw(t=Ft()){return/crios\//i.test(t)}function jw(t=Ft()){return/iemobile/i.test(t)}function Vw(t=Ft()){return/android/i.test(t)}function Fw(t=Ft()){return/blackberry/i.test(t)}function zw(t=Ft()){return/webos/i.test(t)}function $m(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M1(t=Ft()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function j1(){return JC()&&document.documentMode===10}function Uw(t=Ft()){return $m(t)||Vw(t)||zw(t)||Fw(t)||/windows phone/i.test(t)||jw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t,e=[]){let n;switch(t){case"Browser":n=Dv(Ft());break;case"Worker":n=`${Dv(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(t,e={}){return Mr(t,"GET","/v2/passwordPolicy",Dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=6;class U1{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:z1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mv(this),this.idTokenSubscription=new Mv(this),this.beforeStateQueue=new V1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nw(this,{idToken:e}),i=await Pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Ai(this));const n=e?mt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F1(this),n=new U1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await D1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&v1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ss(t){return mt(t)}class Mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=aA(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W1(t){Jh=t}function Ww(t){return Jh.loadJS(t)}function H1(){return Jh.recaptchaEnterpriseScript}function $1(){return Jh.gapiScript}function q1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const G1="recaptcha-enterprise",Z1="NO_RECAPTCHA";class K1{constructor(e){this.type=G1,this.auth=Ss(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{C1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new S1(d);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,l(g.siteKey)}}).catch(d=>{h(d)})})}function r(o,l,h){const d=window.grecaptcha;Nv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(g=>{l(g)}).catch(()=>{l(Z1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Nv(window.grecaptcha))r(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=H1();d.length!==0&&(d+=h),Ww(d).then(()=>{r(h,o,l)}).catch(g=>{l(g)})}}).catch(h=>{l(h)})})}}async function jv(t,e,n,i=!1){const r=new K1(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function wp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await jv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){const n=zm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(vh(o,e??{}))return r;Bn(r,"already-initialized")}return n.initialize({options:e})}function Y1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function X1(t,e,n){const i=Ss(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=Hw(e),{host:l,port:h}=J1(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),ek()}function Hw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J1(t){const e=Hw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Vv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Vv(l)}}}function Vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ek(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function tk(t,e){return Mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return hu(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return hu(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function rk(t,e){return hu(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends qm{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ql(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ql(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",nk);case"emailLink":return ik(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,i,"signUpPassword",tk);case"emailLink":return rk(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e){return hu(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="http://localhost";class gs extends qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Um(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new gs(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Lo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Lo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lo(e,n)}buildRequest(){const e={requestUri:sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ak(t){const e=rl(sl(t)).link,n=e?rl(sl(e)).deep_link_id:null,i=rl(sl(t)).deep_link_id;return(i?rl(sl(i)).link:null)||i||n||e||t}class Gm{constructor(e){var n,i,r,o,l,h;const d=rl(sl(e)),g=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,x=ok((r=d.mode)!==null&&r!==void 0?r:null);ce(g&&y&&x,"argument-error"),this.apiKey=g,this.operation=x,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=ak(e);try{return new Gm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Gm.parseLink(n);return ce(i,"argument-error"),ql._fromEmailAndCode(e,i.code,i.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends $w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends du{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return or.credential(n,i)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends du{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends du{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e){return hu(t,"POST","/v1/accounts:signUp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Pi._fromIdTokenResponse(e,i,r),l=Fv(i);return new _s({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Fv(i);return new _s({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends zi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Eh(e,n,i,r)}}function qw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(t,o,e,i):o})}async function uk(t,e,n=!1){const i=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _s._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e,n=!1){const{auth:i}=t;if(Jn(i.app))return Promise.reject(Ai(i));const r="reauthenticate";try{const o=await $l(t,qw(i,r,e,t),n);ce(o.idToken,i,"internal-error");const l=Hm(o.idToken);ce(l,i,"internal-error");const{sub:h}=l;return ce(t.uid===h,i,"user-mismatch"),_s._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t,e,n=!1){if(Jn(t.app))return Promise.reject(Ai(t));const i="signIn",r=await qw(t,i,e),o=await _s._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function hk(t,e){return Gw(Ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(t){const e=Ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dk(t,e,n){if(Jn(t.app))return Promise.reject(Ai(t));const i=Ss(t),l=await wp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lk).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Zw(t),d}),h=await _s._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function Kw(t,e,n){return Jn(t.app)?Promise.reject(Ai(t)):hk(mt(t),ta.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e){return mt(t).setPersistence(e)}function pk(t,e,n,i){return mt(t).onIdTokenChanged(e,n,i)}function mk(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function gk(t,e,n,i){return mt(t).onAuthStateChanged(e,n,i)}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,vk=10;class Yw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);j1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,vk):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const Xw=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Jw.type="SESSION";const Zm=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async g=>g(n.origin,o)),d=await yk(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const g=Km("",20);r.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(x){const E=x;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function wk(t){ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function Ek(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ik(){return eE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firebaseLocalStorageDb",Pk=1,Ih="firebaseLocalStorage",nE="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function td(t,e){return t.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function Sk(){const t=indexedDB.deleteDatabase(tE);return new fu(t).toPromise()}function Ep(){const t=indexedDB.open(tE,Pk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ih,{keyPath:nE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ih)?e(i):(i.close(),await Sk(),e(await Ep()))})})}async function zv(t,e,n){const i=td(t,!0).put({[nE]:e,value:n});return new fu(i).toPromise()}async function Ck(t,e){const n=td(t,!1).get(e),i=await new fu(n).toPromise();return i===void 0?null:i.value}function Uv(t,e){const n=td(t,!0).delete(e);return new fu(n).toPromise()}const Ak=800,kk=3;class iE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ed._getInstance(Ik()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ek(),!this.activeServiceWorker)return;this.sender=new xk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await zv(e,Th,"1"),await Uv(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ck(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=td(r,!1).getAll();return new fu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ak)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iE.type="LOCAL";const bk=iE;new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e){return e?Si(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Rk(t){return Gw(t.auth,new Qm(t),t.bypassAuthState)}function Lk(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),ck(n,new Qm(t),t.bypassAuthState)}async function Ok(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),uk(n,new Qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rk;case"linkViaPopup":case"linkViaRedirect":return Ok;case"reauthViaPopup":case"reauthViaRedirect":return Lk;default:Bn(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new cu(2e3,1e4);class Io extends rE{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Dk.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="pendingRedirect",zc=new Map;class jk extends rE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const i=await Vk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vk(t,e){const n=Uk(e),i=zk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Fk(t,e){zc.set(t._key(),e)}function zk(t){return Si(t._redirectPersistence)}function Uk(t){return Fc(Mk,t.config.apiKey,t.name)}async function Bk(t,e,n=!1){if(Jn(t.app))return Promise.reject(Ai(t));const i=Ss(t),r=Nk(i,e),l=await new jk(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=10*60*1e3;class Hk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$k(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!sE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $k(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e={}){return Mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zk=/^https?/;async function Kk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qk(t);for(const n of e)try{if(Qk(n))return}catch{}Bn(t,"unauthorized-domain")}function Qk(t){const e=yp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Zk.test(n))return!1;if(Gk.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new cu(3e4,6e4);function Wv(){const t=ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Xk(t){return new Promise((e,n)=>{var i,r,o;function l(){Wv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wv(),n(ni(t,"network-request-failed"))},timeout:Yk.get()})}if(!((r=(i=ii().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ii().gapi)===null||o===void 0)&&o.load)l();else{const h=q1("iframefcb");return ii()[h]=()=>{gapi.load?l():n(ni(t,"network-request-failed"))},Ww(`${$1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function Jk(t){return Uc=Uc||Xk(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new cu(5e3,15e3),tb="__/auth/iframe",nb="emulator/auth/iframe",ib={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sb(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wm(e,nb):`https://${t.config.authDomain}/${tb}`,i={apiKey:e.apiKey,appName:t.name,v:ea},r=rb.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${uu(i).slice(1)}`}async function ob(t){const e=await Jk(t),n=ii().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:sb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ib,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=ni(t,"network-request-failed"),h=ii().setTimeout(()=>{o(l)},eb.get());function d(){ii().clearTimeout(h),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lb=500,ub=600,cb="_blank",hb="http://localhost";class Hv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function db(t,e,n,i=lb,r=ub){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},ab),{width:i.toString(),height:r.toString(),top:o,left:l}),g=Ft().toLowerCase();n&&(h=Mw(g)?cb:n),Ow(g)&&(e=e||hb,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(M1(g)&&h!=="_self")return fb(e||"",h),new Hv(null);const x=window.open(e||"",h,y);ce(x,t,"popup-blocked");try{x.focus()}catch{}return new Hv(x)}function fb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="__/auth/handler",mb="emulator/auth/handler",gb=encodeURIComponent("fac");async function $v(t,e,n,i,r,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ea,eventId:r};if(e instanceof $w){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",oA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,x]of Object.entries({}))l[y]=x}if(e instanceof du){const y=e.getScopes().filter(x=>x!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),g=d?`#${gb}=${encodeURIComponent(d)}`:"";return`${_b(t)}?${uu(h).slice(1)}${g}`}function _b({config:t}){return t.emulator?Wm(t,mb):`https://${t.authDomain}/${pb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="webStorageSupport";class vb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zm,this._completeRedirectFn=Bk,this._overrideRedirectResult=Fk}async _openPopup(e,n,i,r){var o;Di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await $v(e,n,i,yp(),r);return db(e,l,Km())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await $v(e,n,i,yp(),r);return wk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Di(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ob(e),i=new Hk(e);return n.register("authEvent",r=>(ce(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hf,{type:hf},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[hf];l!==void 0&&n(!!l),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uw()||Dw()||$m()}}const yb=vb;var qv="@firebase/auth",Gv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Eb(t){Bo(new ms("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ce(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bw(t)},g=new B1(i,r,o,d);return Y1(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Bo(new ms("auth-internal",e=>{const n=Ss(e.getProvider("auth").getImmediate());return(i=>new xb(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(qv,Gv,wb(t)),Tr(qv,Gv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=5*60,Ib=vw("authIdTokenMaxAge")||Tb;let Zv=null;const Pb=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ib)return;const r=n==null?void 0:n.token;Zv!==r&&(Zv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Sb(t=Ew()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q1(t,{popupRedirectResolver:yb,persistence:[bk,Xw,Zm]}),i=vw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Pb(o.toString());mk(n,l,()=>l(n.currentUser)),pk(n,h=>l(h))}}const r=gw("auth");return r&&X1(n,`http://${r}`),n}function Cb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}W1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=ni("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",Cb().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Eb("Browser");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,oE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function S(){}S.prototype=T.prototype,C.D=T.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(N,M,V){for(var R=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)R[Ye-2]=arguments[Ye];return T.prototype[M].apply(N,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,T,S){S||(S=0);var N=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)N[M]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(M=0;16>M;++M)N[M]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=C.g[0],S=C.g[1],M=C.g[2];var V=C.g[3],R=T+(V^S&(M^V))+N[0]+3614090360&4294967295;T=S+(R<<7&4294967295|R>>>25),R=V+(M^T&(S^M))+N[1]+3905402710&4294967295,V=T+(R<<12&4294967295|R>>>20),R=M+(S^V&(T^S))+N[2]+606105819&4294967295,M=V+(R<<17&4294967295|R>>>15),R=S+(T^M&(V^T))+N[3]+3250441966&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(V^S&(M^V))+N[4]+4118548399&4294967295,T=S+(R<<7&4294967295|R>>>25),R=V+(M^T&(S^M))+N[5]+1200080426&4294967295,V=T+(R<<12&4294967295|R>>>20),R=M+(S^V&(T^S))+N[6]+2821735955&4294967295,M=V+(R<<17&4294967295|R>>>15),R=S+(T^M&(V^T))+N[7]+4249261313&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(V^S&(M^V))+N[8]+1770035416&4294967295,T=S+(R<<7&4294967295|R>>>25),R=V+(M^T&(S^M))+N[9]+2336552879&4294967295,V=T+(R<<12&4294967295|R>>>20),R=M+(S^V&(T^S))+N[10]+4294925233&4294967295,M=V+(R<<17&4294967295|R>>>15),R=S+(T^M&(V^T))+N[11]+2304563134&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(V^S&(M^V))+N[12]+1804603682&4294967295,T=S+(R<<7&4294967295|R>>>25),R=V+(M^T&(S^M))+N[13]+4254626195&4294967295,V=T+(R<<12&4294967295|R>>>20),R=M+(S^V&(T^S))+N[14]+2792965006&4294967295,M=V+(R<<17&4294967295|R>>>15),R=S+(T^M&(V^T))+N[15]+1236535329&4294967295,S=M+(R<<22&4294967295|R>>>10),R=T+(M^V&(S^M))+N[1]+4129170786&4294967295,T=S+(R<<5&4294967295|R>>>27),R=V+(S^M&(T^S))+N[6]+3225465664&4294967295,V=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(V^T))+N[11]+643717713&4294967295,M=V+(R<<14&4294967295|R>>>18),R=S+(V^T&(M^V))+N[0]+3921069994&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^V&(S^M))+N[5]+3593408605&4294967295,T=S+(R<<5&4294967295|R>>>27),R=V+(S^M&(T^S))+N[10]+38016083&4294967295,V=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(V^T))+N[15]+3634488961&4294967295,M=V+(R<<14&4294967295|R>>>18),R=S+(V^T&(M^V))+N[4]+3889429448&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^V&(S^M))+N[9]+568446438&4294967295,T=S+(R<<5&4294967295|R>>>27),R=V+(S^M&(T^S))+N[14]+3275163606&4294967295,V=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(V^T))+N[3]+4107603335&4294967295,M=V+(R<<14&4294967295|R>>>18),R=S+(V^T&(M^V))+N[8]+1163531501&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(M^V&(S^M))+N[13]+2850285829&4294967295,T=S+(R<<5&4294967295|R>>>27),R=V+(S^M&(T^S))+N[2]+4243563512&4294967295,V=T+(R<<9&4294967295|R>>>23),R=M+(T^S&(V^T))+N[7]+1735328473&4294967295,M=V+(R<<14&4294967295|R>>>18),R=S+(V^T&(M^V))+N[12]+2368359562&4294967295,S=M+(R<<20&4294967295|R>>>12),R=T+(S^M^V)+N[5]+4294588738&4294967295,T=S+(R<<4&4294967295|R>>>28),R=V+(T^S^M)+N[8]+2272392833&4294967295,V=T+(R<<11&4294967295|R>>>21),R=M+(V^T^S)+N[11]+1839030562&4294967295,M=V+(R<<16&4294967295|R>>>16),R=S+(M^V^T)+N[14]+4259657740&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^V)+N[1]+2763975236&4294967295,T=S+(R<<4&4294967295|R>>>28),R=V+(T^S^M)+N[4]+1272893353&4294967295,V=T+(R<<11&4294967295|R>>>21),R=M+(V^T^S)+N[7]+4139469664&4294967295,M=V+(R<<16&4294967295|R>>>16),R=S+(M^V^T)+N[10]+3200236656&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^V)+N[13]+681279174&4294967295,T=S+(R<<4&4294967295|R>>>28),R=V+(T^S^M)+N[0]+3936430074&4294967295,V=T+(R<<11&4294967295|R>>>21),R=M+(V^T^S)+N[3]+3572445317&4294967295,M=V+(R<<16&4294967295|R>>>16),R=S+(M^V^T)+N[6]+76029189&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(S^M^V)+N[9]+3654602809&4294967295,T=S+(R<<4&4294967295|R>>>28),R=V+(T^S^M)+N[12]+3873151461&4294967295,V=T+(R<<11&4294967295|R>>>21),R=M+(V^T^S)+N[15]+530742520&4294967295,M=V+(R<<16&4294967295|R>>>16),R=S+(M^V^T)+N[2]+3299628645&4294967295,S=M+(R<<23&4294967295|R>>>9),R=T+(M^(S|~V))+N[0]+4096336452&4294967295,T=S+(R<<6&4294967295|R>>>26),R=V+(S^(T|~M))+N[7]+1126891415&4294967295,V=T+(R<<10&4294967295|R>>>22),R=M+(T^(V|~S))+N[14]+2878612391&4294967295,M=V+(R<<15&4294967295|R>>>17),R=S+(V^(M|~T))+N[5]+4237533241&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~V))+N[12]+1700485571&4294967295,T=S+(R<<6&4294967295|R>>>26),R=V+(S^(T|~M))+N[3]+2399980690&4294967295,V=T+(R<<10&4294967295|R>>>22),R=M+(T^(V|~S))+N[10]+4293915773&4294967295,M=V+(R<<15&4294967295|R>>>17),R=S+(V^(M|~T))+N[1]+2240044497&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~V))+N[8]+1873313359&4294967295,T=S+(R<<6&4294967295|R>>>26),R=V+(S^(T|~M))+N[15]+4264355552&4294967295,V=T+(R<<10&4294967295|R>>>22),R=M+(T^(V|~S))+N[6]+2734768916&4294967295,M=V+(R<<15&4294967295|R>>>17),R=S+(V^(M|~T))+N[13]+1309151649&4294967295,S=M+(R<<21&4294967295|R>>>11),R=T+(M^(S|~V))+N[4]+4149444226&4294967295,T=S+(R<<6&4294967295|R>>>26),R=V+(S^(T|~M))+N[11]+3174756917&4294967295,V=T+(R<<10&4294967295|R>>>22),R=M+(T^(V|~S))+N[2]+718787259&4294967295,M=V+(R<<15&4294967295|R>>>17),R=S+(V^(M|~T))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var S=T-this.blockSize,N=this.B,M=this.h,V=0;V<T;){if(M==0)for(;V<=S;)r(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(N[M++]=C.charCodeAt(V++),M==this.blockSize){r(this,N),M=0;break}}else for(;V<T;)if(N[M++]=C[V++],M==this.blockSize){r(this,N),M=0;break}}this.h=M,this.o+=T},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var S=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=S&255,S/=256;for(this.u(C),C=Array(16),T=S=0;4>T;++T)for(var N=0;32>N;N+=8)C[S++]=this.g[T]>>>N&255;return C};function o(C,T){var S=h;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=T(C)}function l(C,T){this.h=T;for(var S=[],N=!0,M=C.length-1;0<=M;M--){var V=C[M]|0;N&&V==T||(S[M]=V,N=!1)}this.g=S}var h={};function d(C){return-128<=C&&128>C?o(C,function(T){return new l([T|0],0>T?-1:0)}):new l([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return x;if(0>C)return U(g(-C));for(var T=[],S=1,N=0;C>=S;N++)T[N]=C/S|0,S*=4294967296;return new l(T,0)}function y(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return U(y(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=g(Math.pow(T,8)),N=x,M=0;M<C.length;M+=8){var V=Math.min(8,C.length-M),R=parseInt(C.substring(M,M+V),T);8>V?(V=g(Math.pow(T,V)),N=N.j(V).add(g(R))):(N=N.j(S),N=N.add(g(R)))}return N}var x=d(0),E=d(1),A=d(16777216);t=l.prototype,t.m=function(){if(j(this))return-U(this).m();for(var C=0,T=1,S=0;S<this.g.length;S++){var N=this.i(S);C+=(0<=N?N:4294967296+N)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(j(this))return"-"+U(this).toString(C);for(var T=g(Math.pow(C,6)),S=this,N="";;){var M=$(S,T).g;S=k(S,M.j(T));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=M,D(S))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function j(C){return C.h==-1}t.l=function(C){return C=k(this,C),j(C)?-1:D(C)?0:1};function U(C){for(var T=C.g.length,S=[],N=0;N<T;N++)S[N]=~C.g[N];return new l(S,~C.h).add(E)}t.abs=function(){return j(this)?U(this):this},t.add=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0,M=0;M<=T;M++){var V=N+(this.i(M)&65535)+(C.i(M)&65535),R=(V>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);N=R>>>16,V&=65535,R&=65535,S[M]=R<<16|V}return new l(S,S[S.length-1]&-2147483648?-1:0)};function k(C,T){return C.add(U(T))}t.j=function(C){if(D(this)||D(C))return x;if(j(this))return j(C)?U(this).j(U(C)):U(U(this).j(C));if(j(C))return U(this.j(U(C)));if(0>this.l(A)&&0>C.l(A))return g(this.m()*C.m());for(var T=this.g.length+C.g.length,S=[],N=0;N<2*T;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<C.g.length;M++){var V=this.i(N)>>>16,R=this.i(N)&65535,Ye=C.i(M)>>>16,ai=C.i(M)&65535;S[2*N+2*M]+=R*ai,P(S,2*N+2*M),S[2*N+2*M+1]+=V*ai,P(S,2*N+2*M+1),S[2*N+2*M+1]+=R*Ye,P(S,2*N+2*M+1),S[2*N+2*M+2]+=V*Ye,P(S,2*N+2*M+2)}for(N=0;N<T;N++)S[N]=S[2*N+1]<<16|S[2*N];for(N=T;N<2*T;N++)S[N]=0;return new l(S,0)};function P(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function O(C,T){this.g=C,this.h=T}function $(C,T){if(D(T))throw Error("division by zero");if(D(C))return new O(x,x);if(j(C))return T=$(U(C),T),new O(U(T.g),U(T.h));if(j(T))return T=$(C,U(T)),new O(U(T.g),T.h);if(30<C.g.length){if(j(C)||j(T))throw Error("slowDivide_ only works with positive integers.");for(var S=E,N=T;0>=N.l(C);)S=Y(S),N=Y(N);var M=J(S,1),V=J(N,1);for(N=J(N,2),S=J(S,2);!D(N);){var R=V.add(N);0>=R.l(C)&&(M=M.add(S),V=R),N=J(N,1),S=J(S,1)}return T=k(C,M.j(T)),new O(M,T)}for(M=x;0<=C.l(T);){for(S=Math.max(1,Math.floor(C.m()/T.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=g(S),R=V.j(T);j(R)||0<R.l(C);)S-=N,V=g(S),R=V.j(T);D(V)&&(V=E),M=M.add(V),C=k(C,R)}return new O(M,C)}t.A=function(C){return $(this,C).h},t.and=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)&C.i(N);return new l(S,this.h&C.h)},t.or=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)|C.i(N);return new l(S,this.h|C.h)},t.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)^C.i(N);return new l(S,this.h^C.h)};function Y(C){for(var T=C.g.length+1,S=[],N=0;N<T;N++)S[N]=C.i(N)<<1|C.i(N-1)>>>31;return new l(S,C.h)}function J(C,T){var S=T>>5;T%=32;for(var N=C.g.length-S,M=[],V=0;V<N;V++)M[V]=0<T?C.i(V+S)>>>T|C.i(V+S+1)<<32-T:C.i(V+S);return new l(M,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=g,l.fromString=y,us=l}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var Ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aE,ol,lE,Bc,Tp,uE,cE,hE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ec=="object"&&Ec];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in v))break e;v=v[F]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var v=0,I=!1,F={next:function(){if(!I&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,v){return u.call.apply(u.bind,arguments)}function x(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function E(u,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:x,E.apply(null,arguments)}function A(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function D(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,F,W){for(var ee=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ee[Re-2]=arguments[Re];return m.prototype[F].apply(I,ee)}}function j(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function U(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(d(I)){const F=u.length||0,W=I.length||0;u.length=F+W;for(let ee=0;ee<W;ee++)u[F+ee]=I[ee]}else u.push(I)}}class k{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function $(u){return $[" "](u),u}$[" "]=function(){};var Y=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function J(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function C(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function T(u){const m={};for(const v in u)m[v]=u[v];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(v in I)u[v]=I[v];for(let W=0;W<S.length;W++)v=S[W],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function M(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function V(u){h.setTimeout(()=>{throw u},0)}function R(){var u=ue;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ye{constructor(){this.h=this.g=null}add(m,v){const I=ai.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ai=new k(()=>new ct,u=>u.reset());class ct{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,q=!1,ue=new Ye,X=()=>{const u=h.Promise.resolve(void 0);zt=()=>{u.then(he)}};var he=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){V(v)}var m=ai;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u}();function ye(u,m){if(Te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Y){e:{try{$(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}D(ye,Te);var pe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),$n=0;function Eu(u,m,v,I,F){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=F,this.key=++$n,this.da=this.fa=!1}function Bi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Wi(u){this.src=u,this.g={},this.h=0}Wi.prototype.add=function(u,m,v,I,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ee=Fr(u,m,I,F);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new Eu(m,this.src,W,!!I,F),m.fa=v,u.push(m)),m};function li(u,m){var v=m.type;if(v in u.g){var I=u.g[v],F=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=F)&&Array.prototype.splice.call(I,F,1),W&&(Bi(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Fr(u,m,v,I){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==I)return F}return-1}var la="closure_lm_"+(1e6*Math.random()|0),bs={};function ua(u,m,v,I,F){if(Array.isArray(m)){for(var W=0;W<m.length;W++)ua(u,m[W],v,I,F);return null}return v=Pu(v),u&&u[ht]?u.K(m,v,g(I)?!!I.capture:!1,F):ca(u,m,v,!1,I,F)}function ca(u,m,v,I,F,W){if(!m)throw Error("Invalid event type");var ee=g(F)?!!F.capture:!!F,Re=Os(u);if(Re||(u[la]=Re=new Wi(u)),v=Re.add(m,v,I,ee,W),v.proxy)return v;if(I=Ns(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Ne||(F=ee),F===void 0&&(F=!1),u.addEventListener(m.toString(),I,F);else if(u.attachEvent)u.attachEvent(Ls(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ns(){function u(v){return m.call(u.src,u.listener,v)}const m=Iu;return u}function Tu(u,m,v,I,F){if(Array.isArray(m))for(var W=0;W<m.length;W++)Tu(u,m[W],v,I,F);else I=g(I)?!!I.capture:!!I,v=Pu(v),u&&u[ht]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=Fr(W,v,I,F),-1<v&&(Bi(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Os(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Fr(m,v,I,F)),(v=-1<u?m[u]:null)&&Rs(v))}function Rs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ht])li(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Ls(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Os(m))?(li(v,u),v.h==0&&(v.src=null,m[la]=null)):Bi(u)}}}function Ls(u){return u in bs?bs[u]:bs[u]="on"+u}function Iu(u,m){if(u.da)u=!0;else{m=new ye(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&Rs(u),u=v.call(I,m)}return u}function Os(u){return u=u[la],u instanceof Wi?u:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(u){return typeof u=="function"?u:(u[ha]||(u[ha]=function(m){return u.handleEvent(m)}),u[ha])}function it(){ve.call(this),this.i=new Wi(this),this.M=this,this.F=null}D(it,ve),it.prototype[ht]=!0,it.prototype.removeEventListener=function(u,m,v,I){Tu(this,u,m,v,I)};function gt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Te(m,u);else if(m instanceof Te)m.target=m.target||u;else{var F=m;m=new Te(I,u),N(m,F)}if(F=!0,v)for(var W=v.length-1;0<=W;W--){var ee=m.g=v[W];F=zr(ee,I,!0,m)&&F}if(ee=m.g=u,F=zr(ee,I,!0,m)&&F,F=zr(ee,I,!1,m)&&F,v)for(W=0;W<v.length;W++)ee=m.g=v[W],F=zr(ee,I,!1,m)&&F}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Bi(v[I]);delete u.g[m],u.h--}}this.F=null},it.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},it.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function zr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,W=0;W<m.length;++W){var ee=m[W];if(ee&&!ee.da&&ee.capture==v){var Re=ee.listener,rt=ee.ha||ee.src;ee.fa&&li(u.i,ee),F=Re.call(rt,I)!==!1&&F}}return F&&!I.defaultPrevented}function Su(u,m,v){if(typeof u=="function")v&&(u=E(u,v));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function da(u){u.g=Su(()=>{u.g=null,u.i&&(u.i=!1,da(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cu extends ve{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(u){ve.call(this),this.h=u,this.g={}}D(Ur,ve);var fa=[];function Ds(u){J(u.g,function(m,v){this.g.hasOwnProperty(v)&&Rs(m)},u),u.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Ds(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ms=h.JSON.stringify,Td=h.JSON.parse,Br=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function pa(){}pa.prototype.h=null;function Au(u){return u.h||(u.h=u.i())}function ma(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function js(){Te.call(this,"d")}D(js,Te);function ga(){Te.call(this,"c")}D(ga,Te);var ui={},ku=null;function Vs(){return ku=ku||new it}ui.La="serverreachability";function bu(u){Te.call(this,ui.La,u)}D(bu,Te);function Wr(u){const m=Vs();gt(m,new bu(m))}ui.STAT_EVENT="statevent";function Fs(u,m){Te.call(this,ui.STAT_EVENT,u),this.stat=m}D(Fs,Te);function Et(u){const m=Vs();gt(m,new Fs(m,u))}ui.Ma="timingevent";function Nu(u,m){Te.call(this,ui.Ma,u),this.size=m}D(Nu,Te);function Hr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function fn(u,m,v,I,F,W){u.info(function(){if(u.g)if(W)for(var ee="",Re=W.split("&"),rt=0;rt<Re.length;rt++){var Ce=Re[rt].split("=");if(1<Ce.length){var Me=Ce[0];Ce=Ce[1];var qe=Me.split("_");ee=2<=qe.length&&qe[1]=="type"?ee+(Me+"="+Ce+"&"):ee+(Me+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+m+`
`+v+`
`+ee})}function se(u,m,v,I,F,W,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+m+`
`+v+`
`+W+" "+ee})}function ci(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Lu(u,v)+(I?" "+I:"")})}function Ru(u,m){u.info(function(){return"TIMEOUT: "+m})}$r.prototype.info=function(){};function Lu(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return Ms(v)}catch{return m}}var qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Us;function An(){}D(An,pa),An.prototype.g=function(){return new XMLHttpRequest},An.prototype.i=function(){return{}},Us=new An;function kn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ou}function Ou(){this.i=null,this.g="",this.h=!1}var Du={},_a={};function va(u,m,v){u.L=1,u.v=mn(Xe(m)),u.m=v,u.P=!0,ya(u,null)}function ya(u,m){u.F=Date.now(),Ws(u),u.A=Xe(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Vu(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Ou,u.g=$u(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Cu(E(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(fa[0]=F.toString()),F=fa);for(var W=0;W<F.length;W++){var ee=ua(v,F[W],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Wr(),fn(u.i,u.u,u.A,u.l,u.R,u.m)}kn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Ut(u)==3?m.j():this.Y(u)},kn.prototype.Y=function(u){try{if(u==this.g)e:{const qe=Ut(this.g);var m=this.g.Ba();const Yi=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Da(this.g)))){this.J||qe!=4||m==7||(m==8||0>=Yi?Wr(3):Wr(2)),xa(this);var v=this.g.Z();this.X=v;t:if(Mu(this)){var I=Da(this.g);u="";var F=I.length,W=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),Gr(this);var ee="";break t}this.h.i=new h.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==F-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,se(this.i,this.u,this.A,this.l,this.R,qe,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,rt=this.g;if((Re=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Re)){var Ce=Re;break t}}Ce=null}if(v=Ce)ci(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,v);else{this.o=!1,this.s=3,Et(12),hi(this),Gr(this);break e}}if(this.P){v=!0;let et;for(;!this.J&&this.C<ee.length;)if(et=Bs(this,ee),et==_a){qe==4&&(this.s=4,Et(14),v=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Du){this.s=4,Et(15),ci(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else ci(this.i,this.l,et,null),Zr(this,et);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||ee.length!=0||this.h.h||(this.s=1,Et(16),v=!1),this.o=this.o&&v,!v)ci(this.i,this.l,ee,"[Invalid Chunked Response]"),hi(this),Gr(this);else if(0<ee.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Xs(Me),Me.M=!0,Et(11))}}else ci(this.i,this.l,ee,null),Zr(this,ee);qe==4&&hi(this),this.o&&!this.J&&(qe==4?ja(this.j,this):(this.o=!1,Ws(this)))}else Id(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),hi(this),Gr(this)}}}catch{}finally{}};function Mu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Bs(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?_a:(v=Number(m.substring(v,I)),isNaN(v)?Du:(I+=1,I+v>m.length?_a:(m=m.slice(I,I+v),u.C=I+v,m)))}kn.prototype.cancel=function(){this.J=!0,hi(this)};function Ws(u){u.S=Date.now()+u.I,ju(u,u.I)}function ju(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Hr(E(u.ba,u),m)}function xa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ru(this.i,this.A),this.L!=2&&(Wr(),Et(17)),hi(this),this.s=2,Gr(this)):ju(this,this.S-u)};function Gr(u){u.j.G==0||u.J||ja(u.j,u)}function hi(u){xa(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ds(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Zr(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ie(v.h,u))){if(!u.K&&Ie(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)eo(v),Qs(v);else break e;Ys(v),Et(18)}}else v.za=F[1],0<v.za-v.T&&37500>F[2]&&v.F&&v.v==0&&!v.C&&(v.C=Hr(E(v.Za,v),6e3));if(1>=$i(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else gi(v,11)}else if((u.K||v.g==u)&&eo(v),!P(m))for(F=v.Da.g.parse(m),m=0;m<F.length;m++){let Ce=F[m];if(v.T=Ce[0],Ce=Ce[1],v.G==2)if(Ce[0]=="c"){v.K=Ce[1],v.ia=Ce[2];const Me=Ce[3];Me!=null&&(v.la=Me,v.j.info("VER="+v.la));const qe=Ce[4];qe!=null&&(v.Aa=qe,v.j.info("SVER="+v.Aa));const Yi=Ce[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(I=1.5*Yi,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const et=u.g;if(et){const no=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var W=I.h;W.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(je(W,W.h),W.h=null))}if(I.D){const Zn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Zn&&(I.ya=Zn,de(I.I,I.D,Zn))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ee=u;if(I.qa=to(I,I.J?I.ia:null,I.W),ee.K){Qr(I.h,ee);var Re=ee,rt=I.L;rt&&(Re.I=rt),Re.B&&(xa(Re),Ws(Re)),I.g=ee}else Rn(I);0<v.i.length&&Qi(v)}else Ce[0]!="stop"&&Ce[0]!="close"||gi(v,7);else v.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?gi(v,7):Ks(v):Ce[0]!="noop"&&v.l&&v.l.ta(Ce),v.v=0)}}Wr(4)}catch{}}var Kr=class{constructor(u,m){this.g=u,this.map=m}};function wa(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ea(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $i(u){return u.h?1:u.g?u.g.size:0}function Ie(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function je(u,m){u.g?u.g.add(m):u.h=m}function Qr(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}wa.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function di(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return j(u.i)}function qi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Ta(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function _e(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ta(u),I=qi(u),F=I.length,W=0;W<F;W++)m.call(void 0,I[W],v&&v[W],u)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ia(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),F=null;if(0<=I){var W=u[v].substring(0,I);F=u[v].substring(I+1)}else W=u[v];m(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function pn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pn){this.h=u.h,Hs(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.s),this.l=u.l;var m=u.i,v=new pi;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),qn(this,v),this.m=u.m}else u&&(m=String(u).match(Be))?(this.h=!1,Hs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),fi(this,m[4]),this.l=bn(m[5]||"",!0),qn(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}pn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Nn(m,Gi,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Nn(m,Gi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Nn(v,v.charAt(0)=="/"?Ca:Sa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Nn(v,Aa)),u.join("")};function Xe(u){return new pn(u)}function Hs(u,m,v){u.j=v?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qn(u,m,v){m instanceof pi?(u.i=m,gn(u.i,u.h)):(v||(m=Nn(m,$s)),u.i=new pi(m,u.h))}function de(u,m,v){u.i.set(m,v)}function mn(u){return de(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Nn(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Pa),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Gi=/[#\/\?@]/g,Sa=/[#\?:]/g,Ca=/[#\?]/g,$s=/[#\?@]/g,Aa=/#/g;function pi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ia(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=pi.prototype,t.add=function(u,m){tn(this),this.i=null,u=ae(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function ka(u,m){tn(u),m=ae(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function qs(u,m){return tn(u),m=ae(u,m),u.g.has(m)}t.forEach=function(u,m){tn(this),this.g.forEach(function(v,I){v.forEach(function(F){u.call(m,F,I,this)},this)},this)},t.na=function(){tn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const F=u[I];for(let W=0;W<F.length;W++)v.push(m[I])}return v},t.V=function(u){tn(this);let m=[];if(typeof u=="string")qs(this,u)&&(m=m.concat(this.g.get(ae(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return tn(this),this.i=null,u=ae(this,u),qs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Vu(u,m,v){ka(u,m),0<v.length&&(u.i=null,u.g.set(ae(u,m),j(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const W=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var F=W;ee[I]!==""&&(F+="="+encodeURIComponent(String(ee[I]))),u.push(F)}}return this.i=u.join("&")};function ae(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function gn(u,m){m&&!u.j&&(tn(u),u.i=null,u.g.forEach(function(v,I){var F=I.toLowerCase();I!=F&&(ka(this,I),Vu(this,F,v))},u)),u.j=m}function De(u,m){const v=new $r;if(h.Image){const I=new Image;I.onload=A(_n,v,"TestLoadImage: loaded",!0,m,I),I.onerror=A(_n,v,"TestLoadImage: error",!1,m,I),I.onabort=A(_n,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=A(_n,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Fu(u,m){const v=new $r,I=new AbortController,F=setTimeout(()=>{I.abort(),_n(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(F),W.ok?_n(v,"TestPingServer: ok",!0,m):_n(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),_n(v,"TestPingServer: error",!1,m)})}function _n(u,m,v,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(v)}catch{}}function ba(){this.g=new Br}function Na(u,m,v){const I=v||"";try{_e(u,function(F,W){let ee=F;g(F)&&(ee=Ms(F)),m.push(I+W+"="+encodeURIComponent(ee))})}catch(F){throw m.push(I+"type="+encodeURIComponent("_badmap")),F}}function vn(u){this.l=u.Ub||null,this.j=u.eb||!1}D(vn,pa),vn.prototype.g=function(){return new Zi(this.l,this.j)},vn.prototype.i=function(u){return function(){return u}}({});function Zi(u,m){it.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Zi,it),t=Zi.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,nn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$e(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nn(this)),this.g&&(this.readyState=3,nn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ki(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ki(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$e(this):nn(this),this.readyState==3&&Ki(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$e(this))},t.Qa=function(u){this.g&&(this.response=u,$e(this))},t.ga=function(){this.g&&$e(this)};function $e(u){u.readyState=4,u.l=null,u.j=null,u.v=null,nn(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function nn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ra(u){let m="";return J(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Gs(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Ra(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):de(u,m,v))}function We(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(We,it);var zu=/^https?$/i,La=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Us.g(),this.v=this.o?Au(this.o):Au(Us),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Uu(this,W);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)v.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())v.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(La,m,void 0))||I||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of v)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Uu(this,W)}};function Uu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Oa(u),Zs(u)}function Oa(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),Zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?we(this):this.bb())},t.bb=function(){we(this)};function we(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ut(u)!=4||u.Z()!=2)){if(u.u&&Ut(u)==4)Su(u.Ea,0,u);else if(gt(u,"readystatechange"),Ut(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ee===0){var F=String(u.D).match(Be)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),I=!zu.test(F?F.toLowerCase():"")}v=I}if(v)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var W=2<Ut(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Oa(u)}}finally{Zs(u)}}}}function Zs(u,m){if(u.g){Gt(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||gt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Gt(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ut(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Td(m)}};function Da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Id(u){const m={};u=(u.g&&2<=Ut(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(P(u[I]))continue;var v=M(u[I]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[F]||[];m[F]=W,W.push(v)}C(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Bu(u){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,u),this.cb=mi("retryDelaySeedMs",1e4,u),this.Wa=mi("forwardChannelMaxRetries",2,u),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new wa(u&&u.concurrentRequestLimit),this.Da=new ba,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bu.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,I){Et(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=to(this,null,this.W),Qi(this)};function Ks(u){if(Wu(u),u.G==3){var m=u.U++,v=Xe(u.I);if(de(v,"SID",u.K),de(v,"RID",m),de(v,"TYPE","terminate"),Yr(u,v),m=new kn(u,u.j,m),m.L=2,m.v=mn(Xe(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=$u(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ws(m)}Hu(u)}function Qs(u){u.g&&(Xs(u),u.g.cancel(),u.g=null)}function Wu(u){Qs(u),u.u&&(h.clearTimeout(u.u),u.u=null),eo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Qi(u){if(!Ea(u.h)&&!u.s){u.s=!0;var m=u.Ga;zt||X(),q||(zt(),q=!0),ue.add(m,u),u.B=0}}function Pd(u,m){return $i(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Hr(E(u.Ga,u,m),Va(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new kn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=T(W),N(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ma(this,F,m),v=Xe(this.I),de(v,"RID",u),de(v,"CVER",22),this.D&&de(v,"X-HTTP-Session-Id",this.D),Yr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Ra(W)))+"&"+m:this.m&&Gs(v,this.m,W)),je(this.h,F),this.Ua&&de(v,"TYPE","init"),this.P?(de(v,"$req",m),de(v,"SID","null"),F.T=!0,va(F,v,null)):va(F,v,m),this.G=2}}else this.G==3&&(u?rn(this,u):this.i.length==0||Ea(this.h)||rn(this))};function rn(u,m){var v;m?v=m.l:v=u.U++;const I=Xe(u.I);de(I,"SID",u.K),de(I,"RID",v),de(I,"AID",u.T),Yr(u,I),u.m&&u.o&&Gs(I,u.m,u.o),v=new kn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ma(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),je(u.h,v),va(v,I,m)}function Yr(u,m){u.H&&J(u.H,function(v,I){de(m,I,v)}),u.l&&_e({},function(v,I){de(m,I,v)})}function Ma(u,m,v){v=Math.min(u.i.length,v);var I=u.l?E(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const ee=["count="+v];W==-1?0<v?(W=F[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let Re=!0;for(let rt=0;rt<v;rt++){let Ce=F[rt].g;const Me=F[rt].map;if(Ce-=W,0>Ce)W=Math.max(0,F[rt].g-100),Re=!1;else try{Na(Me,ee,"req"+Ce+"_")}catch{I&&I(Me)}}if(Re){I=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Rn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;zt||X(),q||(zt(),q=!0),ue.add(m,u),u.v=0}}function Ys(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Hr(E(u.Fa,u),Va(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Js(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Hr(E(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Qs(this),Js(this))};function Xs(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Js(u){u.g=new kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Xe(u.qa);de(m,"RID","rpc"),de(m,"SID",u.K),de(m,"AID",u.T),de(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&de(m,"TO",u.ja),de(m,"TYPE","xmlhttp"),Yr(u,m),u.m&&u.o&&Gs(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=mn(Xe(m)),v.m=null,v.P=!0,ya(v,u)}t.Za=function(){this.C!=null&&(this.C=null,Qs(this),Ys(this),Et(19))};function eo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ja(u,m){var v=null;if(u.g==m){eo(u),Xs(u),u.g=null;var I=2}else if(Ie(u.h,m))v=m.D,Qr(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;I=Vs(),gt(I,new Nu(I,v)),Qi(u)}else Rn(u);else if(F=m.s,F==3||F==0&&0<m.X||!(I==1&&Pd(u,m)||I==2&&Ys(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),F){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function Va(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function gi(u,m){if(u.j.info("Error code "+m),m==2){var v=E(u.fb,u),I=u.Xa;const F=!I;I=new pn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hs(I,"https"),mn(I),F?De(I.toString(),v):Fu(I.toString(),v)}else Et(2);u.G=0,u.l&&u.l.sa(m),Hu(u),Wu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Hu(u){if(u.G=0,u.ka=[],u.l){const m=di(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function to(u,m,v){var I=v instanceof pn?Xe(v):new pn(v);if(I.g!="")m&&(I.g=m+"."+I.g),fi(I,I.s);else{var F=h.location;I=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var W=new pn(null);I&&Hs(W,I),m&&(W.g=m),F&&fi(W,F),v&&(W.l=v),I=W}return v=u.D,m=u.ya,v&&m&&de(I,v,m),de(I,"VER",u.la),Yr(u,I),I}function $u(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new We(new vn({eb:v})):new We(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fa(){}t=Fa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(u,m){return new _t(u,m)};function _t(u,m){it.call(this),this.g=new Bu(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!P(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new yn(this)}D(_t,it),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){Ks(this.g)},_t.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ms(u),u=v);m.i.push(new Kr(m.Ya++,u)),m.G==3&&Qi(m)},_t.prototype.N=function(){this.g.l=null,delete this.j,Ks(this.g),delete this.g,_t.aa.N.call(this)};function Gn(u){js.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}D(Gn,js);function qu(){ga.call(this),this.status=1}D(qu,ga);function yn(u){this.g=u}D(yn,Fa),yn.prototype.ua=function(){gt(this.g,"a")},yn.prototype.ta=function(u){gt(this.g,new Gn(u))},yn.prototype.sa=function(u){gt(this.g,new qu)},yn.prototype.ra=function(){gt(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,hE=function(){return new Xr},cE=function(){return Vs()},uE=ui,Tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Bc=qr,zs.COMPLETE="complete",lE=zs,ma.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",it.prototype.listen=it.prototype.K,ol=ma,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,aE=We}).apply(typeof Ec<"u"?Ec:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Vm("@firebase/firestore");function Xa(){return vs.logLevel}function re(t,...e){if(vs.logLevel<=Se.DEBUG){const n=e.map(Ym);vs.debug(`Firestore (${na}): ${t}`,...n)}}function Mi(t,...e){if(vs.logLevel<=Se.ERROR){const n=e.map(Ym);vs.error(`Firestore (${na}): ${t}`,...n)}}function Wo(t,...e){if(vs.logLevel<=Se.WARN){const n=e.map(Ym);vs.warn(`Firestore (${na}): ${t}`,...n)}}function Ym(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw Mi(e),new Error(e)}function Oe(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ab{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bb{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string"),new dE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Ot(e)}}class Nb{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Rb{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Nb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ob{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new Lb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Db(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function be(t,e){return t<e?-1:t>e?1:0}function Ho(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new pt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new pt(0,0))}static max(){return new me(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(),i===void 0?i=e.length-n:i>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends Gl{construct(e,n,i){return new ze(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const Mb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Gl{construct(e,n,i){return new St(e,n,i)}static isValidIdentifier(e){return Mb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(ze.fromString(e))}static fromName(e){return new oe(ze.fromString(e).popFirst(5))}static empty(){return new oe(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new ze(e.slice()))}}function jb(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=me.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new Ar(r,oe.empty(),e)}function Vb(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ar(me.min(),oe.empty(),-1)}static max(){return new Ar(me.max(),oe.empty(),-1)}}function Fb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ub{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==zb)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&n()},d=>i(d))}),l=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const g=d;n(e[g]).next(y=>{l[g]=y,++h,h===o&&i(l)},y=>r(y))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function Bb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xm.oe=-1;function nd(t){return t==null}function Ph(t){return t===0&&1/t==-1/0}function Wb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=r??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Pt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Pt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new an([])}unionWith(e){let n=new At(St.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mE("Invalid base64 string: "+o):o}}(e);return new bt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const Hb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=Hb.exec(t);if(Oe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eg(t){const e=t.mapValue.fields.__previous_value__;return Jm(e)?eg(e):e}function Zl(t){const e=kr(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,i,r,o,l,h,d,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=g}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={mapValue:{}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jm(t)?4:Gb(t)?9007199254740991:qb(t)?10:11:fe()}function oi(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=kr(r.timestampValue),h=kr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ys(r.bytesValue).isEqual(ys(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return tt(r.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(r.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return tt(r.integerValue)===tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=tt(r.doubleValue),h=tt(o.doubleValue);return l===h?Ph(l)===Ph(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Ho(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Yv(l)!==Yv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!oi(l[d],h[d])))return!1;return!0}(t,e);default:return fe()}}function Ql(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function $o(t,e){if(t===e)return 0;const n=xs(t),i=xs(e);if(n!==i)return be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Jv(t.timestampValue,e.timestampValue);case 4:return Jv(Zl(t),Zl(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(o,l){const h=ys(o),d=ys(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let g=0;g<h.length&&g<d.length;g++){const y=be(h[g],d[g]);if(y!==0)return y}return be(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=be(tt(o.latitude),tt(l.latitude));return h!==0?h:be(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ey(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,g,y;const x=o.fields||{},E=l.fields||{},A=(h=x.value)===null||h===void 0?void 0:h.arrayValue,D=(d=E.value)===null||d===void 0?void 0:d.arrayValue,j=be(((g=A==null?void 0:A.values)===null||g===void 0?void 0:g.length)||0,((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0);return j!==0?j:ey(A,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Ic.mapValue&&l===Ic.mapValue)return 0;if(o===Ic.mapValue)return 1;if(l===Ic.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),g=l.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let x=0;x<d.length&&x<y.length;++x){const E=be(d[x],y[x]);if(E!==0)return E;const A=$o(h[d[x]],g[y[x]]);if(A!==0)return A}return be(d.length,y.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=kr(t),i=kr(e),r=be(n.seconds,i.seconds);return r!==0?r:be(n.nanos,i.nanos)}function ey(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=$o(n[r],i[r]);if(o)return o}return be(n.length,i.length)}function qo(t){return Ip(t)}function Ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=kr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Ip(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Ip(n.fields[l])}`;return r+"}"}(t.mapValue):fe()}function ty(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pp(t){return!!t&&"integerValue"in t}function tg(t){return!!t&&"arrayValue"in t}function ny(t){return!!t&&"nullValue"in t}function iy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wc(t){return!!t&&"mapValue"in t}function qb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Gb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=St.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=xl(l):r.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Wc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Cs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Qt(xl(this.value))}}function gE(t){const e=[];return Cs(t.fields,(n,i)=>{const r=new St([n]);if(Wc(i)){const o=gE(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,r,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new Mt(e,1,n,me.min(),i,r,0)}static newNoDocument(e,n){return new Mt(e,2,n,me.min(),me.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,me.min(),me.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.position=e,this.inclusive=n}}function ry(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=$o(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function sy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Zb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{}class lt extends _E{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Qb(e,n,i):n==="array-contains"?new Jb(e,i):n==="in"?new eN(e,i):n==="not-in"?new tN(e,i):n==="array-contains-any"?new nN(e,i):new lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Yb(e,i):new Xb(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($o(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends _E{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return vE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vE(t){return t.op==="and"}function yE(t){return Kb(t)&&vE(t)}function Kb(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Sp(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(yE(t))return t.filters.map(e=>Sp(e)).join(",");{const e=t.filters.map(n=>Sp(n)).join(",");return`${t.op}(${e})`}}function xE(t,e){return t instanceof lt?function(i,r){return r instanceof lt&&i.op===r.op&&i.field.isEqual(r.field)&&oi(i.value,r.value)}(t,e):t instanceof Wn?function(i,r){return r instanceof Wn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,h)=>o&&xE(l,r.filters[h]),!0):!1}(t,e):void fe()}function wE(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(wE).join(" ,")+"}"}(t):"Filter"}class Qb extends lt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yb extends lt{constructor(e,n){super(e,"in",n),this.keys=EE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xb extends lt{constructor(e,n){super(e,"not-in",n),this.keys=EE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class Jb extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tg(n)&&Ql(n.arrayValue,this.value)}}class eN extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class tN extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class nN extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function oy(t,e=null,n=[],i=[],r=null,o=null,l=null){return new iN(t,e,n,i,r,o,l)}function ng(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Sp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qo(i)).join(",")),e.ue=n}return e.ue}function ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Zb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sy(t.startAt,e.startAt)&&sy(t.endAt,e.endAt)}function Cp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n=null,i=[],r=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rN(t,e,n,i,r,o,l,h){return new ia(t,e,n,i,r,o,l,h)}function id(t){return new ia(t)}function ay(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TE(t){return t.collectionGroup!==null}function wl(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new At(St.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Yl(o,i))}),n.has(St.keyField().canonicalString())||e.ce.push(new Yl(St.keyField(),i))}return e.ce}function ri(t){const e=ge(t);return e.le||(e.le=sN(e,wl(t))),e.le}function sN(t,e){if(t.limitType==="F")return oy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Yl(r.field,o)});const n=t.endAt?new Sh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Sh(t.startAt.position,t.startAt.inclusive):null;return oy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ap(t,e){const n=t.filters.concat([e]);return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kp(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rd(t,e){return ig(ri(t),ri(e))&&t.limitType===e.limitType}function IE(t){return`${ng(ri(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>wE(r)).join(", ")}]`),nd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>qo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>qo(r)).join(",")),`Target(${i})`}(ri(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of wl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,h,d){const g=ry(l,h,d);return l.inclusive?g<=0:g<0}(i.startAt,wl(i),r)||i.endAt&&!function(l,h,d){const g=ry(l,h,d);return l.inclusive?g>=0:g>0}(i.endAt,wl(i),r))}(t,e)}function oN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PE(t){return(e,n)=>{let i=!1;for(const r of wl(t)){const o=aN(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function aN(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),g=h.data.field(o);return d!==null&&g!==null?$o(d,g):fe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return pE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new Qe(oe.comparator);function ji(){return lN}const SE=new Qe(oe.comparator);function al(...t){let e=SE;for(const n of t)e=e.insert(n.key,n);return e}function CE(t){let e=SE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ss(){return El()}function AE(){return El()}function El(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const uN=new Qe(oe.comparator),cN=new At(oe.comparator);function Pe(...t){let e=cN;for(const n of t)e=e.add(n);return e}const hN=new At(be);function dN(){return hN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function kE(t){return{integerValue:""+t}}function fN(t,e){return Wb(e)?kE(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function pN(t,e,n){return t instanceof Xl?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Jm(o)&&(o=eg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Jl?NE(t,e):t instanceof eu?RE(t,e):function(r,o){const l=bE(r,o),h=ly(l)+ly(r.Pe);return Pp(l)&&Pp(r.Pe)?kE(h):rg(r.serializer,h)}(t,e)}function mN(t,e,n){return t instanceof Jl?NE(t,e):t instanceof eu?RE(t,e):n}function bE(t,e){return t instanceof Ch?function(i){return Pp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Xl extends od{}class Jl extends od{constructor(e){super(),this.elements=e}}function NE(t,e){const n=LE(e);for(const i of t.elements)n.some(r=>oi(r,i))||n.push(i);return{arrayValue:{values:n}}}class eu extends od{constructor(e){super(),this.elements=e}}function RE(t,e){let n=LE(e);for(const i of t.elements)n=n.filter(r=>!oi(r,i));return{arrayValue:{values:n}}}class Ch extends od{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ly(t){return tt(t.integerValue||t.doubleValue)}function LE(t){return tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.field=e,this.transform=n}}function _N(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Jl&&r instanceof Jl||i instanceof eu&&r instanceof eu?Ho(i.elements,r.elements,oi):i instanceof Ch&&r instanceof Ch?oi(i.Pe,r.Pe):i instanceof Xl&&r instanceof Xl}(t.transform,e.transform)}class vN{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ad{}function OE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ME(t.key,Fn.none()):new gu(t.key,t.data,Fn.none());{const n=t.data,i=Qt.empty();let r=new At(St.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new jr(t.key,i,new an(r.toArray()),Fn.none())}}function yN(t,e,n){t instanceof gu?function(r,o,l){const h=r.value.clone(),d=cy(r.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof jr?function(r,o,l){if(!Hc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=cy(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(DE(r)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,i){return t instanceof gu?function(o,l,h,d){if(!Hc(o.precondition,l))return h;const g=o.value.clone(),y=hy(o.fieldTransforms,d,l);return g.setAll(y),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),null}(t,e,n,i):t instanceof jr?function(o,l,h,d){if(!Hc(o.precondition,l))return h;const g=hy(o.fieldTransforms,d,l),y=l.data;return y.setAll(DE(o)),y.setAll(g),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,i):function(o,l,h){return Hc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function xN(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=bE(i.transform,r||null);o!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,o))}return n||null}function uy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ho(i,r,(o,l)=>_N(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gu extends ad{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jr extends ad{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function DE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function cy(t,e,n){const i=new Map;Oe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,mN(l,h,n[r]))}return i}function hy(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,pN(o,l,e))}return i}class ME extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wN extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&yN(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AE();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(r.key)?null:h;const d=OE(l,h);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,i)=>uy(n,i))&&Ho(this.baseMutations,e.baseMutations,(n,i)=>uy(n,i))}}class sg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Oe(e.mutations.length===i.length);let r=function(){return uN}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new sg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Ae;function PN(t){switch(t){default:return fe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function jE(t){if(t===void 0)return Mi("GRPC error has no .code"),G.UNKNOWN;switch(t){case ot.OK:return G.OK;case ot.CANCELLED:return G.CANCELLED;case ot.UNKNOWN:return G.UNKNOWN;case ot.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ot.INTERNAL:return G.INTERNAL;case ot.UNAVAILABLE:return G.UNAVAILABLE;case ot.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ot.NOT_FOUND:return G.NOT_FOUND;case ot.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ot.ABORTED:return G.ABORTED;case ot.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ot.DATA_LOSS:return G.DATA_LOSS;default:return fe()}}(Ae=ot||(ot={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new us([4294967295,4294967295],0);function dy(t){const e=SN().encode(t),n=new oE;return n.update(e),new Uint8Array(n.digest())}function fy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new us([n,i],0),new us([r,o],0)]}class og{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ll(`Invalid padding: ${n}`);if(i<0)throw new ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ll(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(us.fromNumber(i)));return r.compare(CN)===1&&(r=new us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dy(e),[i,r]=fy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new og(o,r,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=dy(e),[i,r]=fy(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,r,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ld(me.min(),r,new Qe(be),ji(),Pe())}}class _u{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _u(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class VE{constructor(e,n){this.targetId=e,this.me=n}}class FE{constructor(e,n,i=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class py{constructor(){this.fe=0,this.ge=gy(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),i=Pe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:fe()}}),new _u(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=gy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AN{constructor(e){this.Le=e,this.Be=new Map,this.ke=ji(),this.qe=my(),this.Qe=new Qe(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Cp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Mt.newNoDocument(l,me.min()))}else Oe(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const g=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,h;try{l=ys(i).toUint8Array()}catch(d){if(d instanceof mE)return Wo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new og(l,r,o)}catch(d){return Wo(d instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&Cp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Mt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Pe();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const g=this.Je(d);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const r=new ld(e,n,this.Qe,this.ke,i);return this.ke=ji(),this.qe=my(),this.Qe=new Qe(be),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new py,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new py),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function my(){return new Qe(oe.comparator)}function gy(){return new Qe(oe.comparator)}const kN={asc:"ASCENDING",desc:"DESCENDING"},bN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NN={and:"AND",or:"OR"};class RN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||nd(e)?e:{value:e}}function Ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LN(t,e){return Ah(t,e.toTimestamp())}function si(t){return Oe(!!t),me.fromTimestamp(function(n){const i=kr(n);return new pt(i.seconds,i.nanos)}(t))}function ag(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(r){return new ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UE(t){const e=ze.fromString(t);return Oe(qE(e)),e}function Rp(t,e){return ag(t.databaseId,e.path)}function df(t,e){const n=UE(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(WE(n))}function BE(t,e){return ag(t.databaseId,e)}function ON(t){const e=UE(t);return e.length===4?ze.emptyPath():WE(e)}function Lp(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WE(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _y(t,e,n){return{name:Rp(t,e),fields:n.value.mapValue.fields}}function DN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(g,y){return g.useProto3Json?(Oe(y===void 0||typeof y=="string"),bt.fromBase64String(y||"")):(Oe(y===void 0||y instanceof Buffer||y instanceof Uint8Array),bt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const y=g.code===void 0?G.UNKNOWN:jE(g.code);return new ne(y,g.message||"")}(l);n=new FE(i,r,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=df(t,i.document.name),o=si(i.document.updateTime),l=i.document.createTime?si(i.document.createTime):me.min(),h=new Qt({mapValue:{fields:i.document.fields}}),d=Mt.newFoundDocument(r,o,l,h),g=i.targetIds||[],y=i.removedTargetIds||[];n=new $c(g,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=df(t,i.document),o=i.readTime?si(i.readTime):me.min(),l=Mt.newNoDocument(r,o),h=i.removedTargetIds||[];n=new $c([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=df(t,i.document),o=i.removedTargetIds||[];n=new $c([],o,r,null)}else{if(!("filter"in e))return fe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new IN(r,o),h=i.targetId;n=new VE(h,l)}}return n}function MN(t,e){let n;if(e instanceof gu)n={update:_y(t,e.key,e.value)};else if(e instanceof ME)n={delete:Rp(t,e.key)};else if(e instanceof jr)n={update:_y(t,e.key,e.data),updateMask:$N(e.fieldMask)};else{if(!(e instanceof wN))return fe();n={verify:Rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ch)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw fe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:LN(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function jN(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?si(r.updateTime):si(o);return l.isEqual(me.min())&&(l=si(o)),new vN(l,r.transformResults||[])}(n,e))):[]}function VN(t,e){return{documents:[BE(t,e.path)]}}function FN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=BE(t,r);const o=function(g){if(g.length!==0)return $E(Wn.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(g){if(g.length!==0)return g.map(y=>function(E){return{field:uo(E.field),direction:BN(E.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=bp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{_t:n,parent:r}}function zN(t){let e=ON(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Oe(i===1);const y=n.from[0];y.allDescendants?r=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(x){const E=HE(x);return E instanceof Wn&&yE(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(x){return x.map(E=>function(D){return new Yl(co(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(x){let E;return E=typeof x=="object"?x.value:x,nd(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(x){const E=!!x.before,A=x.values||[];return new Sh(A,E)}(n.startAt));let g=null;return n.endAt&&(g=function(x){const E=!x.before,A=x.values||[];return new Sh(A,E)}(n.endAt)),rN(e,r,l,o,h,"F",d,g)}function UN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=co(n.unaryFilter.field);return lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=co(n.unaryFilter.field);return lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=co(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=co(n.unaryFilter.field);return lt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(co(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(i=>HE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function BN(t){return kN[t]}function WN(t){return bN[t]}function HN(t){return NN[t]}function uo(t){return{fieldPath:t.canonicalString()}}function co(t){return St.fromServerFormat(t.fieldPath)}function $E(t){return t instanceof lt?function(n){if(n.op==="=="){if(iy(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(ny(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iy(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(ny(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:WN(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const i=n.getFilters().map(r=>$E(r));return i.length===1?i[0]:{compositeFilter:{op:HN(n.op),filters:i}}}(t):fe()}function $N(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,i,r,o=me.min(),l=me.min(),h=bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.ct=e}}function GN(t){const e=zN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.un=new KN}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ar.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class KN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new At(ze.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new At(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Go(0)}static kn(){return new Go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Tl(i.mutation,r,an.empty(),pt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=al();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,r){let o=ji();const l=El(),h=function(){return El()}();return n.forEach((d,g)=>{const y=i.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof jr)?o=o.insert(g.key,g):y!==void 0?(l.set(g.key,y.mutation.getFieldMask()),Tl(y.mutation,g,y.mutation.getFieldMask(),pt.now())):l.set(g.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((g,y)=>l.set(g,y)),n.forEach((g,y)=>{var x;return h.set(g,new YN(y,(x=l.get(g))!==null&&x!==void 0?x:null))}),h))}recalculateAndSaveOverlays(e,n){const i=El();let r=new Qe((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const g=n.get(d);if(g===null)return;let y=i.get(d)||an.empty();y=h.applyToLocalView(g,y),i.set(d,y);const x=(r.get(h.batchId)||Pe()).add(d);r=r.insert(h.batchId,x)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),g=d.key,y=d.value,x=AE();y.forEach(E=>{if(!o.has(E)){const A=OE(n.get(E),i.get(E));A!==null&&x.set(E,A),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,g,x))}return K.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(ss());let h=-1,d=o;return l.next(g=>K.forEach(g,(y,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),o.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{d=d.insert(y,E)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,d,g,Pe())).next(y=>({batchId:h,changes:CE(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=al();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=al();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const g=function(x,E){return new ia(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,i,r).next(y=>{y.forEach((x,E)=>{l=l.insert(x,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((d,g)=>{const y=g.getKey();l.get(y)===null&&(l=l.insert(y,Mt.newInvalidDocument(y)))});let h=al();return l.forEach((d,g)=>{const y=o.get(d);y!==void 0&&Tl(y.mutation,g,an.empty(),pt.now()),sd(n,g)&&(h=h.insert(d,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:si(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:GN(r.bundledQuery),readTime:si(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.overlays=new Qe(oe.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ss();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=ss(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,g=d.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Qe((g,y)=>g-y);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let y=o.get(g.largestBatchId);y===null&&(y=ss(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=ss(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,y)=>h.set(g,y)),!(h.size()>=r)););return K.resolve(h)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new TN(n,i));let o=this.Ir.get(n);o===void 0&&(o=Pe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Tr=new At(yt.Er),this.dr=new At(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new yt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new ze([])),i=new yt(n,e),r=new yt(n,e+1),o=[];return this.dr.forEachInRange([i,r],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new ze([])),i=new yt(n,e),r=new yt(n,e+1);let o=Pe();return this.dr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new yt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(yt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new EN(o,n,i,r);this.mutationQueue.push(l);for(const h of r)this.br=this.br.add(new yt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new yt(n,0),r=new yt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],l=>{const h=this.Dr(l.wr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(be);return n.forEach(r=>{const o=new yt(r,0),l=new yt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),K.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new yt(new oe(o),0);let h=new At(be);return this.br.forEachWhile(d=>{const g=d.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(h=h.add(d.wr)),!0)},l),K.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return K.forEach(n.mutations,r=>{const o=new yt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new yt(n,0),r=this.br.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.Mr=e,this.docs=function(){return new Qe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=ji();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Mt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ji();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:g,value:{document:y}}=d.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||Fb(Vb(y),i)<=0||(r.has(y.key)||sd(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){fe()}Or(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new rR(this)}getSize(e){return K.resolve(this.size)}}class rR extends QN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.persistence=e,this.Nr=new ra(n=>ng(n),ig),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lg,this.targetCount=0,this.kr=Go.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xm(0),this.Kr=!1,this.Kr=!0,this.$r=new tR,this.referenceDelegate=e(this),this.Ur=new sR(this),this.indexManager=new ZN,this.remoteDocumentCache=function(r){return new iR(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new qN(n),this.Gr=new JN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new nR(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new aR(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return K.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class aR extends Ub{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Jr=new lg,this.Yr=null}static Zr(e){return new ug(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Pe(),r=Pe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new cg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eA()?8:Bb(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new lR;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Xa()<=Se.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Xa()<=Se.DEBUG&&re("QueryEngine","Query:",lo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Xa()<=Se.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):K.resolve())}Yi(e,n){if(ay(n))return K.resolve(null);let i=ri(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kp(n,null,"F"),i=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Pe(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const g=this.ts(n,h);return this.ns(n,g,l,d.readTime)?this.Yi(e,kp(n,null,"F")):this.rs(e,g,n,d)}))})))}Zi(e,n,i,r){return ay(n)||r.isEqual(me.min())?K.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,r)?K.resolve(null):(Xa()<=Se.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lo(n)),this.rs(e,l,n,jb(r,-1)).next(h=>h))})}ts(e,n){let i=new At(PE(e));return n.forEach((r,o)=>{sd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Xa()<=Se.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",lo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Qe(be),this._s=new ra(o=>ng(o),ig),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function hR(t,e,n,i){return new cR(t,e,n,i)}async function GE(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Pe();for(const g of r){l.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(g=>({hs:g,removedBatchIds:l,addedBatchIds:h}))})})}function dR(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,g,y){const x=g.batch,E=x.keys();let A=K.resolve();return E.forEach(D=>{A=A.next(()=>y.getEntry(d,D)).next(j=>{const U=g.docVersions.get(D);Oe(U!==null),j.version.compareTo(U)<0&&(x.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,x))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Pe();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(d=d.add(h.batch.mutations[g].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ZE(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function fR(t,e){const n=ge(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const h=[];e.targetChanges.forEach((y,x)=>{const E=r.get(x);if(!E)return;h.push(n.Ur.removeMatchingKeys(o,y.removedDocuments,x).next(()=>n.Ur.addMatchingKeys(o,y.addedDocuments,x)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?A=A.withResumeToken(bt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),r=r.insert(x,A),function(j,U,k){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(E,A,y)&&h.push(n.Ur.updateTargetData(o,A))});let d=ji(),g=Pe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(pR(o,l,e.documentUpdates).next(y=>{d=y.Ps,g=y.Is})),!i.isEqual(me.min())){const y=n.Ur.getLastRemoteSnapshotVersion(o).next(x=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,g)).next(()=>d)}).then(o=>(n.os=r,o))}function pR(t,e,n){let i=Pe(),r=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=ji();return n.forEach((h,d)=>{const g=o.get(h);d.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),d.isNoDocument()&&d.version.isEqual(me.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||d.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",d.version)}),{Ps:l,Is:r}})}function mR(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function gR(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Ur.allocateTargetId(i).next(l=>(r=new dr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Op(t,e,n){const i=ge(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!mu(l))throw l;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function vy(t,e,n){const i=ge(t);let r=me.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,g,y){const x=ge(d),E=x._s.get(y);return E!==void 0?K.resolve(x.os.get(E)):x.Ur.getTargetData(g,y)}(i,l,ri(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?r:me.min(),n?o:Pe())).next(h=>(_R(i,oN(e),h),{documents:h,Ts:o})))}function _R(t,e,n){let i=t.us.get(e)||me.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class yy{constructor(){this.activeTargetIds=dN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vR{constructor(){this.so=new yy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc=null;function ff(){return Pc===null?Pc=function(){return 268435456+Math.round(2147483648*Math.random())}():Pc++,"0x"+Pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class ER extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,l){const h=ff(),d=this.xo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${h}:`,d,r);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,o,l),this.No(n,d,g,r).then(y=>(re("RestConnection",`Received RPC '${n}' ${h}: `,y),y),y=>{throw Wo("RestConnection",`RPC '${n}' ${h} failed with error: `,y,"url: ",d,"request:",r),y})}Lo(n,i,r,o,l,h){return this.Mo(n,i,r,o,l)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),r&&r.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const r=xR[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=ff();return new Promise((l,h)=>{const d=new aE;d.setWithCredentials(!0),d.listenOnce(lE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bc.NO_ERROR:const y=d.getResponseJson();re(Lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case Bc.TIMEOUT:re(Lt,`RPC '${e}' ${o} timed out`),h(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const x=d.getStatus();if(re(Lt,`RPC '${e}' ${o} failed with status:`,x,"response text:",d.getResponseText()),x>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const D=function(U){const k=U.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(k)>=0?k:G.UNKNOWN}(A.status);h(new ne(D,A.message))}else h(new ne(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ne(G.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{re(Lt,`RPC '${e}' ${o} completed.`)}});const g=JSON.stringify(r);re(Lt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",g,i,15)})}Bo(e,n,i){const r=ff(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=hE(),h=cE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=o.join("");re(Lt,`Creating RPC '${e}' stream ${r}: ${y}`,d);const x=l.createWebChannel(y,d);let E=!1,A=!1;const D=new wR({Io:U=>{A?re(Lt,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(E||(re(Lt,`Opening RPC '${e}' stream ${r} transport.`),x.open(),E=!0),re(Lt,`RPC '${e}' stream ${r} sending:`,U),x.send(U))},To:()=>x.close()}),j=(U,k,P)=>{U.listen(k,O=>{try{P(O)}catch($){setTimeout(()=>{throw $},0)}})};return j(x,ol.EventType.OPEN,()=>{A||(re(Lt,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),j(x,ol.EventType.CLOSE,()=>{A||(A=!0,re(Lt,`RPC '${e}' stream ${r} transport closed`),D.So())}),j(x,ol.EventType.ERROR,U=>{A||(A=!0,Wo(Lt,`RPC '${e}' stream ${r} transport errored:`,U),D.So(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),j(x,ol.EventType.MESSAGE,U=>{var k;if(!A){const P=U.data[0];Oe(!!P);const O=P,$=O.error||((k=O[0])===null||k===void 0?void 0:k.error);if($){re(Lt,`RPC '${e}' stream ${r} received error:`,$);const Y=$.status;let J=function(S){const N=ot[S];if(N!==void 0)return jE(N)}(Y),C=$.message;J===void 0&&(J=G.INTERNAL,C="Unknown error status: "+Y+" with message "+$.message),A=!0,D.So(new ne(J,C)),x.close()}else re(Lt,`RPC '${e}' stream ${r} received:`,P),D.bo(P)}}),j(h,uE.STAT_EVENT,U=>{U.stat===Tp.PROXY?re(Lt,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Tp.NOPROXY&&re(Lt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){return new RN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,i,r,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ne(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TR extends QE{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=DN(this.serializer,e),i=function(o){if(!("targetChange"in o))return me.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?me.min():l.readTime?si(l.readTime):me.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Cp(d)?{documents:VN(o,d)}:{query:FN(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=zE(o,l.resumeToken);const g=bp(o,l.expectedCount);g!==null&&(h.expectedCount=g)}else if(l.snapshotVersion.compareTo(me.min())>0){h.readTime=Ah(o,l.snapshotVersion.toTimestamp());const g=bp(o,l.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const i=UN(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.a_(n)}}class IR extends QE{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=jN(e.writeResults,e.commitTime),i=si(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Lp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>MN(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Np(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Np(n,i),r,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mi(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{As(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const g=ge(d);g.L_.add(4),await vu(g),g.q_.set("Unknown"),g.L_.delete(4),await cd(g)}(this))})}),this.q_=new SR(i,r)}}async function cd(t){if(As(t))for(const e of t.B_)await e(!0)}async function vu(t){for(const e of t.B_)await e(!1)}function YE(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pg(n)?fg(n):sa(n).r_()&&dg(n,e))}function hg(t,e){const n=ge(t),i=sa(n);n.N_.delete(e),i.r_()&&XE(n,e),n.N_.size===0&&(i.r_()?i.o_():As(n)&&n.q_.set("Unknown"))}function dg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).A_(e)}function XE(t,e){t.Q_.xe(e),sa(t).R_(e)}function fg(t){t.Q_=new AN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.q_.v_()}function pg(t){return As(t)&&!sa(t).n_()&&t.N_.size>0}function As(t){return ge(t).L_.size===0}function JE(t){t.Q_=void 0}async function AR(t){t.q_.set("Online")}async function kR(t){t.N_.forEach((e,n)=>{dg(t,e)})}async function bR(t,e){JE(t),pg(t)?(t.q_.M_(e),fg(t)):t.q_.set("Unknown")}async function NR(t,e,n){if(t.q_.set("Online"),e instanceof FE&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const h of o.targetIds)r.N_.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.N_.delete(h),r.Q_.removeTarget(h))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kh(t,i)}else if(e instanceof $c?t.Q_.Ke(e):e instanceof VE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const i=await ZE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.N_.get(g);y&&o.N_.set(g,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,g)=>{const y=o.N_.get(d);if(!y)return;o.N_.set(d,y.withResumeToken(bt.EMPTY_BYTE_STRING,y.snapshotVersion)),XE(o,d);const x=new dr(y.target,d,g,y.sequenceNumber);dg(o,x)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await kh(t,i)}}async function kh(t,e,n){if(!mu(e))throw e;t.L_.add(1),await vu(t),t.q_.set("Offline"),n||(n=()=>ZE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await cd(t)})}function eT(t,e){return e().catch(n=>kh(t,n,e))}async function hd(t){const e=ge(t),n=br(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;RR(e);)try{const r=await mR(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,LR(e,r)}catch(r){await kh(e,r)}tT(e)&&nT(e)}function RR(t){return As(t)&&t.O_.length<10}function LR(t,e){t.O_.push(e);const n=br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tT(t){return As(t)&&!br(t).n_()&&t.O_.length>0}function nT(t){br(t).start()}async function OR(t){br(t).p_()}async function DR(t){const e=br(t);for(const n of t.O_)e.m_(n.mutations)}async function MR(t,e,n){const i=t.O_.shift(),r=sg.from(i,e,n);await eT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await hd(t)}async function jR(t,e){e&&br(t).V_&&await async function(i,r){if(function(l){return PN(l)&&l!==G.ABORTED}(r.code)){const o=i.O_.shift();br(i).s_(),await eT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await hd(i)}}(t,e),tT(t)&&nT(t)}async function wy(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=As(n);n.L_.add(3),await vu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await cd(n)}async function VR(t,e){const n=ge(t);e?(n.L_.delete(2),await cd(n)):e||(n.L_.add(2),await vu(n),n.q_.set("Unknown"))}function sa(t){return t.K_||(t.K_=function(n,i,r){const o=ge(n);return o.w_(),new TR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:AR.bind(null,t),Ro:kR.bind(null,t),mo:bR.bind(null,t),d_:NR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pg(t)?fg(t):t.q_.set("Unknown")):(await t.K_.stop(),JE(t))})),t.K_}function br(t){return t.U_||(t.U_=function(n,i,r){const o=ge(n);return o.w_(),new IR(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:OR.bind(null,t),mo:jR.bind(null,t),f_:DR.bind(null,t),g_:MR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hd(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,h=new mg(e,n,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(t,e){if(Mi("AsyncQueue",`${e}: ${t}`),mu(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=al(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Oo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.W_=new Qe(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Zo{constructor(e,n,i,r,o,l,h,d,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Zo(e,n,Oo.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zR{constructor(){this.queries=Ty(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ge(n),o=r.queries;r.queries=Ty(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Ty(){return new ra(t=>IE(t),rd)}async function iT(t,e){const n=ge(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new FR,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=gg(l,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(h)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&_g(n)}async function rT(t,e){const n=ge(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function UR(t,e){const n=ge(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(r)&&(i=!0);l.z_=r}}i&&_g(n)}function BR(t,e,n){const i=ge(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function _g(t){t.Y_.forEach(e=>{e.next()})}var Dp,Iy;(Iy=Dp||(Dp={})).ea="default",Iy.Cache="cache";class sT{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.key=e}}class aT{constructor(e){this.key=e}}class WR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=PE(e),this.Ra=new Oo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Ey,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((y,x)=>{const E=r.get(y),A=sd(this.query,x)?x:null,D=!!E&&this.mutatedKeys.has(E.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let U=!1;E&&A?E.data.isEqual(A.data)?D!==j&&(i.track({type:3,doc:A}),U=!0):this.ga(E,A)||(i.track({type:2,doc:A}),U=!0,(d&&this.Aa(A,d)>0||g&&this.Aa(A,g)<0)&&(h=!0)):!E&&A?(i.track({type:0,doc:A}),U=!0):E&&!A&&(i.track({type:1,doc:E}),U=!0,(d||g)&&(h=!0)),U&&(A?(l=l.add(A),o=j?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((y,x)=>function(A,D){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return j(A)-j(D)}(y.type,x.type)||this.Aa(y.doc,x.doc)),this.pa(i),r=r!=null&&r;const h=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,g=d!==this.Ea;return this.Ea=d,l.length!==0||g?{snapshot:new Zo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ey,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new aT(i))}),this.da.forEach(i=>{e.has(i)||n.push(new oT(i))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HR{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class $R{constructor(e){this.key=e,this.va=!1}}class qR{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new ra(h=>IE(h),rd),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(oe.comparator),this.Na=new Map,this.La=new lg,this.Ba={},this.ka=new Map,this.qa=Go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function GR(t,e,n=!0){const i=fT(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await lT(i,e,n,!0),r}async function ZR(t,e){const n=fT(t);await lT(n,e,!0,!1)}async function lT(t,e,n,i){const r=await gR(t.localStore,ri(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await KR(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&YE(t.remoteStore,r),h}async function KR(t,e,n,i,r){t.Ka=(x,E,A)=>async function(j,U,k,P){let O=U.view.ma(k);O.ns&&(O=await vy(j.localStore,U.query,!1).then(({documents:C})=>U.view.ma(C,O)));const $=P&&P.targetChanges.get(U.targetId),Y=P&&P.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(O,j.isPrimaryClient,$,Y);return Sy(j,U.targetId,J.wa),J.snapshot}(t,x,E,A);const o=await vy(t.localStore,e,!0),l=new WR(e,o.Ts),h=l.ma(o.documents),d=_u.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),g=l.applyChanges(h,t.isPrimaryClient,d);Sy(t,n,g.wa);const y=new HR(e,n,l);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),g.snapshot}async function QR(t,e,n){const i=ge(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(l=>!rd(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Op(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&hg(i.remoteStore,r.targetId),Mp(i,r.targetId)}).catch(pu)):(Mp(i,r.targetId),await Op(i.localStore,r.targetId,!0))}async function YR(t,e){const n=ge(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),hg(n.remoteStore,i.targetId))}async function XR(t,e,n){const i=sL(t);try{const r=await function(l,h){const d=ge(l),g=pt.now(),y=h.reduce((A,D)=>A.add(D.key),Pe());let x,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=ji(),j=Pe();return d.cs.getEntries(A,y).next(U=>{D=U,D.forEach((k,P)=>{P.isValidDocument()||(j=j.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,D)).next(U=>{x=U;const k=[];for(const P of h){const O=xN(P,x.get(P.key).overlayedDocument);O!=null&&k.push(new jr(P.key,O,gE(O.value.mapValue),Fn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,g,k,h)}).next(U=>{E=U;const k=U.applyToLocalDocumentSet(x,j);return d.documentOverlayCache.saveOverlays(A,U.batchId,k)})}).then(()=>({batchId:E.batchId,changes:CE(x)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,h,d){let g=l.Ba[l.currentUser.toKey()];g||(g=new Qe(be)),g=g.insert(h,d),l.Ba[l.currentUser.toKey()]=g}(i,r.batchId,n),await yu(i,r.changes),await hd(i.remoteStore)}catch(r){const o=gg(r,"Failed to persist write");n.reject(o)}}async function uT(t,e){const n=ge(t);try{const i=await fR(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Na.get(o);l&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.va=!0:r.modifiedDocuments.size>0?Oe(l.va):r.removedDocuments.size>0&&(Oe(l.va),l.va=!1))}),await yu(n,i,e)}catch(i){await pu(i)}}function Py(t,e,n){const i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&r.push(h.snapshot)}),function(l,h){const d=ge(l);d.onlineState=h;let g=!1;d.queries.forEach((y,x)=>{for(const E of x.j_)E.Z_(h)&&(g=!0)}),g&&_g(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function JR(t,e,n){const i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let l=new Qe(oe.comparator);l=l.insert(o,Mt.newNoDocument(o,me.min()));const h=Pe().add(o),d=new ld(me.min(),new Map,new Qe(be),l,h);await uT(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),vg(i)}else await Op(i.localStore,e,!1).then(()=>Mp(i,e,n)).catch(pu)}async function eL(t,e){const n=ge(t),i=e.batch.batchId;try{const r=await dR(n.localStore,e);hT(n,i,null),cT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await yu(n,r)}catch(r){await pu(r)}}async function tL(t,e,n){const i=ge(t);try{const r=await function(l,h){const d=ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.mutationQueue.lookupMutationBatch(g,h).next(x=>(Oe(x!==null),y=x.keys(),d.mutationQueue.removeMutationBatch(g,x))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>d.localDocuments.getDocuments(g,y))})}(i.localStore,e);hT(i,e,n),cT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await yu(i,r)}catch(r){await pu(r)}}function cT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hT(t,e,n){const i=ge(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||dT(t,i)})}function dT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vg(t))}function Sy(t,e,n){for(const i of n)i instanceof oT?(t.La.addReference(i.key,e),nL(t,i)):i instanceof aT?(re("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||dT(t,i.key)):fe()}function nL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(i),vg(t))}function vg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(ze.fromString(e)),i=t.qa.next();t.Na.set(i,new $R(n)),t.Oa=t.Oa.insert(n,i),YE(t.remoteStore,new dr(ri(id(n.path)),i,"TargetPurposeLimboResolution",Xm.oe))}}async function yu(t,e,n){const i=ge(t),r=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(g=>{var y;if((g||n)&&i.isPrimaryClient){const x=g?!g.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,x?"current":"not-current")}if(g){r.push(g);const x=cg.Wi(d.targetId,g);o.push(x)}}))}),await Promise.all(l),i.Ca.d_(r),await async function(d,g){const y=ge(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>K.forEach(g,E=>K.forEach(E.$i,A=>y.persistence.referenceDelegate.addReference(x,E.targetId,A)).next(()=>K.forEach(E.Ui,A=>y.persistence.referenceDelegate.removeReference(x,E.targetId,A)))))}catch(x){if(!mu(x))throw x;re("LocalStore","Failed to update sequence numbers: "+x)}for(const x of g){const E=x.targetId;if(!x.fromCache){const A=y.os.get(E),D=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(D);y.os=y.os.insert(E,j)}}}(i.localStore,o))}async function iL(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await GE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ne(G.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yu(n,i.hs)}}function rL(t,e){const n=ge(t),i=n.Na.get(e);if(i&&i.va)return Pe().add(i.key);{let r=Pe();const o=n.Ma.get(e);if(!o)return r;for(const l of o){const h=n.Fa.get(l);r=r.unionWith(h.view.Va)}return r}}function fT(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JR.bind(null,e),e.Ca.d_=UR.bind(null,e.eventManager),e.Ca.$a=BR.bind(null,e.eventManager),e}function sL(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tL.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return hR(this.persistence,new uR,e.initialUser,this.serializer)}Ga(e){return new oR(ug.Zr,this.serializer)}Wa(e){return new vR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Py(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iL.bind(null,this.syncEngine),await VR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zR}()}createDatastore(e){const n=ud(e.databaseInfo.databaseId),i=function(o){return new ER(o)}(e.databaseInfo);return function(o,l,h,d){return new PR(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,h){return new CR(i,r,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Py(this.syncEngine,n,0),function(){return xy.D()?new xy:new yR}())}createSyncEngine(e,n){return function(r,o,l,h,d,g,y){const x=new qR(r,o,l,h,d,g);return y&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ge(r);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await vu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=fE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=gg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function mf(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await GE(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aL(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>wy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>wy(e.remoteStore,r)),t._onlineComponents=e}async function aL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Wo("Error using user provided cache. Falling back to memory cache: "+n),await mf(t,new bh)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await mf(t,new bh);return t._offlineComponents}async function mT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Cy(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Cy(t,new jp))),t._onlineComponents}function lL(t){return mT(t).then(e=>e.syncEngine)}async function Vp(t){const e=await mT(t),n=e.eventManager;return n.onListen=GR.bind(null,e.syncEngine),n.onUnlisten=QR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YR.bind(null,e.syncEngine),n}function uL(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,g){const y=new pT({next:E=>{y.Za(),l.enqueueAndForget(()=>rT(o,x));const A=E.docs.has(h);!A&&E.fromCache?g.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?g.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),x=new sT(id(h.path),y,{includeMetadataChanges:!0,_a:!0});return iT(o,x)}(await Vp(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cL(t,e,n,i){if(e===!0&&i===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ky(t){if(!oe.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function by(t){if(oe.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ab;switch(i.type){case"firstParty":return new Rb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Ay.get(n);i&&(re("ComponentProvider","Removing Datastore"),Ay.delete(n),i.terminate())}(this),Promise.resolve()}}function hL(t,e,n,i={}){var r;const o=(t=zn(t,fd))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=GC(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(g)}t._authCredentials=new kb(new dE(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class jt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class Pr extends ks{constructor(e,n,i){super(e,n,id(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new oe(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function vT(t,e,...n){if(t=mt(t),_T("collection","path",e),t instanceof fd){const i=ze.fromString(e,...n);return by(i),new Pr(t,null,i)}{if(!(t instanceof jt||t instanceof Pr))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ze.fromString(e,...n));return by(i),new Pr(t.firestore,null,i)}}function Nr(t,e,...n){if(t=mt(t),arguments.length===1&&(e=fE.newId()),_T("doc","path",e),t instanceof fd){const i=ze.fromString(e,...n);return ky(i),new jt(t,null,new oe(i))}{if(!(t instanceof jt||t instanceof Pr))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ze.fromString(e,...n));return ky(i),new jt(t.firestore,t instanceof Pr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KE(this,"async_queue_retry"),this.Vu=()=>{const i=pf();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mu(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Mi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mg.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Ly(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ws extends fd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Ry,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ry(e),this._firestoreClient=void 0,await e}}}function dL(t,e){const n=typeof t=="object"?t:Ew(),i=typeof t=="string"?t:"(default)",r=zm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=$C("firestore");o&&hL(r,...o)}return r}function yg(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fL(t),t._firestoreClient}function fL(t){var e,n,i;const r=t._freezeSettings(),o=function(h,d,g,y){return new $b(h,d,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,gT(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new oL(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(bt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^__.*__$/;class mL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new gu(e,this.data,n,this.fieldTransforms)}}class yT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Eg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xT(this.Cu)&&pL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ud(e)}Qu(e,n,i,r=!1){return new Eg({Cu:e,methodName:n,qu:i,path:St.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gd(t){const e=t._freezeSettings(),n=ud(t._databaseId);return new gL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wT(t,e,n,i,r,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);Ig("Data must be an object, but it was:",l,i);const h=ET(i,l);let d,g;if(o.merge)d=new an(l.fieldMask),g=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const x of o.mergeFields){const E=Fp(e,x,n);if(!l.contains(E))throw new ne(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);IT(y,E)||y.push(E)}d=new an(y),g=l.fieldTransforms.filter(x=>d.covers(x.field))}else d=null,g=l.fieldTransforms;return new mL(new Qt(h),d,g)}class _d extends md{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}class Tg extends md{_toFieldTransform(e){return new gN(e.path,new Xl)}isEqual(e){return e instanceof Tg}}function _L(t,e,n,i){const r=t.Qu(1,e,n);Ig("Data must be an object, but it was:",r,i);const o=[],l=Qt.empty();Cs(i,(d,g)=>{const y=Pg(e,d,n);g=mt(g);const x=r.Nu(y);if(g instanceof _d)o.push(y);else{const E=xu(g,x);E!=null&&(o.push(y),l.set(y,E))}});const h=new an(o);return new yT(l,h,r.fieldTransforms)}function vL(t,e,n,i,r,o){const l=t.Qu(1,e,n),h=[Fp(e,i,n)],d=[r];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Fp(e,o[E])),d.push(o[E+1]);const g=[],y=Qt.empty();for(let E=h.length-1;E>=0;--E)if(!IT(g,h[E])){const A=h[E];let D=d[E];D=mt(D);const j=l.Nu(A);if(D instanceof _d)g.push(A);else{const U=xu(D,j);U!=null&&(g.push(A),y.set(A,U))}}const x=new an(g);return new yT(y,x,l.fieldTransforms)}function yL(t,e,n,i=!1){return xu(n,t.Qu(i?4:3,e))}function xu(t,e){if(TT(t=mt(t)))return Ig("Unsupported field value:",e,t),ET(t,e);if(t instanceof md)return function(i,r){if(!xT(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const h of i){let d=xu(h,r.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=pt.fromDate(i);return{timestampValue:Ah(r.serializer,o)}}if(i instanceof pt){const o=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ah(r.serializer,o)}}if(i instanceof xg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ko)return{bytesValue:zE(r.serializer,i._byteString)};if(i instanceof jt){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof wg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return rg(h.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${dd(i)}`)}(t,e)}function ET(t,e){const n={};return pE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(i,r)=>{const o=xu(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function TT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof xg||t instanceof Ko||t instanceof jt||t instanceof md||t instanceof wg)}function Ig(t,e,n){if(!TT(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=dd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Fp(t,e,n){if((e=mt(e))instanceof pd)return e._internalPath;if(typeof e=="string")return Pg(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const xL=new RegExp("[~\\*/\\[\\]]");function Pg(t,e,n){if(e.search(xL)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pd(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new ne(G.INVALID_ARGUMENT,h+t+d)}function IT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wL extends PT{data(){return super.data()}}function vd(t,e){return typeof e=="string"?Pg(t,e):e instanceof pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class ST extends Sg{}function TL(t,e,...n){let i=[];e instanceof Sg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Cg).length,h=o.filter(d=>d instanceof yd).length;if(l>1||l>0&&h>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class yd extends ST{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yd(e,n,i)}_apply(e){const n=this._parse(e);return CT(e._query,n),new ks(e.firestore,e.converter,Ap(e._query,n))}_parse(e){const n=gd(e.firestore);return function(o,l,h,d,g,y,x){let E;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Dy(x,y);const A=[];for(const D of x)A.push(Oy(d,o,D));E={arrayValue:{values:A}}}else E=Oy(d,o,x)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Dy(x,y),E=yL(h,l,x,y==="in"||y==="not-in");return lt.create(g,y,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function IL(t,e,n){const i=e,r=vd("where",t);return yd._create(r,i,n)}class Cg extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const h=o.getFlattenedFilters();for(const d of h)CT(l,d),l=Ap(l,d)}(e._query,n),new ks(e.firestore,e.converter,Ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends ST{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=function(r,o,l){if(r.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(o,l)}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new ia(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function PL(t,e="asc"){const n=e,i=vd("orderBy",t);return Ag._create(i,n)}function Oy(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TE(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ze.fromString(n));if(!oe.isDocumentKey(i))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ty(t,new oe(i))}if(n instanceof jt)return ty(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(n)}.`)}function Dy(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(t,e){const n=function(r,o){for(const l of r)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SL{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Cs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>tt(l.doubleValue));return new wg(o)}convertGeoPoint(e){return new xg(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=kr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ze.fromString(e);Oe(qE(i));const r=new Kl(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||Mi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kT extends PT{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class qc extends kT{data(e={}){return super.data(e)}}class CL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ul(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new qc(this._firestore,this._userDataWriter,i.key,i,new ul(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const d=new qc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new ul(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new qc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new ul(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:AL(h.type),doc:d,oldIndex:g,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){t=zn(t,jt);const e=zn(t.firestore,ws);return uL(yg(e),t._key).then(n=>RT(e,t,n))}class bT extends SL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function My(t,e,n){t=zn(t,jt);const i=zn(t.firestore,ws),r=AT(t.converter,e);return bg(i,[wT(gd(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Fn.none())])}function NT(t,e,n,...i){t=zn(t,jt);const r=zn(t.firestore,ws),o=gd(r);let l;return l=typeof(e=mt(e))=="string"||e instanceof pd?vL(o,"updateDoc",t._key,e,n,i):_L(o,"updateDoc",t._key,e),bg(r,[l.toMutation(t._key,Fn.exists(!0))])}function kL(t,e){const n=zn(t.firestore,ws),i=Nr(t),r=AT(t.converter,e);return bg(n,[wT(gd(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Fn.exists(!1))]).then(()=>i)}function bL(t,...e){var n,i,r;t=mt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Ly(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Ly(e[l])){const x=e[l];e[l]=(n=x.next)===null||n===void 0?void 0:n.bind(x),e[l+1]=(i=x.error)===null||i===void 0?void 0:i.bind(x),e[l+2]=(r=x.complete)===null||r===void 0?void 0:r.bind(x)}let d,g,y;if(t instanceof jt)g=zn(t.firestore,ws),y=id(t._key.path),d={next:x=>{e[l]&&e[l](RT(g,t,x))},error:e[l+1],complete:e[l+2]};else{const x=zn(t,ks);g=zn(x.firestore,ws),y=x._query;const E=new bT(g);d={next:A=>{e[l]&&e[l](new CL(g,E,x,A))},error:e[l+1],complete:e[l+2]},EL(t._query)}return function(E,A,D,j){const U=new pT(j),k=new sT(A,U,D);return E.asyncQueue.enqueueAndForget(async()=>iT(await Vp(E),k)),()=>{U.Za(),E.asyncQueue.enqueueAndForget(async()=>rT(await Vp(E),k))}}(yg(g),y,h,d)}function bg(t,e){return function(i,r){const o=new Ir;return i.asyncQueue.enqueueAndForget(async()=>XR(await lL(i),r,o)),o.promise}(yg(t),e)}function RT(t,e,n){const i=n.docs.get(e._key),r=new bT(t);return new kT(t,r,e._key,i,new ul(n.hasPendingWrites,n.fromCache),e.converter)}function Rh(){return new Tg("serverTimestamp")}(function(e,n=!0){(function(r){na=r})(ea),Bo(new ms("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new ws(new bb(i.getProvider("auth-internal")),new Ob(i.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(g.options.projectId,y)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Tr(Qv,"4.7.3",e),Tr(Qv,"4.7.3","esm2017")})();var NL="firebase",RL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(NL,RL,"app");const LL={apiKey:"AIzaSyBtSj56p_qzu7ENoMDmwLbP3EkBANKzads",authDomain:"gobike26.firebaseapp.com",projectId:"gobike26",storageBucket:"gobike26.firebasestorage.app",messagingSenderId:"721691769363",appId:"1:721691769363:web:74f064472daca28d009de6"},LT=ww(LL),Es=Sb(LT),Vi=dL(LT),OT=H.createContext(null);function OL({children:t}){const[e,n]=H.useState(null),[i,r]=H.useState(!0);H.useEffect(()=>{const l=gk(Es,async h=>{if(h){const d=await kg(Nr(Vi,"users",h.uid));d.exists()&&n({uid:h.uid,...d.data()})}else n(null);r(!1)});return()=>l()},[]);const o=async()=>{await Es.signOut(),n(null)};return i?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-3xl mb-2",children:""}),f.jsx("p",{className:"text-xs text-gray-400",children:"Loading..."})]})}):f.jsx(OT.Provider,{value:{user:e,logout:o},children:t})}const Vr=()=>H.useContext(OT);function DL(){const t=dn();return f.jsxs("div",{className:"min-h-screen bg-dark flex flex-col overflow-hidden relative",children:[f.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-primary-500 rounded-full opacity-10 blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-primary-400 rounded-full opacity-10 blur-3xl translate-y-1/2 -translate-x-1/2"}),f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-6 text-center pt-16 pb-8",children:[f.jsxs("div",{className:"relative mb-8",children:[f.jsx("div",{className:"w-24 h-24 bg-primary-500 rounded-3xl flex items-center justify-center shadow-primary mb-4",children:f.jsx("span",{className:"text-5xl",children:""})}),f.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-primary-300 rounded-full opacity-60 animate-ping-slow"})]}),f.jsxs("h1",{className:"text-5xl font-display font-black text-white mb-2 tracking-tight",children:["Go",f.jsx("span",{className:"text-primary-500",children:"bike"})]}),f.jsx("p",{className:"text-gray-400 text-sm font-body mb-2",children:"Myanmar's Fast Delivery Service"}),f.jsx("p",{className:"text-gray-500 text-xs font-body",children:"    "}),f.jsx("div",{className:"flex gap-8 mt-10 mb-10",children:[{value:"500+",label:"Riders"},{value:"10K+",label:"Deliveries"},{value:"4.8",label:"Rating"}].map(e=>f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-display font-black text-primary-400",children:e.value}),f.jsx("p",{className:"text-xs text-gray-500 font-body",children:e.label})]},e.label))}),f.jsx("div",{className:"grid grid-cols-2 gap-3 w-full max-w-xs mb-10",children:[{icon:"",text:"Real-time Tracking"},{icon:"",text:"Fast Delivery"},{icon:"",text:"Secure Payment"},{icon:"",text:"24/7 Support"}].map(e=>f.jsxs("div",{className:"bg-white/5 rounded-2xl p-3 flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:e.icon}),f.jsx("span",{className:"text-xs text-gray-300 font-body",children:e.text})]},e.text))})]}),f.jsxs("div",{className:"px-6 pb-10 space-y-3",children:[f.jsx("button",{onClick:()=>t("/signup"),className:"w-full bg-primary-500 text-white font-display font-bold py-4 rounded-2xl shadow-primary text-base active:scale-95 transition-all",children:" "}),f.jsx("button",{onClick:()=>t("/login"),className:"w-full bg-white/10 text-white font-display font-semibold py-4 rounded-2xl text-base active:scale-95 transition-all",children:"Login "}),f.jsx("p",{className:"text-center text-xs text-gray-600 font-body",children:"Gobike  2024  Myanmar"})]})]})}function ML(){const[t,e]=H.useState({name:"",email:"",phone:"",password:"",role:"customer"}),[n,i]=H.useState(!1),[r,o]=H.useState(""),l=dn(),h=[{value:"customer",icon:"",label:"Customer"},{value:"rider",icon:"",label:"Rider"}],d=async g=>{g.preventDefault(),i(!0),o("");try{const{user:y}=await dk(Es,t.email,t.password);await My(Nr(Vi,"users",y.uid),{name:t.name,email:t.email,phone:t.phone,role:t.role,status:"active",createdAt:Rh()}),t.role==="rider"&&await My(Nr(Vi,"riders",y.uid),{name:t.name,phone:t.phone,isOnline:!1,isAvailable:!1,currentLocation:null,coinBalance:0,totalEarned:0,totalCommission:0,rating:5,totalDeliveries:0,telegramChatId:null,vehicleType:"bike",lastUpdated:Rh()}),l(`/${t.role}`)}catch(y){o(y.message)}finally{i(!1)}};return f.jsxs("div",{className:"min-h-screen bg-surface flex flex-col",children:[f.jsxs("div",{className:"bg-dark px-6 pt-12 pb-8 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-primary-500 rounded-full opacity-15 blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsx("button",{onClick:()=>l("/"),className:"text-gray-400 text-sm mb-4 block",children:" Back"}),f.jsx("h1",{className:"text-3xl font-display font-black text-white",children:"Sign Up"}),f.jsx("p",{className:"text-gray-400 text-sm font-body mt-1",children:"Gobike "})]}),f.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:""}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(g=>f.jsxs("button",{type:"button",onClick:()=>e({...t,role:g.value}),className:`py-3 rounded-2xl flex flex-col items-center gap-1 border-2 transition-all
                  ${t.role===g.value?"border-primary-500 bg-primary-500 text-white shadow-primary":"border-gray-200 bg-white text-gray-600"}`,children:[f.jsx("span",{className:"text-xl",children:g.icon}),f.jsx("span",{className:"text-xs font-semibold",children:g.label})]},g.value))})]}),r&&f.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",r]}),f.jsxs("form",{onSubmit:d,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:""}),f.jsx("input",{type:"text",placeholder:" - ",value:t.name,onChange:g=>e({...t,name:g.target.value}),className:"input-field",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Email"}),f.jsx("input",{type:"email",placeholder:"example@gmail.com",value:t.email,onChange:g=>e({...t,email:g.target.value}),className:"input-field",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:""}),f.jsx("input",{type:"tel",placeholder:"09xxxxxxxx",value:t.phone,onChange:g=>e({...t,phone:g.target.value}),className:"input-field",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),f.jsx("input",{type:"password",placeholder:"  ",value:t.password,onChange:g=>e({...t,password:g.target.value}),className:"input-field",required:!0,minLength:6})]}),f.jsx("button",{type:"submit",disabled:n,className:"btn-primary mt-2",children:n?"...":" "})]}),f.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:["?"," ",f.jsx("button",{onClick:()=>l("/login"),className:"text-primary-500 font-semibold",children:"Login "})]})]})]})}function jL(){const[t,e]=H.useState({email:"",password:"",remember:!1}),[n,i]=H.useState(!1),[r,o]=H.useState(""),l=dn(),h=async d=>{var g;d.preventDefault(),i(!0),o("");try{await fk(Es,t.remember?Xw:Zm);const{user:y}=await Kw(Es,t.email,t.password),E=(g=(await kg(Nr(Vi,"users",y.uid))).data())==null?void 0:g.role;l(E==="customer"?"/customer":E==="rider"?"/rider":E==="admin"?"/admin":"/")}catch{o("Email  Password ")}finally{i(!1)}};return f.jsxs("div",{className:"min-h-screen bg-surface flex flex-col",children:[f.jsxs("div",{className:"bg-dark px-6 pt-12 pb-8 relative overflow-hidden",children:[f.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-primary-500 rounded-full opacity-10 blur-2xl translate-y-1/2 -translate-x-1/2"}),f.jsx("button",{onClick:()=>l("/"),className:"text-gray-400 text-sm mb-4 block",children:" Back"}),f.jsx("h1",{className:"text-3xl font-display font-black text-white",children:"Welcome Back "}),f.jsx("p",{className:"text-gray-400 text-sm font-body mt-1",children:"Gobike  "})]}),f.jsxs("div",{className:"flex-1 px-6 py-6",children:[r&&f.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",r]}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Email"}),f.jsx("input",{type:"email",placeholder:"example@gmail.com",value:t.email,onChange:d=>e({...t,email:d.target.value}),className:"input-field",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),f.jsx("input",{type:"password",placeholder:"",value:t.password,onChange:d=>e({...t,password:d.target.value}),className:"input-field",required:!0})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"remember",checked:t.remember,onChange:d=>e({...t,remember:d.target.checked}),className:"w-4 h-4 accent-primary-500 rounded"}),f.jsx("label",{htmlFor:"remember",className:"text-xs text-gray-500",children:" (Remember Me)"})]}),f.jsx("button",{type:"submit",disabled:n,className:"btn-primary mt-2",children:n?"...":"Login "})]}),f.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:["?"," ",f.jsx("button",{onClick:()=>l("/signup"),className:"text-primary-500 font-semibold",children:"Sign Up "})]})]})]})}function VL(){const[t,e]=H.useState({email:"",password:""}),[n,i]=H.useState(!1),[r,o]=H.useState(""),l=dn(),h=async d=>{var g;d.preventDefault(),i(!0),o("");try{const{user:y}=await Kw(Es,t.email,t.password);((g=(await kg(Nr(Vi,"users",y.uid))).data())==null?void 0:g.role)==="admin"?l("/admin"):(o("Admin  "),await Es.signOut())}catch{o("Email  Password ")}finally{i(!1)}};return f.jsxs("div",{className:"min-h-screen bg-dark flex flex-col items-center justify-center px-6 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-500 rounded-full opacity-10 blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-primary-400 rounded-full opacity-10 blur-3xl translate-y-1/2 -translate-x-1/2"}),f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-primary",children:f.jsx("span",{className:"text-3xl",children:""})}),f.jsx("h1",{className:"text-2xl font-display font-black text-white",children:"Admin Portal"}),f.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Gobike Management System"})]}),f.jsxs("div",{className:"w-full max-w-sm",children:[r&&f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 text-xs px-4 py-3 rounded-2xl mb-4",children:[" ",r]}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Admin Email"}),f.jsx("input",{type:"email",placeholder:"admin@gobike.mm",value:t.email,onChange:d=>e({...t,email:d.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-primary-500 transition-all",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Password"}),f.jsx("input",{type:"password",placeholder:"",value:t.password,onChange:d=>e({...t,password:d.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-primary-500 transition-all",required:!0})]}),f.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary-500 text-white font-display font-bold py-4 rounded-2xl shadow-primary active:scale-95 transition-all disabled:opacity-50 mt-2",children:n?"...":" Admin Login"})]}),f.jsx("p",{className:"text-center text-xs text-gray-600 mt-6",children:"Gobike Admin Panel  Authorized Access Only"}),f.jsx("p",{className:"text-center mt-3",children:f.jsx("button",{onClick:()=>l("/login"),className:"text-gray-600 text-[10px]",children:" Back to Login"})})]})]})}const jy=[{id:"n1",userId:"user1",title:"Rider ",message:"  ",type:"order_update",orderId:"ORD001",isRead:!1,createdAt:new Date(Date.now()-5*60*1e3)},{id:"n2",userId:"user1",title:"",message:"Rider    ",type:"order_update",orderId:"ORD001",isRead:!1,createdAt:new Date(Date.now()-2*60*1e3)},{id:"n3",userId:"user2",title:"",message:"     ",type:"new_order",orderId:"ORD002",isRead:!0,createdAt:new Date(Date.now()-30*60*1e3)}];function FL(){const[t,e]=H.useState(!1),n=jy.filter(r=>!r.isRead).length,i=r=>{const o=Math.floor((Date.now()-r)/6e4);return o<60?`${o} `:`${Math.floor(o/60)} `};return f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>e(!t),className:"relative w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:[f.jsx("span",{className:"text-lg",children:""}),n>0&&f.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-primary-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:n})]}),t&&f.jsxs("div",{className:"absolute right-0 top-11 w-72 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden z-50 animate-slide-up",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:f.jsx("p",{className:"font-display font-bold text-sm",children:"Notifications"})}),f.jsx("div",{className:"max-h-72 overflow-y-auto",children:jy.map(r=>f.jsx("div",{className:`px-4 py-3 border-b border-gray-50 ${r.isRead?"":"bg-primary-50"}`,children:f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-lg mt-0.5",children:r.type==="new_order"?"":""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-800",children:r.title}),f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:r.message}),f.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:[i(r.createdAt)," "]})]}),!r.isRead&&f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500 mt-1 flex-shrink-0"})]})},r.id))})]})]})}function Hn({title:t}){var n;const{user:e}=Vr();return f.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100",children:f.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xl font-display font-bold text-primary-500",children:" Gobike"}),t&&f.jsxs("span",{className:"text-sm text-gray-400 font-body",children:["/ ",t]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(FL,{}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center",children:f.jsx("span",{className:"text-xs font-bold text-primary-600",children:((n=e==null?void 0:e.name)==null?void 0:n.charAt(0))||"G"})})]})]})})}const zL=[{path:"/customer",icon:"",label:"Home"},{path:"/customer/order",icon:"",label:"Order"},{path:"/customer/history",icon:"",label:"History"},{path:"/customer/profile",icon:"",label:"Profile"}],UL=[{path:"/rider",icon:"",label:"Home"},{path:"/rider/delivery",icon:"",label:"Active"},{path:"/rider/wallet",icon:"",label:"Wallet"},{path:"/rider/history",icon:"",label:"History"}],BL=[{path:"/admin",icon:"",label:"Dashboard"},{path:"/admin/riders",icon:"",label:"Riders"},{path:"/admin/wallet",icon:"",label:"Wallet"},{path:"/admin/map",icon:"",label:"Map"}];function Ui(){const{user:t}=Vr(),e=dn(),n=Yh(),i=(t==null?void 0:t.role)==="customer"?zL:(t==null?void 0:t.role)==="rider"?UL:BL;return f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white shadow-bottom-nav border-t border-gray-100",children:f.jsx("div",{className:"flex items-center justify-around px-2 py-2 max-w-md mx-auto",children:i.map(r=>{const o=n.pathname===r.path;return f.jsxs("button",{onClick:()=>e(r.path),className:`bottom-nav-item flex-1 ${o?"bg-primary-50":""}`,children:[f.jsx("span",{className:"text-xl",children:r.icon}),f.jsx("span",{className:`text-[10px] font-semibold font-body ${o?"text-primary-500":"text-gray-400"}`,children:r.label})]},r.path)})})})}function DT(t,e){const n=H.useRef(e);H.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function WL(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const HL=1;function $L(t){return Object.freeze({__version:HL,map:t})}function MT(t,e){return Object.freeze({...t,...e})}const jT=H.createContext(null),VT=jT.Provider;function Ng(){const t=H.useContext(jT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function FT(t){function e(n,i){const{instance:r,context:o}=t(n).current;return H.useImperativeHandle(i,()=>r),n.children==null?null:Il.createElement(VT,{value:o},n.children)}return H.forwardRef(e)}function qL(t){function e(n,i){const[r,o]=H.useState(!1),{instance:l}=t(n,o).current;H.useImperativeHandle(i,()=>l),H.useEffect(function(){r&&l.update()},[l,r,n.children]);const h=l._contentNode;return h?ew.createPortal(n.children,h):null}return H.forwardRef(e)}function GL(t){function e(n,i){const{instance:r}=t(n).current;return H.useImperativeHandle(i,()=>r),null}return H.forwardRef(e)}function Rg(t,e){const n=H.useRef();H.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function xd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function ZL(t,e){return function(i,r){const o=Ng(),l=t(xd(i,o),o);return DT(o.map,i.attribution),Rg(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var zp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(gI,function(n){var i="1.9.4";function r(s){var a,c,p,_;for(c=1,p=arguments.length;c<p;c++){_=arguments[c];for(a in _)s[a]=_[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var p=c.call(arguments,2);return function(){return s.apply(a,p.length?p.concat(c.call(arguments)):arguments)}}var h=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function g(s,a,c){var p,_,w,b;return b=function(){p=!1,_&&(w.apply(c,_),_=!1)},w=function(){p?_=arguments:(s.apply(c,arguments),setTimeout(b,a),p=!0)},w}function y(s,a,c){var p=a[1],_=a[0],w=p-_;return s===p&&c?s:((s-_)%w+w)%w+_}function x(){return!1}function E(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function A(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function D(s){return A(s).split(/\s+/)}function j(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function U(s,a,c){var p=[];for(var _ in s)p.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!a||a.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(s,a){return s.replace(k,function(c,p){var _=a[p];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(a)),_})}var O=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function $(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var C=0;function T(s){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(s,c)}var S=window.requestAnimationFrame||J("RequestAnimationFrame")||T,N=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function M(s,a,c){if(c&&S===T)s.call(a);else return S.call(window,l(s,a))}function V(s){s&&N.call(window,s)}var R={__proto__:null,extend:r,create:o,bind:l,get lastId(){return h},stamp:d,throttle:g,wrapNum:y,falseFn:x,formatNum:E,trim:A,splitWords:D,setOptions:j,getParamString:U,template:P,isArray:O,indexOf:$,emptyImageUrl:Y,requestFn:S,cancelFn:N,requestAnimFrame:M,cancelAnimFrame:V};function Ye(){}Ye.extend=function(s){var a=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,p=o(c);p.constructor=a,a.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return s.statics&&r(a,s.statics),s.includes&&(ai(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=c.options?o(c.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,b=p._initHooks.length;w<b;w++)p._initHooks[w].call(this)}},a},Ye.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Ye.mergeOptions=function(s){return r(this.prototype.options,s),this},Ye.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ai(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=O(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(s,a,c){if(typeof s=="object")for(var p in s)this._on(p,s[p],a);else{s=D(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],a);else{s=D(s);for(var _=arguments.length===1,w=0,b=s.length;w<b;w++)_?this._off(s[w]):this._off(s[w],a,c)}return this},_on:function(s,a,c,p){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var _={fn:a,ctx:c};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,a,c){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=x;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var b=this._listens(s,a,c);if(b!==!1){var z=p[b];this._firingCount&&(z.fn=x,this._events[s]=p=p.slice()),p.splice(b,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var p=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,b=_.length;w<b;w++){var z=_[w],B=z.fn;z.once&&this.off(s,B,z.ctx),B.call(z.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(s,a,c,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(p=!!a,_=void 0,c=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,c)!==!1)return!0;if(p){for(var b in this._eventParents)if(this._eventParents[b].listens(s,a,c,p))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var p=this._events[s]||[];if(!a)return!!p.length;c===this&&(c=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===a&&p[_].ctx===c)return _;return!1},once:function(s,a,c){if(typeof s=="object")for(var p in s)this._on(p,s[p],a,!0);else{s=D(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var zt=Ye.extend(ct);function q(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ue=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new q(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new q(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(s,a,c){return s instanceof q?s:O(s)?new q(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new q(s.x,s.y):new q(s,a,c)}function he(s,a){if(s)for(var c=a?[s,a]:s,p=0,_=c.length;p<_;p++)this.extend(c[p])}he.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof q||typeof s[0]=="number"||"x"in s)a=c=X(s);else if(s=ve(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof q?s=X(s):s=ve(s),s instanceof he?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=ve(s);var a=this.min,c=this.max,p=s.min,_=s.max,w=_.x>=a.x&&p.x<=c.x,b=_.y>=a.y&&p.y<=c.y;return w&&b},overlaps:function(s){s=ve(s);var a=this.min,c=this.max,p=s.min,_=s.max,w=_.x>a.x&&p.x<c.x,b=_.y>a.y&&p.y<c.y;return w&&b},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,p=Math.abs(a.x-c.x)*s,_=Math.abs(a.y-c.y)*s;return ve(X(a.x-p,a.y-_),X(c.x+p,c.y+_))},equals:function(s){return s?(s=ve(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ve(s,a){return!s||s instanceof he?s:new he(s,a)}function Te(s,a){if(s)for(var c=a?[s,a]:s,p=0,_=c.length;p<_;p++)this.extend(c[p])}Te.prototype={extend:function(s){var a=this._southWest,c=this._northEast,p,_;if(s instanceof ye)p=s,_=s;else if(s instanceof Te){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(pe(s)||Ne(s)):this;return!a&&!c?(this._southWest=new ye(p.lat,p.lng),this._northEast=new ye(_.lat,_.lng)):(a.lat=Math.min(p.lat,a.lat),a.lng=Math.min(p.lng,a.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,p=Math.abs(a.lat-c.lat)*s,_=Math.abs(a.lng-c.lng)*s;return new Te(new ye(a.lat-p,a.lng-_),new ye(c.lat+p,c.lng+_))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ye||"lat"in s?s=pe(s):s=Ne(s);var a=this._southWest,c=this._northEast,p,_;return s instanceof Te?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=a.lat&&_.lat<=c.lat&&p.lng>=a.lng&&_.lng<=c.lng},intersects:function(s){s=Ne(s);var a=this._southWest,c=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=a.lat&&p.lat<=c.lat,b=_.lng>=a.lng&&p.lng<=c.lng;return w&&b},overlaps:function(s){s=Ne(s);var a=this._southWest,c=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>a.lat&&p.lat<c.lat,b=_.lng>a.lng&&p.lng<c.lng;return w&&b},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=Ne(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(s,a){return s instanceof Te?s:new Te(s,a)}function ye(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(s,a){if(!s)return!1;s=pe(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+E(this.lat,s)+", "+E(this.lng,s)+")"},distanceTo:function(s){return $n.distance(this,pe(s))},wrap:function(){return $n.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function pe(s,a,c){return s instanceof ye?s:O(s)&&typeof s[0]!="object"?s.length===3?new ye(s[0],s[1],s[2]):s.length===2?new ye(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ye(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new ye(s,a,c)}var ht={latLngToPoint:function(s,a){var c=this.projection.project(s),p=this.scale(a);return this.transformation._transform(c,p)},pointToLatLng:function(s,a){var c=this.scale(a),p=this.transformation.untransform(s,c);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),p=this.transformation.transform(a.min,c),_=this.transformation.transform(a.max,c);return new he(p,_)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?y(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?y(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ye(c,a,p)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),p=a.lat-c.lat,_=a.lng-c.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),b=s.getNorthEast(),z=new ye(w.lat-p,w.lng-_),B=new ye(b.lat-p,b.lng-_);return new Te(z,B)}},$n=r({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,p=s.lat*c,_=a.lat*c,w=Math.sin((a.lat-s.lat)*c/2),b=Math.sin((a.lng-s.lng)*c/2),z=w*w+Math.cos(p)*Math.cos(_)*b*b,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),Eu=6378137,Bi={R:Eu,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,s.lat),-c),_=Math.sin(p*a);return new q(this.R*s.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Eu*Math.PI;return new he([-s,-s],[s,s])}()};function Wi(s,a,c,p){if(O(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=p}Wi.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new q((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function li(s,a,c,p){return new Wi(s,a,c,p)}var Fr=r({},$n,{code:"EPSG:3857",projection:Bi,transformation:function(){var s=.5/(Math.PI*Bi.R);return li(s,.5,-s,.5)}()}),la=r({},Fr,{code:"EPSG:900913"});function bs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ua(s,a){var c="",p,_,w,b,z,B;for(p=0,w=s.length;p<w;p++){for(z=s[p],_=0,b=z.length;_<b;_++)B=z[_],c+=(_?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var ca=document.documentElement.style,Ns="ActiveXObject"in window,Tu=Ns&&!document.addEventListener,Rs="msLaunchUri"in navigator&&!("documentMode"in document),Ls=fn("webkit"),Iu=fn("android"),Os=fn("android 2")||fn("android 3"),ha=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pu=Iu&&fn("Google")&&ha<537&&!("AudioNode"in window),it=!!window.opera,gt=!Rs&&fn("chrome"),zr=fn("gecko")&&!Ls&&!it&&!Ns,Su=!gt&&fn("safari"),da=fn("phantom"),Cu="OTransition"in ca,Ur=navigator.platform.indexOf("Win")===0,fa=Ns&&"transition"in ca,Ds="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Os,Ms="MozPerspective"in ca,Td=!window.L_DISABLE_3D&&(fa||Ds||Ms)&&!Cu&&!da,Br=typeof orientation<"u"||fn("mobile"),pa=Br&&Ls,Au=Br&&Ds,ma=!window.PointerEvent&&window.MSPointerEvent,Hi=!!(window.PointerEvent||ma),js="ontouchstart"in window||!!window.TouchEvent,ga=!window.L_NO_TOUCH&&(js||Hi),ui=Br&&it,ku=Br&&zr,Vs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,bu=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",x,a),window.removeEventListener("testPassiveEventSupport",x,a)}catch{}return s}(),Wr=function(){return!!document.createElement("canvas").getContext}(),Fs=!!(document.createElementNS&&bs("svg").createSVGRect),Et=!!Fs&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Nu=!Fs&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Hr=navigator.platform.indexOf("Mac")===0,$r=navigator.platform.indexOf("Linux")===0;function fn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:Ns,ielt9:Tu,edge:Rs,webkit:Ls,android:Iu,android23:Os,androidStock:Pu,opera:it,chrome:gt,gecko:zr,safari:Su,phantom:da,opera12:Cu,win:Ur,ie3d:fa,webkit3d:Ds,gecko3d:Ms,any3d:Td,mobile:Br,mobileWebkit:pa,mobileWebkit3d:Au,msPointer:ma,pointer:Hi,touch:ga,touchNative:js,mobileOpera:ui,mobileGecko:ku,retina:Vs,passiveEvents:bu,canvas:Wr,svg:Fs,vml:Nu,inlineSvg:Et,mac:Hr,linux:$r},ci=se.msPointer?"MSPointerDown":"pointerdown",Ru=se.msPointer?"MSPointerMove":"pointermove",Lu=se.msPointer?"MSPointerUp":"pointerup",qr=se.msPointer?"MSPointerCancel":"pointercancel",zs={touchstart:ci,touchmove:Ru,touchend:Lu,touchcancel:qr},Us={touchstart:Ws,touchmove:Bs,touchend:Bs,touchcancel:Bs},An={},kn=!1;function Ou(s,a,c){return a==="touchstart"&&Mu(),Us[a]?(c=Us[a].bind(this,c),s.addEventListener(zs[a],c,!1),c):(console.warn("wrong event specified:",a),x)}function Du(s,a,c){if(!zs[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(zs[a],c,!1)}function _a(s){An[s.pointerId]=s}function va(s){An[s.pointerId]&&(An[s.pointerId]=s)}function ya(s){delete An[s.pointerId]}function Mu(){kn||(document.addEventListener(ci,_a,!0),document.addEventListener(Ru,va,!0),document.addEventListener(Lu,ya,!0),document.addEventListener(qr,ya,!0),kn=!0)}function Bs(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in An)a.touches.push(An[c]);a.changedTouches=[a],s(a)}}function Ws(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),Bs(s,a)}function ju(s){var a={},c,p;for(p in s)c=s[p],a[p]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var xa=200;function Gr(s,a){s.addEventListener("dblclick",a);var c=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var b=Ra(w);if(!(b.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!b.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=xa?(p++,p===2&&a(ju(w))):p=1,c=z}}}return s.addEventListener("click",_),{dblclick:a,simDblclick:_}}function hi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Zr=fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kr=fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wa=Kr==="webkitTransition"||Kr==="OTransition"?Kr+"End":"transitionend";function Ea(s){return typeof s=="string"?document.getElementById(s):s}function $i(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);c=p?p[a]:null}return c==="auto"?null:c}function Ie(s,a,c){var p=document.createElement(s);return p.className=a||"",c&&c.appendChild(p),p}function je(s){var a=s.parentNode;a&&a.removeChild(s)}function Qr(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function di(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function qi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Ta(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=pn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function _e(s,a){if(s.classList!==void 0)for(var c=D(a),p=0,_=c.length;p<_;p++)s.classList.add(c[p]);else if(!Ta(s,a)){var w=pn(s);Ia(s,(w?w+" ":"")+a)}}function Be(s,a){s.classList!==void 0?s.classList.remove(a):Ia(s,A((" "+pn(s)+" ").replace(" "+a+" "," ")))}function Ia(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function pn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Xe(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&Hs(s,a)}function Hs(s,a){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(p)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+p+"(opacity="+a+")"}function fi(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function qn(s,a,c){var p=a||new q(0,0);s.style[Zr]=(se.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function de(s,a){s._leaflet_pos=a,se.any3d?qn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function mn(s){return s._leaflet_pos||new q(0,0)}var bn,Nn,Pa;if("onselectstart"in document)bn=function(){ae(window,"selectstart",$e)},Nn=function(){De(window,"selectstart",$e)};else{var Gi=fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(Gi){var s=document.documentElement.style;Pa=s[Gi],s[Gi]="none"}},Nn=function(){Gi&&(document.documentElement.style[Gi]=Pa,Pa=void 0)}}function Sa(){ae(window,"dragstart",$e)}function Ca(){De(window,"dragstart",$e)}var $s,Aa;function pi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(tn(),$s=s,Aa=s.style.outlineStyle,s.style.outlineStyle="none",ae(window,"keydown",tn))}function tn(){$s&&($s.style.outlineStyle=Aa,$s=void 0,Aa=void 0,De(window,"keydown",tn))}function ka(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function qs(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Vu={__proto__:null,TRANSFORM:Zr,TRANSITION:Kr,TRANSITION_END:wa,get:Ea,getStyle:$i,create:Ie,remove:je,empty:Qr,toFront:di,toBack:qi,hasClass:Ta,addClass:_e,removeClass:Be,setClass:Ia,getClass:pn,setOpacity:Xe,testProp:fi,setTransform:qn,setPosition:de,getPosition:mn,get disableTextSelection(){return bn},get enableTextSelection(){return Nn},disableImageDrag:Sa,enableImageDrag:Ca,preventOutline:pi,restoreOutline:tn,getSizedParentNode:ka,getScale:qs};function ae(s,a,c,p){if(a&&typeof a=="object")for(var _ in a)ba(s,_,a[_],c);else{a=D(a);for(var w=0,b=a.length;w<b;w++)ba(s,a[w],c,p)}return this}var gn="_leaflet_events";function De(s,a,c,p){if(arguments.length===1)Fu(s),delete s[gn];else if(a&&typeof a=="object")for(var _ in a)Na(s,_,a[_],c);else if(a=D(a),arguments.length===2)Fu(s,function(z){return $(a,z)!==-1});else for(var w=0,b=a.length;w<b;w++)Na(s,a[w],c,p);return this}function Fu(s,a){for(var c in s[gn]){var p=c.split(/\d/)[0];(!a||a(p))&&Na(s,p,null,null,c)}}var _n={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ba(s,a,c,p){var _=a+d(c)+(p?"_"+d(p):"");if(s[gn]&&s[gn][_])return this;var w=function(z){return c.call(p||s,z||window.event)},b=w;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?w=Ou(s,a,w):se.touch&&a==="dblclick"?w=Gr(s,w):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(_n[a]||a,w,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,La(s,z)&&b(z)},s.addEventListener(_n[a],w,!1)):s.addEventListener(a,b,!1):s.attachEvent("on"+a,w),s[gn]=s[gn]||{},s[gn][_]=w}function Na(s,a,c,p,_){_=_||a+d(c)+(p?"_"+d(p):"");var w=s[gn]&&s[gn][_];if(!w)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Du(s,a,w):se.touch&&a==="dblclick"?hi(s,w):"removeEventListener"in s?s.removeEventListener(_n[a]||a,w,!1):s.detachEvent("on"+a,w),s[gn][_]=null}function vn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Zi(s){return ba(s,"wheel",vn),this}function Ki(s){return ae(s,"mousedown touchstart dblclick contextmenu",vn),s._leaflet_disable_click=!0,this}function $e(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function nn(s){return $e(s),vn(s),this}function Ra(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function Gs(s,a){if(!a)return new q(s.clientX,s.clientY);var c=qs(a),p=c.boundingClientRect;return new q((s.clientX-p.left)/c.x-a.clientLeft,(s.clientY-p.top)/c.y-a.clientTop)}var We=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/We:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function La(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Uu={__proto__:null,on:ae,off:De,stopPropagation:vn,disableScrollPropagation:Zi,disableClickPropagation:Ki,preventDefault:$e,stop:nn,getPropagationPath:Ra,getMousePosition:Gs,getWheelDelta:zu,isExternalTarget:La,addListener:ae,removeListener:De},Oa=zt.extend({run:function(s,a,c,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=mn(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),de(this._el,c),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),we=zt.extend({options:{crs:Fr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=j(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,wa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(pe(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var p=this.getZoomScale(a),_=this.getSize().divideBy(2),w=s instanceof q?s:this.latLngToContainerPoint(s),b=w.subtract(_).multiplyBy(1-1/p),z=this.containerPointToLatLng(_.add(b));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():Ne(s);var c=X(a.paddingTopLeft||a.padding||[0,0]),p=X(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(s,!1,c.add(p));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(c).divideBy(2),b=this.project(s.getSouthWest(),_),z=this.project(s.getNorthEast(),_),B=this.unproject(b.add(z).divideBy(2).add(w),_);return{center:B,zoom:_}},fitBounds:function(s,a){if(s=Ne(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){_e(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),b=this._zoom;s=pe(s),a=a===void 0?b:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(b,a),Z=_.distanceTo(p)||1,te=1.42,le=te*te;function xe(st){var ic=st?-1:1,hI=st?B:z,dI=B*B-z*z+ic*le*le*Z*Z,fI=2*hI*le*Z,bd=dI/fI,t_=Math.sqrt(bd*bd+1)-bd,pI=t_<1e-9?-18:Math.log(t_);return pI}function Bt(st){return(Math.exp(st)-Math.exp(-st))/2}function vt(st){return(Math.exp(st)+Math.exp(-st))/2}function xn(st){return Bt(st)/vt(st)}var Zt=xe(0);function oo(st){return z*(vt(Zt)/vt(Zt+te*st))}function aI(st){return z*(vt(Zt)*xn(Zt+te*st)-Bt(Zt))/le}function lI(st){return 1-Math.pow(1-st,1.5)}var uI=Date.now(),Jg=(xe(1)-Zt)/te,cI=c.duration?1e3*c.duration:1e3*Jg*.8;function e_(){var st=(Date.now()-uI)/cI,ic=lI(st)*Jg;st<=1?(this._flyToFrame=M(e_,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(aI(ic)/Z)),b),this.getScaleZoom(z/oo(ic),b),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),e_.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=Ne(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,Ne(s));return c.equals(p)||this.panTo(p,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),p=X(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),b=this.getPixelBounds(),z=ve([b.min.add(c),b.max.subtract(p)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(z.getCenter()),te=z.extend(w).getSize().subtract(B);_.x+=Z.x<0?-te.x:te.x,_.y+=Z.y<0?-te.y:te.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=a.divideBy(2).round(),_=c.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,p=new ye(a,c),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var b=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(b,w.maxZoom):b)}var z={latlng:p,bounds:_,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(z[B]=s.coords[B]);this.fire("locationfound",z)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ie("div",c,a||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Te(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=Ne(s),c=X(c||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),b=s.getNorthWest(),z=s.getSouthEast(),B=this.getSize().subtract(c),Z=ve(this.project(z,p),this.project(b,p)).getSize(),te=se.any3d?this.options.zoomSnap:1,le=B.x/Z.x,xe=B.y/Z.y,Bt=a?Math.max(le,xe):Math.min(le,xe);return p=this.getScaleZoom(Bt,p),te&&(p=Math.round(p/(te/100))*(te/100),p=a?Math.ceil(p/te)*te:Math.floor(p/te)*te),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var p=c.zoom(s*c.scale(a));return isNaN(p)?1/0:p},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(pe(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ne(s))},distance:function(s,a){return this.options.crs.distance(pe(s),pe(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Gs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Ea(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,_e(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=$i(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(s.markerPane,"leaflet-zoom-hide"),_e(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){de(this._mapPane,new q(0,0));var p=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,c)._move(s,a)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,p){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){de(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var a=s?De:ae;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],p,_=a==="mouseout"||a==="mouseover",w=s.target||s.srcElement,b=!1;w;){if(p=this._targets[d(w)],p&&(a==="click"||a==="preclick")&&this._draggableMoved(p)){b=!0;break}if(p&&p.listens(a,!0)&&(_&&!La(w,s)||(c.push(p),_))||w===this._container)break;w=w.parentNode}return!c.length&&!b&&!_&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&pi(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var _=this._findEventTargets(s,a);if(c){for(var w=[],b=0;b<c.length;b++)c[b].listens(a,!0)&&w.push(c[b]);_=w.concat(_)}if(_.length){a==="contextmenu"&&$e(s);var z=_[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Z=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(b=0;b<_.length;b++)if(_[b].fire(a,B,!0),B.originalEvent._stopped||_[b].options.bubblingMouseEvents===!1&&$(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return mn(this._mapPane)||new q(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var p=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,a,c){var p=this._getNewPixelOrigin(c,a);return ve([this.project(s.getSouthWest(),a)._subtract(p),this.project(s.getNorthWest(),a)._subtract(p),this.project(s.getSouthEast(),a)._subtract(p),this.project(s.getNorthEast(),a)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var p=this.project(s,a),_=this.getSize().divideBy(2),w=new he(p.subtract(_),p.add(_)),b=this._getBoundsOffset(w,c,a);return Math.abs(b.x)<=1&&Math.abs(b.y)<=1?s:this.unproject(p.add(b),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),p=new he(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(p,a))},_getBoundsOffset:function(s,a,c){var p=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),b=this._rebound(_.x,-w.x),z=this._rebound(_.y,-w.y);return new q(b,z)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),p=se.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=Zr,p=this._proxy.style[c];qn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();qn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(a),_=this._getCenterOffset(s)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(_)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Zs(s,a){return new we(s,a)}var Gt=Ye.extend({options:{position:"topright"},initialize:function(s){j(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),p=s._controlCorners[c];return _e(a,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(a,p.firstChild):p.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ut=function(s){return new Gt(s)};we.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ie("div",a+"control-container",this._container);function p(_,w){var b=a+_+" "+a+w;s[_+w]=Ie("div",b,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)je(this._controlCorners[s]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Da=Gt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,p){return c<p?-1:p<c?1:0}},initialize:function(s,a,c){j(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in a)this._addLayer(a[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Gt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Ie("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Ki(a),Zi(a);var p=this._section=Ie("section",s+"-list");c&&(this._map.on("click",this.collapse,this),ae(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ie("a",s+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),ae(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){$e(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ie("div",s+"-base",p),this._separator=Ie("div",s+"-separator",p),this._overlaysList=Ie("div",s+"-overlays",p),a.appendChild(p)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qr(this._baseLayersList),Qr(this._overlaysList),this._layerControlInputs=[];var s,a,c,p,_=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),a=a||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(d(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(p),p.layerId=d(s.layer),ae(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(p),w.appendChild(_);var b=s.overlay?this._overlaysList:this._baseLayersList;return b.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)a=s[w],c=this._getLayer(a.layerId).layer,a.checked?p.push(c):a.checked||_.push(c);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,p=this._map.getZoom(),_=s.length-1;_>=0;_--)a=s[_],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ae(s,"click",$e),this.expand();var a=this;setTimeout(function(){De(s,"click",$e),a._preventClick=!1})}}),Id=function(s,a,c){return new Da(s,a,c)},mi=Gt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Ie("div",a+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,p,_){var w=Ie("a",c,p);return w.innerHTML=s,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),Ki(w),ae(w,"click",nn),ae(w,"click",_,this),ae(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Be(this._zoomInButton,a),Be(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(_e(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(_e(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mi,this.addControl(this.zoomControl))});var Bu=function(s){return new mi(s)},Ks=Gt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Ie("div",a),p=this.options;return this._addScales(p,a+"-line",c),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Ie("div",a,c)),s.imperial&&(this._iScale=Ie("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,p,_;a>5280?(c=a/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Qs=function(s){return new Ks(s)},Wu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qi=Gt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Wu+" ":"")+"Leaflet</a>"},initialize:function(s){j(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ie("div","leaflet-control-attribution"),Ki(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new Qi().addTo(this)});var Pd=function(s){return new Qi(s)};Gt.Layers=Da,Gt.Zoom=mi,Gt.Scale=Ks,Gt.Attribution=Qi,Ut.layers=Id,Ut.zoom=Bu,Ut.scale=Qs,Ut.attribution=Pd;var rn=Ye.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});rn.addTo=function(s,a){return s.addHandler(a,this),this};var Yr={Events:ct},Ma=se.touch?"touchstart mousedown":"mousedown",Rn=zt.extend({options:{clickTolerance:3},initialize:function(s,a,c,p){j(this,p),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(ae(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ta(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Rn._dragging===this&&this.finishDrag();return}if(!(Rn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Rn._dragging=this,this._preventOutline&&pi(this._element),Sa(),bn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=ka(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=mn(this._element),this._parentScale=qs(c);var p=s.type==="mousedown";ae(document,p?"mousemove":"touchmove",this._onMove,this),ae(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,$e(s),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),de(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Be(document.body,"leaflet-dragging"),this._lastTarget&&(Be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Ca(),Nn();var a=this._moved&&this._moving;this._moving=!1,Rn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ys(s,a,c){var p,_=[1,4,2,8],w,b,z,B,Z,te,le,xe;for(w=0,te=s.length;w<te;w++)s[w]._code=Gn(s[w],a);for(z=0;z<4;z++){for(le=_[z],p=[],w=0,te=s.length,b=te-1;w<te;b=w++)B=s[w],Z=s[b],B._code&le?Z._code&le||(xe=_t(Z,B,le,a,c),xe._code=Gn(xe,a),p.push(xe)):(Z._code&le&&(xe=_t(Z,B,le,a,c),xe._code=Gn(xe,a),p.push(xe)),p.push(B));s=p}return s}function Xs(s,a){var c,p,_,w,b,z,B,Z,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var le=pe([0,0]),xe=Ne(s),Bt=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());Bt<1700&&(le=Js(s));var vt=s.length,xn=[];for(c=0;c<vt;c++){var Zt=pe(s[c]);xn.push(a.project(pe([Zt.lat-le.lat,Zt.lng-le.lng])))}for(z=B=Z=0,c=0,p=vt-1;c<vt;p=c++)_=xn[c],w=xn[p],b=_.y*w.x-w.y*_.x,B+=(_.x+w.x)*b,Z+=(_.y+w.y)*b,z+=b*3;z===0?te=xn[0]:te=[B/z,Z/z];var oo=a.unproject(X(te));return pe([oo.lat+le.lat,oo.lng+le.lng])}function Js(s){for(var a=0,c=0,p=0,_=0;_<s.length;_++){var w=pe(s[_]);a+=w.lat,c+=w.lng,p++}return pe([a/p,c/p])}var eo={__proto__:null,clipPolygon:Ys,polygonCenter:Xs,centroid:Js};function ja(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=$u(s,c),s=Hu(s,c),s}function Va(s,a,c){return Math.sqrt(yn(s,a,c,!0))}function gi(s,a,c){return yn(s,a,c)}function Hu(s,a){var c=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(c);_[0]=_[c-1]=1,to(s,_,a,0,c-1);var w,b=[];for(w=0;w<c;w++)_[w]&&b.push(s[w]);return b}function to(s,a,c,p,_){var w=0,b,z,B;for(z=p+1;z<=_-1;z++)B=yn(s[z],s[p],s[_],!0),B>w&&(b=z,w=B);w>c&&(a[b]=1,to(s,a,c,p,b),to(s,a,c,b,_))}function $u(s,a){for(var c=[s[0]],p=1,_=0,w=s.length;p<w;p++)qu(s[p],s[_])>a&&(c.push(s[p]),_=p);return _<w-1&&c.push(s[w-1]),c}var Fa;function Xr(s,a,c,p,_){var w=p?Fa:Gn(s,c),b=Gn(a,c),z,B,Z;for(Fa=b;;){if(!(w|b))return[s,a];if(w&b)return!1;z=w||b,B=_t(s,a,z,c,_),Z=Gn(B,c),z===w?(s=B,w=Z):(a=B,b=Z)}}function _t(s,a,c,p,_){var w=a.x-s.x,b=a.y-s.y,z=p.min,B=p.max,Z,te;return c&8?(Z=s.x+w*(B.y-s.y)/b,te=B.y):c&4?(Z=s.x+w*(z.y-s.y)/b,te=z.y):c&2?(Z=B.x,te=s.y+b*(B.x-s.x)/w):c&1&&(Z=z.x,te=s.y+b*(z.x-s.x)/w),new q(Z,te,_)}function Gn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function qu(s,a){var c=a.x-s.x,p=a.y-s.y;return c*c+p*p}function yn(s,a,c,p){var _=a.x,w=a.y,b=c.x-_,z=c.y-w,B=b*b+z*z,Z;return B>0&&(Z=((s.x-_)*b+(s.y-w)*z)/B,Z>1?(_=c.x,w=c.y):Z>0&&(_+=b*Z,w+=z*Z)),b=s.x-_,z=s.y-w,p?b*b+z*z:new q(_,w)}function u(s){return!O(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function v(s,a){var c,p,_,w,b,z,B,Z;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=pe([0,0]),le=Ne(s),xe=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());xe<1700&&(te=Js(s));var Bt=s.length,vt=[];for(c=0;c<Bt;c++){var xn=pe(s[c]);vt.push(a.project(pe([xn.lat-te.lat,xn.lng-te.lng])))}for(c=0,p=0;c<Bt-1;c++)p+=vt[c].distanceTo(vt[c+1])/2;if(p===0)Z=vt[0];else for(c=0,w=0;c<Bt-1;c++)if(b=vt[c],z=vt[c+1],_=b.distanceTo(z),w+=_,w>p){B=(w-p)/_,Z=[z.x-B*(z.x-b.x),z.y-B*(z.y-b.y)];break}var Zt=a.unproject(X(Z));return pe([Zt.lat+te.lat,Zt.lng+te.lng])}var I={__proto__:null,simplify:ja,pointToSegmentDistance:Va,closestPointOnSegment:gi,clipSegment:Xr,_getEdgeIntersection:_t,_getBitCode:Gn,_sqClosestPointOnSegment:yn,isFlat:u,_flat:m,polylineCenter:v},F={project:function(s){return new q(s.lng,s.lat)},unproject:function(s){return new ye(s.y,s.x)},bounds:new he([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,p=s.lat*a,_=this.R_MINOR/c,w=Math.sqrt(1-_*_),b=w*Math.sin(p),z=Math.tan(Math.PI/4-p/2)/Math.pow((1-b)/(1+b),w/2);return p=-c*Math.log(Math.max(z,1e-10)),new q(s.lng*a*c,p)},unproject:function(s){for(var a=180/Math.PI,c=this.R,p=this.R_MINOR/c,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/c),b=Math.PI/2-2*Math.atan(w),z=0,B=.1,Z;z<15&&Math.abs(B)>1e-7;z++)Z=_*Math.sin(b),Z=Math.pow((1-Z)/(1+Z),_/2),B=Math.PI/2-2*Math.atan(w*Z)-b,b+=B;return new ye(b*a,s.x*a/c)}},ee={__proto__:null,LonLat:F,Mercator:W,SphericalMercator:Bi},Re=r({},$n,{code:"EPSG:3395",projection:W,transformation:function(){var s=.5/(Math.PI*W.R);return li(s,.5,-s,.5)}()}),rt=r({},$n,{code:"EPSG:4326",projection:F,transformation:li(1/180,1,-1/180,.5)}),Ce=r({},ht,{projection:F,transformation:li(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,p=a.lat-s.lat;return Math.sqrt(c*c+p*p)},infinite:!0});ht.Earth=$n,ht.EPSG3395=Re,ht.EPSG3857=Fr,ht.EPSG900913=la,ht.EPSG4326=rt,ht.Simple=Ce;var Me=zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});we.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=d(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?O(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=d(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qe=Me.extend({initialize:function(s,a){j(this,a),this._layers={};var c,p;if(s)for(c=0,p=s.length;c<p;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[s]&&p[s].apply(p,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Yi=function(s,a){return new qe(s,a)},et=qe.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),qe.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),qe.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Te;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),no=function(s,a){return new et(s,a)},Zn=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){j(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,a){var c=this.options,p=c[a+"Size"];typeof p=="number"&&(p=[p,p]);var _=X(p),w=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function BT(s){return new Zn(s)}var za=Zn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof za.imagePath!="string"&&(za.imagePath=this._detectIconPath()),(this.options.imagePath||za.imagePath)+Zn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,p,_){var w=p.exec(c);return w&&w[_]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ie("div","leaflet-default-icon-path",document.body),a=$i(s,"background-image")||$i(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Og=rn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Rn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=mn(a._icon),b=c.getPixelBounds(),z=c.getPixelOrigin(),B=ve(b.min._subtract(z).add(_),b.max._subtract(z).subtract(_));if(!B.contains(w)){var Z=X((Math.max(B.max.x,w.x)-B.max.x)/(b.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(b.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(b.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(b.min.y-B.min.y)).multiplyBy(p);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),de(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=M(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,p=mn(a._icon),_=a._map.layerPointToLatLng(p);c&&de(c,p),a._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Gu=Me.extend({options:{icon:new za,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){j(this,a),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),_e(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(c,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(_e(_,a),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&de(this._icon,s),this._shadow&&de(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Og)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Og(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Xe(this._icon,s),this._shadow&&Xe(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),p=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function WT(s,a){return new Gu(s,a)}var Xi=Me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return j(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zu=Xi.extend({options:{fill:!0,radius:10},initialize:function(s,a){j(this,a),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return Xi.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),p=[s+c,a+c];this._pxBounds=new he(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function HT(s,a){return new Zu(s,a)}var Sd=Zu.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),j(this,a),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Te(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Xi.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===$n.distance){var _=Math.PI/180,w=this._mRadius/$n.R/_,b=c.project([a+w,s]),z=c.project([a-w,s]),B=b.add(z).divideBy(2),Z=c.unproject(B).lat,te=Math.acos((Math.cos(w*_)-Math.sin(a*_)*Math.sin(Z*_))/(Math.cos(a*_)*Math.cos(Z*_)))/_;(isNaN(te)||te===0)&&(te=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([Z,s-te]).x,this._radiusY=B.y-b.y}else{var le=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(le).x}this._updateBounds()}});function $T(s,a,c){return new Sd(s,a,c)}var _i=Xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){j(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,p=yn,_,w,b=0,z=this._parts.length;b<z;b++)for(var B=this._parts[b],Z=1,te=B.length;Z<te;Z++){_=B[Z-1],w=B[Z];var le=p(s,_,w,!0);le<a&&(a=le,c=p(s,_,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=pe(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Te,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),p=0,_=s.length;p<_;p++)c?(a[p]=pe(s[p]),this._bounds.extend(a[p])):a[p]=this._convertLatLngs(s[p]);return a},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new q(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var p=s[0]instanceof ye,_=s.length,w,b;if(p){for(b=[],w=0;w<_;w++)b[w]=this._map.latLngToLayerPoint(s[w]),c.extend(b[w]);a.push(b)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,p,_,w,b,z,B;for(c=0,_=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],p=0,b=B.length;p<b-1;p++)z=Xr(B[p],B[p+1],s,p,!0),z&&(a[_]=a[_]||[],a[_].push(z[0]),(z[1]!==B[p+1]||p===b-2)&&(a[_].push(z[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,p=s.length;c<p;c++)s[c]=ja(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,p,_,w,b,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],p=0,b=z.length,_=b-1;p<b;_=p++)if(!(!a&&p===0)&&Va(s,z[_],z[p])<=B)return!0;return!1}});function qT(s,a){return new _i(s,a)}_i._flat=m;var io=_i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=_i.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){_i.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(s=new he(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=Ys(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,p,_,w,b,z,B,Z;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],b=0,Z=c.length,z=Z-1;b<Z;z=b++)p=c[b],_=c[z],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(a=!a);return a||_i.prototype._containsPoint.call(this,s,!0)}});function GT(s,a){return new io(s,a)}var vi=et.extend({initialize:function(s,a){j(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=O(s)?s:s.features,c,p,_;if(a){for(c=0,p=a.length;c<p;c++)_=a[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var b=Ku(s,w);return b?(b.feature=Xu(s),b.defaultOptions=b.options,this.resetStyle(b),w.onEachFeature&&w.onEachFeature(s,b),this.addLayer(b)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Ku(s,a){var c=s.type==="Feature"?s.geometry:s,p=c?c.coordinates:null,_=[],w=a&&a.pointToLayer,b=a&&a.coordsToLatLng||Cd,z,B,Z,te;if(!p&&!c)return null;switch(c.type){case"Point":return z=b(p),Dg(w,s,z,a);case"MultiPoint":for(Z=0,te=p.length;Z<te;Z++)z=b(p[Z]),_.push(Dg(w,s,z,a));return new et(_);case"LineString":case"MultiLineString":return B=Qu(p,c.type==="LineString"?0:1,b),new _i(B,a);case"Polygon":case"MultiPolygon":return B=Qu(p,c.type==="Polygon"?1:2,b),new io(B,a);case"GeometryCollection":for(Z=0,te=c.geometries.length;Z<te;Z++){var le=Ku({geometry:c.geometries[Z],type:"Feature",properties:s.properties},a);le&&_.push(le)}return new et(_);case"FeatureCollection":for(Z=0,te=c.features.length;Z<te;Z++){var xe=Ku(c.features[Z],a);xe&&_.push(xe)}return new et(_);default:throw new Error("Invalid GeoJSON object.")}}function Dg(s,a,c,p){return s?s(a,c):new Gu(c,p&&p.markersInheritOptions&&p)}function Cd(s){return new ye(s[1],s[0],s[2])}function Qu(s,a,c){for(var p=[],_=0,w=s.length,b;_<w;_++)b=a?Qu(s[_],a-1,c):(c||Cd)(s[_]),p.push(b);return p}function Ad(s,a){return s=pe(s),s.alt!==void 0?[E(s.lng,a),E(s.lat,a),E(s.alt,a)]:[E(s.lng,a),E(s.lat,a)]}function Yu(s,a,c,p){for(var _=[],w=0,b=s.length;w<b;w++)_.push(a?Yu(s[w],u(s[w])?0:a-1,c,p):Ad(s[w],p));return!a&&c&&_.length>0&&_.push(_[0].slice()),_}function ro(s,a){return s.feature?r({},s.feature,{geometry:a}):Xu(a)}function Xu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var kd={toGeoJSON:function(s){return ro(this,{type:"Point",coordinates:Ad(this.getLatLng(),s)})}};Gu.include(kd),Sd.include(kd),Zu.include(kd),_i.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=Yu(this._latlngs,a?1:0,!1,s);return ro(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),io.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),p=Yu(this._latlngs,c?2:a?1:0,!0,s);return a||(p=[p]),ro(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),qe.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),ro(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(c)p.push(w.geometry);else{var b=Xu(w);b.type==="FeatureCollection"?p.push.apply(p,b.features):p.push(b)}}}),c?ro(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Mg(s,a){return new vi(s,a)}var ZT=Mg,Ju=Me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=Ne(a),j(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&di(this._image),this},bringToBack:function(){return this._map&&qi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ne(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Ie("img");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=x,a.onmousemove=x,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;qn(this._image,c,a)},_reset:function(){var s=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();de(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),KT=function(s,a,c){return new Ju(s,a,c)},jg=Ju.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Ie("video");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=x,a.onmousemove=x,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),p=[],_=0;_<c.length;_++)p.push(c[_].src);this._url=c.length>0?p:[a.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var b=Ie("source");b.src=this._url[w],a.appendChild(b)}}});function QT(s,a,c){return new jg(s,a,c)}var Vg=Ju.extend({_initImage:function(){var s=this._image=this._url;_e(s,"leaflet-image-layer"),this._zoomAnimated&&_e(s,"leaflet-zoom-animated"),this.options.className&&_e(s,this.options.className),s.onselectstart=x,s.onmousemove=x}});function YT(s,a,c){return new Vg(s,a,c)}var Kn=Me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof ye||O(s))?(this._latlng=pe(s),j(this,a)):(j(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Xe(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(l(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&di(this._container),this},bringToBack:function(){return this._map&&qi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var p in c)if(c[p]._map){a=c[p];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?de(this._container,s.add(c)):a=a.add(s).add(c);var p=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});we.include({_initOverlay:function(s,a,c,p){var _=a;return _ instanceof s||(_=new s(p).setContent(a)),c&&_.setLatLng(c),_}}),Me.include({_initOverlay:function(s,a,c,p){var _=c;return _ instanceof s?(j(_,p),_._source=this):(_=a&&!p?a:new s(p,this),_.setContent(c)),_}});var ec=Kn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Kn.prototype.openOn.call(this,s)},onAdd:function(s){Kn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xi||this._source.on("preclick",vn))},onRemove:function(s){Kn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xi||this._source.off("preclick",vn))},getEvents:function(){var s=Kn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Ie("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ie("div",s+"-content-wrapper",a);if(this._contentNode=Ie("div",s+"-content",c),Ki(a),Zi(this._contentNode),ae(a,"contextmenu",vn),this._tipContainer=Ie("div",s+"-tip-container",a),this._tip=Ie("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ie("a",s+"-close-button",a);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ae(p,"click",function(_){$e(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(a.height=_+"px",_e(s,w)):Be(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();de(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt($i(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,p=this._containerWidth,_=new q(this._containerLeft,-c-this._containerBottom);_._add(mn(this._container));var w=s.layerPointToContainerPoint(_),b=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||b),B=X(this.options.autoPanPaddingBottomRight||b),Z=s.getSize(),te=0,le=0;w.x+p+B.x>Z.x&&(te=w.x+p-Z.x+B.x),w.x-te-z.x<0&&(te=w.x-z.x),w.y+c+B.y>Z.y&&(le=w.y+c-Z.y+B.y),w.y-le-z.y<0&&(le=w.y-z.y),(te||le)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,le]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),XT=function(s,a){return new ec(s,a)};we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(s,a,c){return this._initOverlay(ec,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Me.include({bindPopup:function(s,a){return this._popup=this._initOverlay(ec,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){nn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof Xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var tc=Kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Kn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Kn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Kn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ie("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),b=p.layerPointToContainerPoint(s),z=this.options.direction,B=_.offsetWidth,Z=_.offsetHeight,te=X(this.options.offset),le=this._getAnchor();z==="top"?(a=B/2,c=Z):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=Z/2):z==="right"?(a=0,c=Z/2):z==="left"?(a=B,c=Z/2):b.x<w.x?(z="right",a=0,c=Z/2):(z="left",a=B+(te.x+le.x)*2,c=Z/2),s=s.subtract(X(a,c,!0)).add(te).add(le),Be(_,"leaflet-tooltip-right"),Be(_,"leaflet-tooltip-left"),Be(_,"leaflet-tooltip-top"),Be(_,"leaflet-tooltip-bottom"),_e(_,"leaflet-tooltip-"+z),de(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Xe(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),JT=function(s,a){return new tc(s,a)};we.include({openTooltip:function(s,a,c){return this._initOverlay(tc,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Me.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(ae(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ae(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,p;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(a)}});var Fg=Zn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Qr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=X(c.bgPos);a.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function eI(s){return new Fg(s)}Zn.Default=za;var Ua=Me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){j(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof q?s:new q(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),p=0,_=a.length,w;p<_;p++)w=a[p].style.zIndex,a[p]!==this._container&&w&&(c=s(c,+w));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Xe(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);Xe(_.el,w),w<1?a=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(je(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=a,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),x(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var p=a.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,p){var _=Math.floor(s/2),w=Math.floor(a/2),b=c-1,z=new q(+_,+w);z.z=+b;var B=this._tileCoordsToKey(z),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),b>p?this._retainParent(_,w,b,p):!1)},_retainChildren:function(s,a,c,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*a;w<2*a+2;w++){var b=new q(_,w);b.z=c+1;var z=this._tileCoordsToKey(b),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<p&&this._retainChildren(_,w,c+1,p)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,p){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var p=this._map.getZoomScale(c,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?qn(s.el,_,p):de(s.el,_)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],p).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],p).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],p).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),p=a.getZoomScale(c,this._tileZoom),_=a.project(s,this._tileZoom).floor(),w=a.getSize().divideBy(p*2);return new he(_.subtract(w),_.add(w))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),b=[],z=this.options.keepBuffer,B=new he(_.getBottomLeft().subtract([z,-z]),_.getTopRight().add([z,-z]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var te=this._tiles[Z].coords;(te.z!==this._tileZoom||!B.contains(new q(te.x,te.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var le=_.min.y;le<=_.max.y;le++)for(var xe=_.min.x;xe<=_.max.x;xe++){var Bt=new q(xe,le);if(Bt.z=this._tileZoom,!!this._isValidTile(Bt)){var vt=this._tiles[this._tileCoordsToKey(Bt)];vt?vt.current=!0:b.push(Bt)}}if(b.sort(function(Zt,oo){return Zt.distanceTo(w)-oo.distanceTo(w)}),b.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xn=document.createDocumentFragment();for(xe=0;xe<b.length;xe++)this._addTile(b[xe],xn);this._level.el.appendChild(xn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ne(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),p=s.scaleBy(c),_=p.add(c),w=a.unproject(p,s.z),b=a.unproject(_,s.z);return[w,b]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Te(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(je(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){_e(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=x,s.onmousemove=x,se.ielt9&&this.options.opacity<1&&Xe(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&M(l(this._tileReady,this,s,null,_)),de(_,c),this._tiles[p]={el:_,coords:s,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var p=this._tileCoordsToKey(s);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Xe(c.el,0),V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(_e(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new q(this._wrapX?y(s.x,this._wrapX):s.x,this._wrapY?y(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new he(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function tI(s){return new Ua(s)}var so=Ua.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=j(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return ae(c,"load",l(this._tileOnLoad,this,a,c)),ae(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var p=this.options.errorTileUrl;p&&a.getAttribute("src")!==p&&(a.src=p),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(s=a-s),s+p},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=x,a.onerror=x,!a.complete)){a.src=Y;var c=this._tiles[s].coords;je(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",Y),Ua.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Ua.prototype._tileReady.call(this,s,a,c)}});function zg(s,a){return new so(s,a)}var Ug=so.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var p in a)p in this.options||(c[p]=a[p]);a=j(this,a);var _=a.detectRetina&&se.retina?2:1,w=this.getTileSize();c.width=w.x*_,c.height=w.y*_,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,so.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,p=ve(c.project(a[0]),c.project(a[1])),_=p.min,w=p.max,b=(this._wmsVersion>=1.3&&this._crs===rt?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),z=so.prototype.getTileUrl.call(this,s);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function nI(s,a){return new Ug(s,a)}so.WMS=Ug,zg.wms=nI;var yi=Me.extend({options:{padding:.1},initialize:function(s){j(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),w=p.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?qn(this._container,w,c):de(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bg=yi.extend({options:{tolerance:0},getEvents:function(){var s=yi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ae(s,"mousemove",this._onMouseMove,this),ae(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,je(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),p=se.retina?2:1;de(a,s.min),a.width=p*c.x,a.height=p*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,p=a.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],p,_;for(_=0;_<a.length;_++){if(p=Number(a[_]),isNaN(p))return;c.push(p)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,p,_,w,b=s._parts,z=b.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(p=0,_=b[c].length;p<_;p++)w=b[c][p],B[p?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(a.x,a.y/_,p,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Be(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(_e(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,p=a.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,p=a.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function Wg(s){return se.canvas?new Bg(s):null}var Ba=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),iI={_initContainer:function(){this._container=Ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=Ba("shape");_e(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=Ba("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;je(a),s.removeInteractiveTarget(a),delete this._layers[d(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(a||(a=s._stroke=Ba("stroke")),_.appendChild(a),a.weight=p.weight+"px",a.color=p.color,a.opacity=p.opacity,p.dashArray?a.dashStyle=O(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=p.lineCap.replace("butt","flat"),a.joinstyle=p.lineJoin):a&&(_.removeChild(a),s._stroke=null),p.fill?(c||(c=s._fill=Ba("fill")),_.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(_.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),p=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){di(s._container)},_bringToBack:function(s){qi(s._container)}},nc=se.vml?Ba:bs,Wa=yi.extend({_initContainer:function(){this._container=nc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),de(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=nc("path");s.options.className&&_e(a,s.options.className),s.options.interactive&&_e(a,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,ua(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||c,_="a"+c+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(s,w)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){di(s._path)},_bringToBack:function(s){qi(s._path)}});se.vml&&Wa.include(iI);function Hg(s){return se.svg||se.vml?new Wa(s):null}we.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&Wg(s)||Hg(s)}});var $g=io.extend({initialize:function(s,a){io.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ne(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function rI(s,a){return new $g(s,a)}Wa.create=nc,Wa.pointsToPath=ua,vi.geometryToLayer=Ku,vi.coordsToLatLng=Cd,vi.coordsToLatLngs=Qu,vi.latLngToCoords=Ad,vi.latLngsToCoords=Yu,vi.getFeature=ro,vi.asFeature=Xu,we.mergeOptions({boxZoom:!0});var qg=rn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),Sa(),this._startPoint=this._map.mouseEventToContainerPoint(s),ae(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ie("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new he(this._point,this._startPoint),c=a.getSize();de(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(je(this._box),Be(this._container,"leaflet-crosshair")),Nn(),Ca(),De(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});we.addInitHook("addHandler","boxZoom",qg),we.mergeOptions({doubleClickZoom:!0});var Gg=rn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),p=a.options.zoomDelta,_=s.originalEvent.shiftKey?c-p:c+p;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(s.containerPoint,_)}});we.addInitHook("addHandler","doubleClickZoom",Gg),we.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zg=rn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Rn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Be(this._map._container,"leaflet-grab"),Be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ne(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-a+c)%s+a-c,w=(p+a+c)%s-a-c,b=Math.abs(_+c)<Math.abs(w+c)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(s){var a=this._map,c=a.options,p=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),p)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,b=c.easeLinearity,z=_.multiplyBy(b/w),B=z.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(Z/B),le=Z/(c.inertiaDeceleration*b),xe=te.multiplyBy(-le/2).round();!xe.x&&!xe.y?a.fire("moveend"):(xe=a._limitOffset(xe,a.options.maxBounds),M(function(){a.panBy(xe,{duration:le,easeLinearity:b,noMoveStart:!0,animate:!0})}))}}});we.addInitHook("addHandler","dragging",Zg),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kg=rn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ae(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,p=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,p,_;for(p=0,_=c.left.length;p<_;p++)a[c.left[p]]=[-1*s,0];for(p=0,_=c.right.length;p<_;p++)a[c.right[p]]=[s,0];for(p=0,_=c.down.length;p<_;p++)a[c.down[p]]=[0,s];for(p=0,_=c.up.length;p<_;p++)a[c.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,p,_;for(p=0,_=c.zoomIn.length;p<_;p++)a[c.zoomIn[p]]=s;for(p=0,_=c.zoomOut.length;p<_;p++)a[c.zoomOut[p]]=-s},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,p;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[a],s.shiftKey&&(p=X(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(X(p),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(_)}else c.panBy(p)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;nn(s)}}});we.addInitHook("addHandler","keyboard",Kg),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Qg=rn.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=zu(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),nn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=c?Math.ceil(_/c)*c:_,b=s._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,b&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+b):s.setZoomAround(this._lastMousePos,a+b))}});we.addInitHook("addHandler","scrollWheelZoom",Qg);var sI=600;we.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Yg=rn.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",$e),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),sI),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){De(document,"touchend",$e),De(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});we.addInitHook("addHandler","tapHold",Yg),we.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Xg=rn.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),p=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),$e(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),p=a.mouseEventToContainerPoint(s.touches[1]),_=c.distanceTo(p)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var b=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(b,this,!0),$e(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});we.addInitHook("addHandler","touchZoom",Xg),we.BoxZoom=qg,we.DoubleClickZoom=Gg,we.Drag=Zg,we.Keyboard=Kg,we.ScrollWheelZoom=Qg,we.TapHold=Yg,we.TouchZoom=Xg,n.Bounds=he,n.Browser=se,n.CRS=ht,n.Canvas=Bg,n.Circle=Sd,n.CircleMarker=Zu,n.Class=Ye,n.Control=Gt,n.DivIcon=Fg,n.DivOverlay=Kn,n.DomEvent=Uu,n.DomUtil=Vu,n.Draggable=Rn,n.Evented=zt,n.FeatureGroup=et,n.GeoJSON=vi,n.GridLayer=Ua,n.Handler=rn,n.Icon=Zn,n.ImageOverlay=Ju,n.LatLng=ye,n.LatLngBounds=Te,n.Layer=Me,n.LayerGroup=qe,n.LineUtil=I,n.Map=we,n.Marker=Gu,n.Mixin=Yr,n.Path=Xi,n.Point=q,n.PolyUtil=eo,n.Polygon=io,n.Polyline=_i,n.Popup=ec,n.PosAnimation=Oa,n.Projection=ee,n.Rectangle=$g,n.Renderer=yi,n.SVG=Wa,n.SVGOverlay=Vg,n.TileLayer=so,n.Tooltip=tc,n.Transformation=Wi,n.Util=R,n.VideoOverlay=jg,n.bind=l,n.bounds=ve,n.canvas=Wg,n.circle=$T,n.circleMarker=HT,n.control=Ut,n.divIcon=eI,n.extend=r,n.featureGroup=no,n.geoJSON=Mg,n.geoJson=ZT,n.gridLayer=tI,n.icon=BT,n.imageOverlay=KT,n.latLng=pe,n.latLngBounds=Ne,n.layerGroup=Yi,n.map=Zs,n.marker=WT,n.point=X,n.polygon=GT,n.polyline=qT,n.popup=XT,n.rectangle=rI,n.setOptions=j,n.stamp=d,n.svg=Hg,n.svgOverlay=YT,n.tileLayer=zg,n.tooltip=JT,n.transformation=li,n.version=i,n.videoOverlay=QT;var oI=window.L;n.noConflict=function(){return window.L=oI,this},window.L=n})})(zp,zp.exports);var oa=zp.exports;const wu=Uy(oa);function wd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Ed(t,e){return e==null?function(i,r){const o=H.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=H.useRef();o.current||(o.current=t(i,r));const l=H.useRef(i),{instance:h}=o.current;return H.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,r]),o}}function zT(t,e){H.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function UT(t){return function(n){const i=Ng(),r=t(xd(n,i),i);return DT(i.map,n.attribution),Rg(r.current,n.eventHandlers),zT(r.current,i),r}}function KL(t,e){const n=H.useRef();H.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function QL(t){return function(n){const i=Ng(),r=t(xd(n,i),i);return Rg(r.current,n.eventHandlers),zT(r.current,i),KL(r.current,n),r}}function YL(t,e){const n=Ed(t,e),i=UT(n);return FT(i)}function XL(t,e){const n=Ed(t),i=ZL(n,e);return qL(i)}function JL(t,e){const n=Ed(t,e),i=QL(n);return FT(i)}function e2(t,e){const n=Ed(t,e),i=UT(n);return GL(i)}function t2(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}const n2=JL(function({center:e,children:n,...i},r){const o=new oa.Circle(e,i);return wd(o,MT(r,{overlayContainer:o}))},WL);function Up(){return Up=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Up.apply(this,arguments)}function i2({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:h,whenReady:d,zoom:g,...y},x){const[E]=H.useState({className:r,id:o,style:h}),[A,D]=H.useState(null);H.useImperativeHandle(x,()=>(A==null?void 0:A.map)??null,[A]);const j=H.useCallback(k=>{if(k!==null&&A===null){const P=new oa.Map(k,y);n!=null&&g!=null?P.setView(n,g):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),D($L(P))}},[]);H.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const U=A?Il.createElement(VT,{value:A},i):l??null;return Il.createElement("div",Up({},E,{ref:j}),U)}const r2=H.forwardRef(i2),gf=YL(function({position:e,...n},i){const r=new oa.Marker(e,n);return wd(r,MT(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),_f=XL(function(e,n){const i=new oa.Popup(e,n.overlayContainer);return wd(i,n)},function(e,n,{position:i},r){H.useEffect(function(){const{instance:l}=e;function h(g){g.popup===l&&(l.update(),r(!0))}function d(g){g.popup===l&&r(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),s2=e2(function({url:e,...n},i){const r=new oa.TileLayer(e,xd(n,i));return wd(r,i)},function(e,n,i){t2(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),o2=[16.8661,96.1951],a2=13,l2="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",u2='&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>';delete wu.Icon.Default.prototype._getIconUrl;wu.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const c2=wu.divIcon({className:"",html:`<div style="
    width:36px; height:36px;
    background:#FF5A1F;
    border-radius:50% 50% 50% 0;
    transform:rotate(-45deg);
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.3);
    display:flex; align-items:center; justify-content:center;
  ">
    <span style="transform:rotate(45deg); font-size:16px;"></span>
  </div>`,iconSize:[36,36],iconAnchor:[18,36]}),h2=wu.divIcon({className:"",html:`<div style="
    width:32px; height:32px;
    background:#22c55e;
    border-radius:50%;
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
    display:flex; align-items:center; justify-content:center;
    font-size:14px;
  "></div>`,iconSize:[32,32],iconAnchor:[16,16]}),d2=wu.divIcon({className:"",html:`<div style="
    width:32px; height:32px;
    background:#ef4444;
    border-radius:50%;
    border:3px solid white;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
    display:flex; align-items:center; justify-content:center;
    font-size:14px;
  "></div>`,iconSize:[32,32],iconAnchor:[16,16]});function aa({riders:t=[],pickupPoint:e=null,dropoffPoint:n=null,height:i="100%",zoom:r=a2,center:o=o2}){return f.jsxs(r2,{center:o,zoom:r,style:{height:i,width:"100%",borderRadius:"1rem"},zoomControl:!1,children:[f.jsx(s2,{url:l2,attribution:u2}),t.map(l=>l.currentLocation&&f.jsx(gf,{position:[l.currentLocation.lat,l.currentLocation.lng],icon:c2,children:f.jsx(_f,{children:f.jsxs("div",{className:"text-xs",children:[f.jsx("p",{className:"font-bold",children:l.name}),f.jsx("p",{className:"text-gray-500",children:l.isAvailable?" Available":" Busy"}),f.jsxs("p",{children:[" ",l.rating]})]})})},l.id)),e&&f.jsxs(f.Fragment,{children:[f.jsx(gf,{position:[e.lat,e.lng],icon:h2,children:f.jsx(_f,{children:f.jsxs("span",{className:"text-xs font-bold",children:[" ",e.address]})})}),f.jsx(n2,{center:[e.lat,e.lng],radius:200,pathOptions:{color:"#22c55e",fillColor:"#22c55e",fillOpacity:.1}})]}),n&&f.jsx(gf,{position:[n.lat,n.lng],icon:d2,children:f.jsx(_f,{children:f.jsxs("span",{className:"text-xs font-bold",children:[" ",n.address]})})})]})}const Lh={pending:"",accepted:"",picked_up:"",delivered:"",cancelled:""},Lg={pending:"bg-yellow-100 text-yellow-700",accepted:"bg-blue-100 text-blue-700",picked_up:"bg-purple-100 text-purple-700",delivered:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"};function f2({order:t,onClick:e}){const n=i=>{const r=Math.floor((Date.now()-i)/6e4);return r<60?`${r} `:`${Math.floor(r/60)} `};return f.jsxs("div",{onClick:e,className:"card mb-3 cursor-pointer active:scale-[0.98] transition-transform animate-slide-up",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-gray-400 font-body",children:["#",t.id]}),f.jsxs("p",{className:"font-display font-bold text-base text-gray-800",children:[t.price.toLocaleString()," "]})]}),f.jsx("span",{className:`status-badge ${Lg[t.status]}`,children:Lh[t.status]})]}),f.jsxs("div",{className:"space-y-2 mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 flex-shrink-0"}),f.jsx("p",{className:"text-xs text-gray-600 font-body truncate",children:t.pickup.address})]}),f.jsx("div",{className:"ml-1 w-px h-3 bg-gray-200 ml-[3px]"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 flex-shrink-0"}),f.jsx("p",{className:"text-xs text-gray-600 font-body truncate",children:t.dropoff.address})]})]}),f.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[f.jsx("p",{className:"text-xs text-gray-400",children:n(t.createdAt)}),f.jsxs("p",{className:"text-xs text-gray-500",children:[t.distance," km"]})]})]})}const In=[{id:"ORD001",customerId:"user1",riderId:"rider1",status:"accepted",pickup:{address:" ",lat:16.8409,lng:96.1353},dropoff:{address:" ",lat:16.82,lng:96.16},price:3500,distance:4.2,note:"",createdAt:new Date(Date.now()-10*60*1e3)},{id:"ORD002",customerId:"user2",riderId:null,status:"pending",pickup:{address:" ",lat:16.85,lng:96.12},dropoff:{address:" ",lat:16.87,lng:96.19},price:5e3,distance:6.8,note:"",createdAt:new Date(Date.now()-2*60*1e3)},{id:"ORD003",customerId:"user3",riderId:"rider2",status:"delivered",pickup:{address:" ",lat:16.83,lng:96.17},dropoff:{address:" ",lat:16.9,lng:96.21},price:4200,distance:5.1,note:"",createdAt:new Date(Date.now()-60*60*1e3)}],ki=[{id:"rider1",name:"",phone:"09250001111",isOnline:!0,isAvailable:!1,currentLocation:{lat:16.845,lng:96.14},rating:4.8,totalDeliveries:142,vehicleType:"bike"},{id:"rider2",name:"",phone:"09250002222",isOnline:!0,isAvailable:!0,currentLocation:{lat:16.86,lng:96.16},rating:4.6,totalDeliveries:98,vehicleType:"bike"},{id:"rider3",name:"",phone:"09250003333",isOnline:!1,isAvailable:!1,currentLocation:{lat:16.83,lng:96.18},rating:4.9,totalDeliveries:210,vehicleType:"car"}];function p2(){const{user:t}=Vr(),e=dn(),n=In.find(r=>r.status==="accepted"),i=ki.filter(r=>r.isOnline);return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[f.jsxs("div",{className:"px-4 pt-4 pb-2 animate-slide-up",children:[f.jsx("p",{className:"text-gray-400 text-xs font-body",children:" "}),f.jsx("h2",{className:"text-xl font-display font-black text-dark",children:t==null?void 0:t.name})]}),f.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.05s"},children:f.jsxs("div",{className:"h-52 rounded-3xl overflow-hidden shadow-card relative",children:[f.jsx(aa,{riders:i,height:"100%"}),f.jsxs("div",{className:"absolute top-3 left-3 bg-white rounded-xl px-3 py-1.5 shadow-sm flex items-center gap-1.5",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),f.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[i.length," Riders Online"]})]})]})}),f.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.1s"},children:f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>e("/customer/order"),className:"bg-primary-500 rounded-3xl p-4 text-left shadow-primary active:scale-95 transition-all",children:[f.jsx("span",{className:"text-3xl block mb-2",children:""}),f.jsx("p",{className:"text-white font-display font-bold text-sm",children:"Order "}),f.jsx("p",{className:"text-primary-200 text-xs font-body",children:""})]}),f.jsxs("button",{onClick:()=>e("/customer/track"),className:"bg-white rounded-3xl p-4 text-left shadow-card active:scale-95 transition-all",children:[f.jsx("span",{className:"text-3xl block mb-2",children:""}),f.jsx("p",{className:"text-dark font-display font-bold text-sm",children:"Track Order"}),f.jsx("p",{className:"text-gray-400 text-xs font-body",children:""})]})]})}),n&&f.jsxs("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.15s"},children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:"Active Order"}),f.jsxs("div",{className:"bg-primary-500 rounded-3xl p-4 text-white shadow-primary",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:["#",n.id]}),f.jsx("span",{className:"text-xs",children:" Rider "})]}),f.jsxs("p",{className:"text-xs text-primary-200 mb-1",children:[" ",n.pickup.address]}),f.jsxs("p",{className:"text-xs text-primary-200",children:[" ",n.dropoff.address]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20 flex justify-between",children:[f.jsxs("span",{className:"text-sm font-display font-bold",children:[n.price.toLocaleString()," "]}),f.jsx("button",{onClick:()=>e("/customer/track"),className:"text-xs bg-white text-primary-500 font-bold px-3 py-1 rounded-full",children:"Track "})]})]})]}),f.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.2s"},children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Recent Orders"}),f.jsx("div",{className:"stagger",children:In.slice(0,3).map(r=>f.jsx(f2,{order:r,onClick:()=>e("/customer/track")},r.id))})]})]}),f.jsx(Ui,{})]})}const m2="8485367356:AAEsrFAwoC6uNlLUdvCvMUmZ6gG3E-m3zCQ",g2="-1003210175584",_2=`https://api.telegram.org/bot${m2}`;async function v2(t,e,n={}){try{const r=await(await fetch(`${_2}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t,text:e,parse_mode:"HTML",...n})})).json();if(!r.ok)throw new Error(r.description);return r}catch(i){return console.error("Telegram sendMessage error:",i),null}}async function y2(t){const e=`
 <b>Order  !</b>

 <b>Order #${t.id}</b>

 Customer: ${t.customerId}
 From: ${t.pickup.address}
 To: ${t.dropoff.address}
 Price: ${t.price.toLocaleString()} 
 Distance: ${t.distance} km
 Time: ${new Date().toLocaleString("my-MM")}

 Status: <b>Pending - Rider </b>
  `.trim();return await v2(g2,e,{reply_markup:{inline_keyboard:[[{text:" Dashboard ",url:"https://gobike.mm/admin"}]]}})}const Vy=[{address:" ",lat:16.8409,lng:96.1353},{address:" ",lat:16.85,lng:96.12},{address:" ",lat:16.82,lng:96.16},{address:" ",lat:16.87,lng:96.19},{address:" ",lat:16.88,lng:96.11},{address:" ",lat:16.86,lng:96.13},{address:" ",lat:16.89,lng:96.15},{address:" ",lat:16.81,lng:96.17},{address:" ",lat:16.79,lng:96.18},{address:" ",lat:16.91,lng:96.16},{address:" ",lat:16.87,lng:96.14},{address:" ",lat:16.83,lng:96.15},{address:" ",lat:16.84,lng:96.125},{address:" ",lat:16.9,lng:96.09},{address:" ",lat:16.855,lng:96.145}],Fy=[{value:"document",label:" "},{value:"food",label:" "},{value:"clothes",label:" "},{value:"medicine",label:" "},{value:"electronic",label:" "},{value:"other",label:" "}],x2=(t,e)=>{if(!t||!e)return 0;const n=Math.sqrt(Math.pow((t.lat-e.lat)*111,2)+Math.pow((t.lng-e.lng)*111,2));return Math.round(n*800+1500)};function w2(){var C;const t=dn(),{user:e}=Vr(),[n,i]=H.useState(1),[r,o]=H.useState(null),[l,h]=H.useState(null),[d,g]=H.useState(""),[y,x]=H.useState(""),[E,A]=H.useState((e==null?void 0:e.phone)||""),[D,j]=H.useState(""),[U,k]=H.useState(!1),[P,O]=H.useState(!1),$=x2(r,l),Y=async()=>{k(!0);try{const T=await kL(vT(Vi,"orders"),{customerId:e.uid,customerName:e.name,customerPhone:E,itemType:d,itemValue:Number(y),pickup:{address:r.address,lat:r.lat,lng:r.lng},dropoff:{address:l.address,lat:l.lat,lng:l.lng},deliveryFee:$,note:D,status:"pending",riderId:null,riderName:null,createdAt:Rh(),updatedAt:Rh()});await y2({id:T.id,customerId:e.uid,customerName:e.name,customerPhone:E,pickup:r,dropoff:l,price:$,itemType:d,note:D}),O(!0),setTimeout(()=>t("/customer"),2500)}catch{alert("Order   ")}finally{k(!1)}};if(P)return f.jsxs("div",{className:"min-h-screen bg-surface flex items-center justify-center flex-col gap-4 px-6",children:[f.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-4xl animate-bounce",children:""}),f.jsx("h2",{className:"text-2xl font-display font-black text-dark",children:"Order !"}),f.jsx("p",{className:"text-gray-400 text-sm text-center font-body",children:"Rider   "}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),f.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),f.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]});const J=["","",""];return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Order "}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-28",children:[f.jsxs("div",{className:"px-4 py-4",children:[f.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(T=>f.jsxs("div",{className:"flex items-center flex-1",children:[f.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold transition-all
                  ${n>=T?"bg-primary-500 text-white":"bg-gray-200 text-gray-400"}`,children:T}),T<3&&f.jsx("div",{className:`flex-1 h-1 mx-1 rounded transition-all ${n>T?"bg-primary-500":"bg-gray-200"}`})]},T))}),f.jsx("div",{className:"flex justify-between mt-1",children:J.map(T=>f.jsx("span",{className:"text-[10px] text-gray-400",children:T},T))})]}),f.jsx("div",{className:"px-4 mb-4",children:f.jsx("div",{className:"h-44 rounded-3xl overflow-hidden shadow-card",children:f.jsx(aa,{pickupPoint:r,dropoffPoint:l,height:"100%"})})}),n===1&&f.jsxs("div",{className:"px-4 animate-slide-up space-y-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:" "}),f.jsx("div",{className:"space-y-2",children:Vy.map(T=>f.jsx("button",{onClick:()=>o(T),className:`w-full card text-left active:scale-[0.98] transition-all
                      ${(r==null?void 0:r.address)===T.address?"border-2 border-primary-500 bg-primary-50":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsx("span",{className:"text-sm font-body text-gray-700",children:T.address}),(r==null?void 0:r.address)===T.address&&f.jsx("span",{className:"ml-auto text-primary-500",children:""})]})},T.address))})]}),r&&f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:" "}),f.jsx("div",{className:"space-y-2",children:Vy.filter(T=>T.address!==(r==null?void 0:r.address)).map(T=>f.jsx("button",{onClick:()=>h(T),className:`w-full card text-left active:scale-[0.98] transition-all
                        ${(l==null?void 0:l.address)===T.address?"border-2 border-primary-500 bg-primary-50":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsx("span",{className:"text-sm font-body text-gray-700",children:T.address}),(l==null?void 0:l.address)===T.address&&f.jsx("span",{className:"ml-auto text-primary-500",children:""})]})},T.address))})]})]}),n===2&&f.jsxs("div",{className:"px-4 animate-slide-up space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-2 block uppercase tracking-wider",children:" "}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:Fy.map(T=>f.jsx("button",{onClick:()=>g(T.value),className:`card text-left text-sm py-3 active:scale-[0.98] transition-all
                      ${d===T.value?"border-2 border-primary-500 bg-primary-50":""}`,children:T.label},T.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:"  ()"}),f.jsx("input",{type:"number",placeholder:" - 50000",value:y,onChange:T=>x(T.target.value),className:"input-field"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:"  "}),f.jsx("input",{type:"tel",placeholder:"09xxxxxxxx",value:E,onChange:T=>A(T.target.value),className:"input-field"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block uppercase tracking-wider",children:" "}),f.jsx("textarea",{rows:3,placeholder:"...",value:D,onChange:T=>j(T.target.value),className:"input-field resize-none"})]})]}),n===3&&f.jsx("div",{className:"px-4 animate-slide-up",children:f.jsxs("div",{className:"card mb-4 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:""}),f.jsx("p",{className:"text-sm font-semibold",children:r==null?void 0:r.address})]})]}),f.jsx("div",{className:"w-px h-4 bg-gray-200 ml-4"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:""}),f.jsx("p",{className:"text-sm font-semibold",children:l==null?void 0:l.address})]})]}),f.jsxs("div",{className:"border-t border-gray-100 pt-3 space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsx("span",{className:"text-gray-400",children:""}),f.jsx("span",{className:"font-semibold",children:(C=Fy.find(T=>T.value===d))==null?void 0:C.label})]}),f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsx("span",{className:"text-gray-400",children:""}),f.jsxs("span",{className:"font-semibold",children:[Number(y).toLocaleString()," "]})]}),f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsx("span",{className:"text-gray-400",children:""}),f.jsx("span",{className:"font-semibold",children:E})]}),f.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-100",children:[f.jsx("span",{className:"text-gray-500 font-semibold",children:"Delivery Fee"}),f.jsxs("span",{className:"text-xl font-display font-black text-primary-500",children:[$.toLocaleString()," "]})]})]})]})})]}),f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-4 pb-8",children:[n===1&&f.jsx("button",{onClick:()=>i(2),disabled:!r||!l,className:"btn-primary disabled:opacity-50",children:" "}),n===2&&f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>i(1),className:"flex-1 py-4 rounded-2xl border border-gray-200 font-bold text-gray-500",children:" "}),f.jsx("button",{onClick:()=>i(3),disabled:!d||!y||!E,className:"flex-[2] btn-primary disabled:opacity-50",children:" "})]}),n===3&&f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>i(2),className:"flex-1 py-4 rounded-2xl border border-gray-200 font-bold text-gray-500",children:" "}),f.jsx("button",{onClick:Y,disabled:U,className:"flex-[2] btn-primary disabled:opacity-50",children:U?"...":` Order  (${$.toLocaleString()} )`})]})]})]})}const vf=["pending","accepted","picked_up","delivered"];function E2(){const t=In[0],e=ki[0],[n,i]=H.useState(e.currentLocation);H.useEffect(()=>{const o=setInterval(()=>{i(l=>({lat:l.lat+(Math.random()-.5)*.001,lng:l.lng+(Math.random()-.5)*.001}))},3e3);return()=>clearInterval(o)},[]);const r=vf.indexOf(t.status);return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Track Order"}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[f.jsxs("div",{className:"h-64 relative",children:[f.jsx(aa,{riders:[{...e,currentLocation:n}],pickupPoint:t.pickup,dropoffPoint:t.dropoff,height:"100%"}),f.jsxs("div",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"}),"LIVE"]})]}),f.jsx("div",{className:"px-4 -mt-4 relative z-10",children:f.jsxs("div",{className:"card animate-slide-up",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-gray-400",children:["Order #",t.id]}),f.jsxs("p",{className:"text-lg font-display font-black text-dark",children:[t.price.toLocaleString()," "]})]}),f.jsx("span",{className:`status-badge ${Lg[t.status]}`,children:Lh[t.status]})]}),f.jsx("div",{className:"flex items-center justify-between mb-4",children:vf.map((o,l)=>f.jsxs("div",{className:"flex items-center flex-1",children:[f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm border-2 transition-all
                      ${l<=r?"bg-primary-500 border-primary-500 text-white":"bg-white border-gray-200 text-gray-400"}`,children:l<=r?"":l+1}),f.jsx("p",{className:"text-[9px] text-gray-400 mt-1 text-center w-14",children:Lh[o]})]}),l<vf.length-1&&f.jsx("div",{className:`flex-1 h-0.5 mx-1 mb-4 transition-all ${l<r?"bg-primary-500":"bg-gray-200"}`})]},o))})]})}),f.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.1s"},children:f.jsx("div",{className:"card",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-display font-bold text-dark text-sm",children:e.name}),f.jsxs("p",{className:"text-xs text-gray-400",children:[" ",e.rating,"  ",e.totalDeliveries," deliveries"]})]}),f.jsx("a",{href:`tel:${e.phone}`,className:"w-10 h-10 bg-primary-500 rounded-2xl flex items-center justify-center text-white shadow-primary",children:""})]})})}),f.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.15s"},children:f.jsxs("div",{className:"card",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Route"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Pickup"}),f.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t.pickup.address})]})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("div",{className:"w-px h-6 bg-gray-200"}),f.jsxs("span",{className:"text-xs text-gray-400",children:[t.distance," km"]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Dropoff"}),f.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t.dropoff.address})]})]})]})]})})]}),f.jsx(Ui,{})]})}const zy={pending:{label:"",color:"bg-yellow-100 text-yellow-600"},accepted:{label:"Rider ",color:"bg-blue-100 text-blue-600"},picked_up:{label:"",color:"bg-purple-100 text-purple-600"},delivered:{label:"",color:"bg-green-100 text-green-600"},cancelled:{label:"",color:"bg-red-100 text-red-600"}};function T2({order:t,onClose:e,onSubmit:n}){const[i,r]=H.useState(5),[o,l]=H.useState("");return f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:f.jsxs("div",{className:"bg-white w-full rounded-t-3xl px-6 py-6 animate-slide-up",children:[f.jsx("h3",{className:"text-lg font-display font-black text-dark mb-1",children:"Rating "}),f.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:[t.riderName||"Rider","  Rating "]}),f.jsx("div",{className:"flex justify-center gap-3 mb-4",children:[1,2,3,4,5].map(h=>f.jsx("button",{onClick:()=>r(h),className:`text-3xl transition-all ${h<=i?"opacity-100":"opacity-30"}`,children:""},h))}),f.jsx("textarea",{rows:3,placeholder:" ()",value:o,onChange:h=>l(h.target.value),className:"input-field resize-none mb-4"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:e,className:"flex-1 py-4 rounded-2xl border border-gray-200 font-bold text-gray-500",children:""}),f.jsx("button",{onClick:()=>n(i,o),className:"flex-[2] btn-primary",children:"Rating  "})]})]})})}function I2(){const{user:t}=Vr(),e=dn(),[n,i]=H.useState([]),[r,o]=H.useState(!0),[l,h]=H.useState(null);H.useEffect(()=>{if(!t)return;const y=TL(vT(Vi,"orders"),IL("customerId","==",t.uid),PL("createdAt","desc")),x=bL(y,E=>{i(E.docs.map(A=>({id:A.id,...A.data()}))),o(!1)});return()=>x()},[t]);const d=async(y,x)=>{await NT(Nr(Vi,"orders",l.id),{rating:y,ratingComment:x,ratedAt:new Date}),h(null)},g=y=>{if(!y)return"";const x=y.toDate?y.toDate():new Date(y),E=Math.floor((Date.now()-x)/1e3);return E<60?"":E<3600?`${Math.floor(E/60)} `:E<86400?`${Math.floor(E/3600)} `:`${Math.floor(E/86400)} `};return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Order "}),f.jsx("div",{className:"flex-1 overflow-y-auto pb-24 px-4 pt-4",children:r?f.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):n.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx("p",{className:"text-4xl mb-3",children:""}),f.jsx("p",{className:"text-gray-400 text-sm",children:"Order  "}),f.jsx("button",{onClick:()=>e("/customer/order"),className:"btn-primary mt-4 w-auto px-6",children:"Order  "})]}):f.jsx("div",{className:"space-y-3",children:n.map(y=>{var E,A,D,j;const x=zy[y.status]||zy.pending;return f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{children:[f.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["#",(E=y.id)==null?void 0:E.slice(-6).toUpperCase()]}),f.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full font-semibold ${x.color}`,children:x.label})]}),f.jsx("span",{className:"text-xs text-gray-400",children:g(y.createdAt)})]}),f.jsxs("div",{className:"space-y-1 mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[f.jsx("span",{children:""}),f.jsx("span",{children:(A=y.pickup)==null?void 0:A.address})]}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[f.jsx("span",{children:""}),f.jsx("span",{children:(D=y.dropoff)==null?void 0:D.address})]})]}),f.jsxs("div",{className:"flex justify-between items-center border-t border-gray-100 pt-2",children:[f.jsxs("span",{className:"text-sm font-display font-black text-primary-500",children:[(j=y.deliveryFee)==null?void 0:j.toLocaleString()," "]}),y.status==="delivered"&&!y.rating&&f.jsx("button",{onClick:()=>h(y),className:"text-xs bg-yellow-100 text-yellow-600 font-bold px-3 py-1 rounded-full",children:" Rating "}),y.rating&&f.jsxs("div",{className:"flex items-center gap-1",children:["".repeat(y.rating),f.jsxs("span",{className:"text-xs text-gray-400",children:[y.rating,"/5"]})]})]})]},y.id)})})}),f.jsx(Ui,{}),l&&f.jsx(T2,{order:l,onClose:()=>h(null),onSubmit:d})]})}function P2(){var A,D;const{user:t,logout:e}=Vr(),n=dn(),[i,r]=H.useState(!1),[o,l]=H.useState({name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||""}),[h,d]=H.useState(!1),[g,y]=H.useState(!1),x=async()=>{d(!0);try{await NT(Nr(Vi,"users",t.uid),{name:o.name,phone:o.phone}),y(!0),r(!1),setTimeout(()=>y(!1),2e3)}catch{alert(" ")}finally{d(!1)}},E=async()=>{await e(),n("/")};return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Profile"}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[f.jsxs("div",{className:"bg-dark px-6 pt-6 pb-10 text-center relative",children:[f.jsx("div",{className:"w-20 h-20 bg-primary-500 rounded-full flex items-center justify-center mx-auto mb-3 shadow-primary",children:f.jsx("span",{className:"text-3xl font-display font-black text-white",children:(D=(A=t==null?void 0:t.name)==null?void 0:A.charAt(0))==null?void 0:D.toUpperCase()})}),f.jsx("h2",{className:"text-xl font-display font-black text-white",children:t==null?void 0:t.name}),f.jsx("p",{className:"text-gray-400 text-xs mt-1",children:t==null?void 0:t.email}),f.jsx("span",{className:"inline-block mt-2 bg-primary-500/20 text-primary-400 text-xs px-3 py-1 rounded-full font-semibold",children:" Customer"})]}),f.jsxs("div",{className:"px-4 -mt-4",children:[f.jsxs("div",{className:"card mb-4",children:[g&&f.jsx("div",{className:"bg-green-50 text-green-600 text-xs px-3 py-2 rounded-xl mb-3",children:" "}),f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),f.jsx("button",{onClick:()=>r(!i),className:"text-xs text-primary-500 font-semibold",children:i?"":" "})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:""}),i?f.jsx("input",{value:o.name,onChange:j=>l({...o,name:j.target.value}),className:"input-field"}):f.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t==null?void 0:t.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:""}),i?f.jsx("input",{value:o.phone,onChange:j=>l({...o,phone:j.target.value}),className:"input-field"}):f.jsx("p",{className:"text-sm font-semibold text-gray-700",children:(t==null?void 0:t.phone)||"-"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Email"}),f.jsx("p",{className:"text-sm font-semibold text-gray-700",children:t==null?void 0:t.email})]})]}),i&&f.jsx("button",{onClick:x,disabled:h,className:"btn-primary mt-4",children:h?"...":" "})]}),f.jsxs("div",{className:"card mb-4",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Quick Links"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("button",{onClick:()=>n("/customer/history"),className:"w-full flex items-center gap-3 py-3 text-left",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Order "}),f.jsx("span",{className:"ml-auto text-gray-300",children:""})]}),f.jsxs("button",{onClick:()=>n("/customer/order"),className:"w-full flex items-center gap-3 py-3 text-left",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Order "}),f.jsx("span",{className:"ml-auto text-gray-300",children:""})]})]})]}),f.jsx("button",{onClick:E,className:"w-full py-4 rounded-2xl border border-red-200 text-red-500 font-bold text-sm",children:" Logout"})]})]}),f.jsx(Ui,{})]})}function S2(){const{user:t}=Vr(),e=dn(),[n,i]=H.useState(!0),r=In.filter(l=>l.status==="pending"),o=ki[0];return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[f.jsx("div",{className:`px-4 py-4 ${n?"bg-dark":"bg-gray-700"} transition-colors`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-400 text-xs font-body",children:" "}),f.jsx("h2",{className:"text-lg font-display font-black text-white",children:t==null?void 0:t.name}),f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.jsxs("span",{className:"text-yellow-400 text-xs",children:[" ",o.rating]}),f.jsx("span",{className:"text-gray-500 text-xs",children:""}),f.jsxs("span",{className:"text-gray-400 text-xs",children:[o.totalDeliveries," deliveries"]})]})]}),f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx("button",{onClick:()=>i(!n),className:`relative w-14 h-8 rounded-full transition-colors ${n?"bg-green-500":"bg-gray-500"}`,children:f.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n?"translate-x-7":"translate-x-1"}`})}),f.jsx("span",{className:`text-[10px] font-bold ${n?"text-green-400":"text-gray-400"}`,children:n?"ONLINE":"OFFLINE"})]})]})}),f.jsx("div",{className:"px-4 mt-4 mb-4 animate-slide-up",children:f.jsx("div",{className:"h-44 rounded-3xl overflow-hidden shadow-card",children:f.jsx(aa,{riders:n?[o]:[],height:"100%"})})}),f.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.05s"},children:f.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{icon:"",value:"5",label:" Orders"},{icon:"",value:"22,500",label:" ()"},{icon:"",value:"4.8",label:"Rating"}].map(l=>f.jsxs("div",{className:"card text-center",children:[f.jsx("p",{className:"text-xl mb-1",children:l.icon}),f.jsx("p",{className:"font-display font-black text-dark text-base",children:l.value}),f.jsx("p",{className:"text-[10px] text-gray-400 font-body",children:l.label})]},l.label))})}),n&&f.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.1s"},children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Available Orders"}),f.jsxs("span",{className:"bg-primary-100 text-primary-600 text-xs font-bold px-2 py-0.5 rounded-full",children:[r.length," new"]})]}),r.length===0?f.jsxs("div",{className:"card text-center py-8",children:[f.jsx("p",{className:"text-3xl mb-2",children:""}),f.jsx("p",{className:"text-gray-400 text-sm font-body",children:"Order "})]}):f.jsx("div",{className:"space-y-3 stagger",children:r.map(l=>f.jsxs("div",{className:"card animate-slide-up",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-gray-400",children:["#",l.id]}),f.jsxs("p",{className:"font-display font-black text-dark",children:[l.price.toLocaleString()," "]})]}),f.jsxs("span",{className:"text-xs text-gray-400",children:[l.distance," km"]})]}),f.jsxs("div",{className:"space-y-1.5 mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),f.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.pickup.address})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),f.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.dropoff.address})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"flex-1 py-2.5 rounded-xl bg-gray-100 text-gray-600 text-xs font-bold",children:" Reject"}),f.jsx("button",{onClick:()=>e("/rider/delivery"),className:"flex-1 py-2.5 rounded-xl bg-primary-500 text-white text-xs font-bold shadow-primary",children:" Accept"})]})]},l.id))})]}),!n&&f.jsxs("div",{className:"px-4 py-8 text-center animate-fade-in",children:[f.jsx("p",{className:"text-5xl mb-3",children:""}),f.jsx("p",{className:"text-gray-400 font-body text-sm",children:"Offline mode - Orders "}),f.jsx("button",{onClick:()=>i(!0),className:"mt-4 btn-primary w-auto px-8 inline-block",children:"Online "})]})]}),f.jsx(Ui,{})]})}const Ja=[{key:"accepted",icon:"",label:"Order ",action:""},{key:"picked_up",icon:"",label:"",action:""},{key:"delivered",icon:"",label:"",action:null}];function C2(){const t=dn(),e=In[0],n=ki[0],[i,r]=H.useState(0),[o,l]=H.useState(n.currentLocation);H.useEffect(()=>{const y=setInterval(()=>{l(x=>({lat:x.lat+(Math.random()-.5)*.001,lng:x.lng+(Math.random()-.5)*.001}))},2e3);return()=>clearInterval(y)},[]);const h=Ja[i],d=i===Ja.length-1,g=()=>{i<Ja.length-1&&r(i+1)};return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Active Delivery"}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-28",children:[f.jsxs("div",{className:"h-56 relative",children:[f.jsx(aa,{riders:[{...n,currentLocation:o}],pickupPoint:e.pickup,dropoffPoint:e.dropoff,height:"100%"}),f.jsxs("div",{className:"absolute top-3 left-3 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"}),"GPS Active"]})]}),f.jsx("div",{className:"px-4 -mt-4 relative z-10",children:f.jsxs("div",{className:`card animate-slide-up ${d?"border-2 border-green-400":""}`,children:[f.jsxs("div",{className:"text-center py-2",children:[f.jsx("span",{className:"text-4xl",children:h.icon}),f.jsx("p",{className:"font-display font-black text-dark text-lg mt-2",children:h.label})]}),f.jsx("div",{className:"flex items-center justify-center gap-2 my-4",children:Ja.map((y,x)=>f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all
                    ${x<=i?"bg-primary-500 border-primary-500 text-white":"bg-white border-gray-200 text-gray-400"}`,children:x<i?"":x+1}),x<Ja.length-1&&f.jsx("div",{className:`w-8 h-0.5 transition-all ${x<i?"bg-primary-500":"bg-gray-200"}`})]},y.key))})]})}),f.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.05s"},children:f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("p",{className:"text-xs text-gray-400",children:["#",e.id]}),f.jsxs("p",{className:"font-display font-black text-primary-500",children:[e.price.toLocaleString()," "]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Pickup"}),f.jsx("p",{className:"text-xs font-semibold text-gray-700",children:e.pickup.address})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-sm",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Dropoff"}),f.jsx("p",{className:"text-xs font-semibold text-gray-700",children:e.dropoff.address})]})]})]}),e.note&&f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[f.jsx("p",{className:"text-xs text-gray-400",children:""}),f.jsx("p",{className:"text-xs text-gray-600",children:e.note})]})]})})]}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-4 pb-8",children:d?f.jsx("button",{onClick:()=>t("/rider"),className:"w-full bg-green-500 text-white font-display font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all",children:" Delivery ! Dashboard "}):f.jsxs("button",{onClick:g,className:"btn-primary",children:[h.action," "]})})]})}function A2(){const{user:t}=Vr(),[e,n]=H.useState({coinBalance:5e3,totalEarned:25e3,totalCommission:2500,isLowBalance:!1}),[i,r]=H.useState([{id:"t1",type:"topup",amount:5e3,commission:0,netAmount:5e3,note:"Admin top-up",balanceAfter:5e3,createdAt:new Date(Date.now()-2*60*60*1e3)},{id:"t2",type:"commission",amount:3500,commission:350,netAmount:3150,note:"Order #ORD001 - 10% commission",balanceAfter:4650,createdAt:new Date(Date.now()-30*60*1e3)},{id:"t3",type:"commission",amount:5e3,commission:500,netAmount:4500,note:"Order #ORD002 - 10% commission",balanceAfter:4150,createdAt:new Date(Date.now()-10*60*1e3)}]),o=l=>{const h=Math.floor((Date.now()-l)/6e4);return h<60?`${h} `:`${Math.floor(h/60)} `};return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Wallet"}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[e.isLowBalance&&f.jsxs("div",{className:"mx-4 mt-4 bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center gap-2 animate-slide-up",children:[f.jsx("span",{className:"text-xl",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-red-600",children:"Coin !"}),f.jsx("p",{className:"text-xs text-red-400",children:"Admin  coin  "})]})]}),f.jsx("div",{className:"px-4 mt-4 animate-slide-up",children:f.jsxs("div",{className:"bg-dark rounded-3xl p-5 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-500 rounded-full opacity-10 blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsx("p",{className:"text-gray-400 text-xs font-body mb-1",children:"  Coin"}),f.jsxs("p",{className:"text-4xl font-display font-black text-white",children:[e.coinBalance.toLocaleString(),f.jsx("span",{className:"text-primary-400 text-lg ml-1",children:""})]}),f.jsxs("div",{className:"flex gap-4 mt-4 pt-4 border-t border-white/10",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:" "}),f.jsxs("p",{className:"text-sm font-display font-bold text-green-400",children:["+",e.totalEarned.toLocaleString()," "]})]}),f.jsx("div",{className:"w-px bg-white/10"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Commission "}),f.jsxs("p",{className:"text-sm font-display font-bold text-red-400",children:["-",e.totalCommission.toLocaleString()," "]})]})]})]})}),f.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.05s"},children:f.jsxs("div",{className:"card flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-xl",children:""}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Commission Rate"}),f.jsxs("p",{className:"text-xs text-gray-400",children:["Delivery  ",f.jsx("span",{className:"text-primary-500 font-bold",children:"10%"})," "]})]})]})}),f.jsx("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.1s"},children:f.jsxs("div",{className:"card",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Commission "}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:[3e3,5e3,8e3,1e4,15e3,2e4].map(l=>f.jsxs("div",{className:"bg-surface rounded-xl p-2 text-center",children:[f.jsx("p",{className:"text-xs text-gray-500",children:l.toLocaleString()}),f.jsxs("p",{className:"text-xs font-bold text-red-500",children:["-",(l*.1).toLocaleString()]}),f.jsxs("p",{className:"text-xs font-bold text-green-600",children:["=",(l*.9).toLocaleString()]})]},l))}),f.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[f.jsx("span",{className:"text-[10px] text-gray-400",children:"Delivery "}),f.jsx("span",{className:"text-[10px] text-red-400",children:"Commission (10%)"}),f.jsx("span",{className:"text-[10px] text-green-500",children:" (90%)"})]})]})}),f.jsxs("div",{className:"px-4 mt-3 animate-slide-up",style:{animationDelay:"0.15s"},children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Transaction History"}),f.jsx("div",{className:"space-y-2 stagger",children:i.map(l=>f.jsx("div",{className:"card animate-slide-up",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center text-xl
                    ${l.type==="topup"?"bg-green-100":"bg-red-100"}`,children:l.type==="topup"?"":""}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-xs font-semibold text-dark",children:l.note}),f.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:o(l.createdAt)})]}),f.jsx("div",{className:"text-right",children:l.type==="topup"?f.jsxs("p",{className:"text-sm font-display font-black text-green-500",children:["+",l.amount.toLocaleString()]}):f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs font-bold text-red-500",children:["-",l.commission.toLocaleString()," "]}),f.jsxs("p",{className:"text-[10px] text-gray-400",children:[": ",l.balanceAfter.toLocaleString()]})]})})]})},l.id))})]})]}),f.jsx(Ui,{})]})}function k2(){const t=dn(),e=ki.filter(o=>o.isOnline).length,n=In.reduce((o,l)=>o+l.price,0),i=In.filter(o=>o.status==="pending").length,r=[{icon:"",value:e,total:ki.length,label:"Riders Online",color:"bg-green-50 text-green-600"},{icon:"",value:In.length,label:"Total Orders",color:"bg-blue-50 text-blue-600"},{icon:"",value:i,label:"Pending",color:"bg-yellow-50 text-yellow-600"},{icon:"",value:`${(n/1e3).toFixed(0)}K`,label:"Revenue ()",color:"bg-primary-50 text-primary-600"}];return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[f.jsxs("div",{className:"bg-dark px-4 pt-4 pb-6 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-500 rounded-full opacity-10 blur-2xl -translate-y-1/2 translate-x-1/2"}),f.jsx("p",{className:"text-gray-400 text-xs font-body",children:"Admin Panel "}),f.jsx("h2",{className:"text-xl font-display font-black text-white",children:"Overview Dashboard"})]}),f.jsx("div",{className:"px-4 -mt-3 relative z-10 mb-4",children:f.jsx("div",{className:"grid grid-cols-2 gap-3 stagger",children:r.map(o=>f.jsxs("div",{className:"card animate-slide-up",children:[f.jsx("div",{className:`w-10 h-10 rounded-2xl ${o.color} flex items-center justify-center text-xl mb-2`,children:o.icon}),f.jsxs("p",{className:"font-display font-black text-2xl text-dark",children:[o.value,o.total&&f.jsxs("span",{className:"text-gray-300 text-base font-normal",children:["/",o.total]})]}),f.jsx("p",{className:"text-xs text-gray-400 font-body",children:o.label})]},o.label))})}),f.jsx("div",{className:"px-4 mb-4 animate-slide-up",style:{animationDelay:"0.1s"},children:f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>t("/admin/map"),className:"card flex items-center gap-3 active:scale-95 transition-all",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-xl",children:""}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Live Map"}),f.jsx("p",{className:"text-xs text-gray-400",children:"Riders "})]})]}),f.jsxs("button",{onClick:()=>t("/admin/riders"),className:"card flex items-center gap-3 active:scale-95 transition-all",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-2xl flex items-center justify-center text-xl",children:""}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-sm font-display font-bold text-dark",children:"Riders"}),f.jsx("p",{className:"text-xs text-gray-400",children:""})]})]})]})}),f.jsxs("div",{className:"px-4 animate-slide-up",style:{animationDelay:"0.15s"},children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Recent Orders"}),f.jsx("button",{onClick:()=>t("/admin/orders"),className:"text-xs text-primary-500 font-semibold",children:"All "})]}),f.jsx("div",{className:"space-y-2 stagger",children:In.map(o=>f.jsx("div",{className:"card animate-slide-up",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsxs("p",{className:"text-xs font-bold text-dark",children:["#",o.id]}),f.jsx("span",{className:`status-badge ${Lg[o.status]}`,children:Lh[o.status]})]}),f.jsxs("p",{className:"text-xs text-gray-400 truncate",children:[o.pickup.address,"  ",o.dropoff.address]})]}),f.jsx("p",{className:"text-sm font-display font-black text-primary-500 ml-2",children:o.price.toLocaleString()})]})},o.id))})]}),f.jsxs("div",{className:"px-4 mt-4 animate-slide-up",style:{animationDelay:"0.2s"},children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Riders Status"}),f.jsx("div",{className:"space-y-2 stagger",children:ki.map(o=>f.jsx("div",{className:"card animate-slide-up",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-lg",children:""}),f.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white ${o.isOnline?"bg-green-500":"bg-gray-400"}`})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-semibold text-dark",children:o.name}),f.jsxs("p",{className:"text-xs text-gray-400",children:[" ",o.rating,"  ",o.totalDeliveries," trips"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:`text-xs font-bold ${o.isOnline?"text-green-500":"text-gray-400"}`,children:o.isOnline?" Online":" Offline"}),f.jsx("p",{className:"text-xs text-gray-400",children:o.isAvailable?"Available":"Busy"})]})]})},o.id))})]})]}),f.jsx(Ui,{})]})}function b2(){const t=ki.filter(e=>e.isOnline);return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Live Map"}),f.jsxs("div",{className:"flex-1 flex flex-col pb-16",children:[f.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 bg-white border-b border-gray-100",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),f.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[t.length," Online Riders"]})]}),f.jsx("div",{className:"w-px h-4 bg-gray-200"}),f.jsxs("span",{className:"text-xs text-gray-500",children:[" ",In.filter(e=>e.status==="accepted").length," Active Orders"]})]}),f.jsx("div",{className:"flex-1 px-3 py-3",children:f.jsx(aa,{riders:t,pickupPoint:In[0].pickup,dropoffPoint:In[0].dropoff,height:"100%",zoom:12})}),f.jsxs("div",{className:"px-4 py-2 flex items-center gap-4 bg-white border-t border-gray-100",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-primary-500"}),f.jsx("span",{className:"text-[10px] text-gray-500",children:"Rider"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),f.jsx("span",{className:"text-[10px] text-gray-500",children:"Pickup"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),f.jsx("span",{className:"text-[10px] text-gray-500",children:"Dropoff"})]})]})]}),f.jsx(Ui,{})]})}const N2=ki.map((t,e)=>({...t,coinBalance:[4150,850,12e3][e],totalEarned:[25e3,8e3,45e3][e],totalCommission:[2500,800,4500][e],isLowBalance:[!1,!0,!1][e]}));function R2(){const[t,e]=H.useState(N2),[n,i]=H.useState(null),[r,o]=H.useState(""),[l,h]=H.useState(""),[d,g]=H.useState(!1),[y,x]=H.useState(""),E=[5e3,1e4,2e4,5e4],A=async()=>{!n||!r||(g(!0),setTimeout(()=>{e(D=>D.map(j=>j.id===n.id?{...j,coinBalance:j.coinBalance+parseInt(r),isLowBalance:!1}:j)),x(`${n.name}  ${parseInt(r).toLocaleString()}  `),i(null),o(""),h(""),g(!1),setTimeout(()=>x(""),3e3)},800))};return f.jsxs("div",{className:"flex flex-col h-screen bg-surface",children:[f.jsx(Hn,{title:"Wallet Management"}),f.jsxs("div",{className:"flex-1 overflow-y-auto pb-24",children:[y&&f.jsxs("div",{className:"mx-4 mt-4 bg-green-50 border border-green-200 rounded-2xl p-3 flex items-center gap-2 animate-slide-up",children:[f.jsx("span",{children:""}),f.jsx("p",{className:"text-xs font-bold text-green-600",children:y})]}),f.jsx("div",{className:"px-4 mt-4 mb-4",children:f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"card",children:[f.jsx("p",{className:"text-2xl font-display font-black text-dark",children:t.filter(D=>D.isLowBalance).length}),f.jsx("p",{className:"text-xs text-red-500 font-semibold",children:" Low Balance"})]}),f.jsxs("div",{className:"card",children:[f.jsx("p",{className:"text-2xl font-display font-black text-dark",children:t.reduce((D,j)=>D+j.coinBalance,0).toLocaleString()}),f.jsx("p",{className:"text-xs text-gray-400",children:"Total Coins ()"})]})]})}),f.jsxs("div",{className:"px-4",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Riders Wallet"}),f.jsx("div",{className:"space-y-3 stagger",children:t.map(D=>f.jsxs("div",{className:`card animate-slide-up border-2 ${D.isLowBalance?"border-red-200":"border-transparent"}`,children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-2xl flex items-center justify-center text-lg",children:""}),D.isLowBalance&&f.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-[8px] text-white font-bold",children:"!"})})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-display font-bold text-dark",children:D.name}),f.jsx("p",{className:"text-xs text-gray-400",children:D.phone})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:`text-base font-display font-black ${D.isLowBalance?"text-red-500":"text-dark"}`,children:D.coinBalance.toLocaleString()}),f.jsx("p",{className:"text-[10px] text-gray-400",children:""})]})]}),f.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-400 mb-3",children:[f.jsxs("span",{children:[" : ",D.totalEarned.toLocaleString()]}),f.jsxs("span",{children:[" Commission: ",D.totalCommission.toLocaleString()]})]}),f.jsx("button",{onClick:()=>i(D),className:`w-full py-2.5 rounded-xl text-xs font-bold transition-all
                    ${D.isLowBalance?"bg-red-500 text-white shadow-sm":"bg-primary-500 text-white shadow-primary"}`,children:" Coin "})]},D.id))})]})]}),n&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:f.jsxs("div",{className:"bg-white w-full rounded-t-3xl p-5 animate-slide-up",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gray-400",children:"Coin "}),f.jsx("p",{className:"font-display font-black text-dark text-lg",children:n.name}),f.jsxs("p",{className:"text-xs text-gray-400",children:[": ",f.jsxs("span",{className:"font-bold text-primary-500",children:[n.coinBalance.toLocaleString()," "]})]})]}),f.jsx("button",{onClick:()=>i(null),className:"text-gray-400 text-2xl",children:""})]}),f.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:E.map(D=>f.jsxs("button",{onClick:()=>o(String(D)),className:`py-2 rounded-xl text-xs font-bold border-2 transition-all
                    ${r===String(D)?"border-primary-500 bg-primary-500 text-white":"border-gray-200 text-gray-600"}`,children:[(D/1e3).toFixed(0),"K"]},D))}),f.jsx("input",{type:"number",placeholder:"Amount ()",value:r,onChange:D=>o(D.target.value),className:"input-field mb-3"}),f.jsx("input",{type:"text",placeholder:" (optional)",value:l,onChange:D=>h(D.target.value),className:"input-field mb-4"}),r&&f.jsxs("div",{className:"bg-green-50 rounded-xl p-3 mb-4 text-center",children:[f.jsx("p",{className:"text-xs text-gray-500",children:" "}),f.jsxs("p",{className:"text-xl font-display font-black text-green-600",children:[(n.coinBalance+parseInt(r||0)).toLocaleString()," "]})]}),f.jsx("button",{onClick:A,disabled:!r||d,className:"btn-primary",children:d?"...":` ${parseInt(r||0).toLocaleString()}  `})]})}),f.jsx(Ui,{})]})}function L2(){return f.jsx(OL,{children:f.jsx(jC,{basename:"/Gobike26",children:f.jsxs(OC,{children:[f.jsx(Tt,{path:"/",element:f.jsx(DL,{})}),f.jsx(Tt,{path:"/signup",element:f.jsx(ML,{})}),f.jsx(Tt,{path:"/login",element:f.jsx(jL,{})}),f.jsx(Tt,{path:"/gobike-admin-2024",element:f.jsx(VL,{})}),f.jsx(Tt,{path:"/customer",element:f.jsx(p2,{})}),f.jsx(Tt,{path:"/customer/order",element:f.jsx(w2,{})}),f.jsx(Tt,{path:"/customer/track",element:f.jsx(E2,{})}),f.jsx(Tt,{path:"/customer/history",element:f.jsx(I2,{})}),f.jsx(Tt,{path:"/customer/profile",element:f.jsx(P2,{})}),f.jsx(Tt,{path:"/rider",element:f.jsx(S2,{})}),f.jsx(Tt,{path:"/rider/delivery",element:f.jsx(C2,{})}),f.jsx(Tt,{path:"/rider/wallet",element:f.jsx(A2,{})}),f.jsx(Tt,{path:"/admin",element:f.jsx(k2,{})}),f.jsx(Tt,{path:"/admin/map",element:f.jsx(b2,{})}),f.jsx(Tt,{path:"/admin/wallet",element:f.jsx(R2,{})}),f.jsx(Tt,{path:"*",element:f.jsx(RC,{to:"/",replace:!0})})]})})})}yf.createRoot(document.getElementById("root")).render(f.jsx(Il.StrictMode,{children:f.jsx(L2,{})}));
